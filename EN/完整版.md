# Bivrost IoT Gateway Communication Protocol v1.19.4
<div align="center">
  <h3>Bivrost Technologies Co., Ltd.</h3>
  Phone: 18824672282<br>
  <img width="200" height="200" alt="image" src="https://github.com/user-attachments/assets/5669fd4a-db92-4f91-b94b-3b422271b9a7" />
</div>

---

> The information contained in this document is proprietary to Bivrost Technologies and is disclosed in confidence. No person may use or disclose to any other person or reproduce this information without obtaining the express written consent of Bivrost Technologies.
>
> © BIVROST TECHNOLOGIES Company Limited, 2026

---

## Table of Contents

- [I. Important Notes](01_Important_Notes.md)
  - [1.1 Identifier Description](01_Important_Notes.md#11-identifier-description)
    - [1.1.1 machineID — Machine Identifier](01_Important_Notes.md#111-machineid--machine-identifier)
    - [1.1.2 groupID — Machine Group Identifier](01_Important_Notes.md#112-groupid--machine-group-identifier)
    - [1.1.3 slaveID — Slave Station Identifier](01_Important_Notes.md#113-slaveid--slave-station-identifier)
    - [1.1.4 ID — Database Identifier](01_Important_Notes.md#114-id--database-identifier)
  - [1.2 Data Description](01_Important_Notes.md#12-data-description)
    - [1.2.1 AlarmHistory: Alarm History](01_Important_Notes.md#121-alarmhistory-alarm-history)
    - [1.2.2 AlarmLog: Current Alarms](01_Important_Notes.md#122-alarmlog-current-alarms)
    - [1.2.3 AxialOverload: Servo Axis Overload Data](01_Important_Notes.md#123-axialoverload-servo-axis-overload-data)
    - [1.2.4 CNCStatus: Machine Status](01_Important_Notes.md#124-cncstatus-machine-status)
    - [1.2.5 Count: Machining Count](01_Important_Notes.md#125-count-machining-count)
    - [1.2.6 CurrentToolNumber: Current Tool Number](01_Important_Notes.md#126-currenttoolnumber-current-tool-number)
    - [1.2.7 Cycle: Cycle Time Data](01_Important_Notes.md#127-cycle-cycle-time-data)
    - [1.2.8 EnergyConsum: Energy Consumption Data](01_Important_Notes.md#128-energyconsum-energy-consumption-data)
    - [1.2.9 Feed: Feed Data](01_Important_Notes.md#129-feed-feed-data)
    - [1.2.10 FeedAndSpindle: Feed Override Data](01_Important_Notes.md#1210-feedandspindle-feed-override-data)
    - [1.2.11 GroupCount: Machine Group Machining Count](01_Important_Notes.md#1211-groupcount-machine-group-machining-count)
    - [1.2.12 GroupCumulativeTime: Machine Group Cumulative Status Time](01_Important_Notes.md#1212-groupcumulativetime-machine-group-cumulative-status-time)
    - [1.2.13 GroupOEE: Machine Group OEE](01_Important_Notes.md#1213-groupoee-machine-group-oee)
    - [1.2.14 LaserPower: Laser Power](01_Important_Notes.md#1214-laserpower-laser-power)
    - [1.2.15 Load: Load Data](01_Important_Notes.md#1215-load-load-data)
    - [1.2.16 LogHistory: Log History](01_Important_Notes.md#1216-loghistory-log-history)
    - [1.2.17 OEE: Machine OEE Data](01_Important_Notes.md#1217-oee-machine-oee-data)
    - [1.2.18 Offset: Tool Offset Data](01_Important_Notes.md#1218-offset-tool-offset-data)
    - [1.2.19 PLC: PLC Data](01_Important_Notes.md#1219-plc-plc-data)
    - [1.2.20 Position: Coordinate Data](01_Important_Notes.md#1220-position-coordinate-data)
    - [1.2.21 ProgramBlock: Program Block](01_Important_Notes.md#1221-programblock-program-block)
    - [1.2.22 ProgramInfo: Current Program](01_Important_Notes.md#1222-programinfo-current-program)
    - [1.2.23 SpindleOverLoad: Spindle Overload Data](01_Important_Notes.md#1223-spindleoverload-spindle-overload-data)
    - [1.2.24 TimeData: Machine Time Data](01_Important_Notes.md#1224-timedata-machine-time-data)
    - [1.2.25 ToolLife: Tool Life Data](01_Important_Notes.md#1225-toollife-tool-life-data)
  - [1.3 Variable Description](01_Important_Notes.md#13-variable-description)
    - [1.3.1 Machine Status](01_Important_Notes.md#131-machine-status)
    - [1.3.2 Alarm Information](01_Important_Notes.md#132-alarm-information)
    - [1.3.3 Service Information](01_Important_Notes.md#133-service-information)

- [II. HTTP Communication](02_HTTP_Basics.md)
  - [2.1 Basic Description](02_HTTP_Basics.md#21-basic-description)
  - [2.2 Error Handling](02_HTTP_Basics.md#22-error-handling)
  - [2.3 Authentication Methods](02_HTTP_Basics.md#23-authentication-methods)
  - [2.4 Authentication Interface](02_HTTP_Basics.md#24-authentication-interface)
  - [2.5 Data Read/Write Interface](03_HTTP_Data_Read_Write.md)
    - [2.5.1 Direct Read/Write](03_HTTP_Data_Read_Write.md#251-direct-readwrite)
    - [2.5.2 Cache Read](03_HTTP_Data_Read_Write.md#252-cache-read)
  - [2.6 File Management Interface](04_HTTP_File_Management.md)
  - [2.7 Data Analysis Interface](05_HTTP_Data_Analysis.md)
  - [2.8 Historical Data Interface](06_HTTP_Historical_Data.md)
  - [2.9 Gateway Configuration Interface](07_HTTP_Gateway_Config.md)
  - [2.10 Gateway Function Interface](08_HTTP_Gateway_Functions.md)

- [III. MODBUS Communication](09_MODBUS_Communication.md)
  - [3.1 Machine-Related Data](09_MODBUS_Communication.md#31-machine-related-data)
  - [3.2 Machine Group-Related Data](09_MODBUS_Communication.md#32-machine-group-related-data)

- [IV. MQTT Communication](10_MQTT_Communication.md)
  - [4.1 Data Report Message Format](10_MQTT_Communication.md#41-data-report-message-format)
  - [4.2 RPC Interface](10_MQTT_Communication.md#42-rpc-interface)

- [V. Database Communication](11_Database_Communication.md)

- [VI. Simulated Machine Test](12_Simulation_and_FAQ.md#vi-simulated-machine-test)

- [VII. Frequently Asked Questions](12_Simulation_and_FAQ.md#vii-frequently-asked-questions)

- [Version Change History](13_Version_History.md)

---

## Table Index

| Table No. | Table Name | File |
|-----------|-----------|------|
| Table 1 | Data Classes | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 2 | Alarm History \<field\> Data Fields | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 3 | Current Alarm \<field\> Data Fields | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 4 | Servo Axis Overload \<field\> Data Fields | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 5 | Servo Axis Overload \<tag\> Data Tags | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 6 | Machine Status \<field\> Data Fields | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 7 | Machine Status \<tag\> Data Tags | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 8 | Machining Count \<field\> Data Fields | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 10 | Current Tool Number \<field\> Data Fields | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 11 | Current Tool Number \<tag\> Data Tags | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 12 | Cycle Time \<field\> Data Fields | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 13 | Energy Consumption \<field\> Data Fields | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 14 | Feed Data \<field\> Data Fields | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 15 | Feed Data \<tag\> Data Tags | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 16 | Feed Override \<field\> Data Fields | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 17 | Feed Override \<tag\> Data Tags | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 18 | Machine Group Machining Count \<field\> Data Fields | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 19 | Machine Group Cumulative Status Time \<field\> Data Fields | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 20 | Machine Group OEE \<field\> Data Fields | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 21 | Laser Power \<field\> Data Fields | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 22 | Load Data \<field\> Data Fields | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 23 | Load Data \<tag\> Data Tags | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 24 | Log History \<field\> Data Fields | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 25 | Machine OEE \<field\> Data Fields | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 26 | Tool Offset Data \<field\> Data Fields | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 27 | Tool Offset Data \<tag\> Data Tags | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 28 | Tool Offset Data Tag Combinations | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 29 | PLC Data \<field\> Data Fields | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 30 | PLC Data \<tag\> Data Tags | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 31 | Coordinate Data \<field\> Data Fields | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 32 | Coordinate Data \<tag\> Data Tags | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 33 | Program Block \<field\> Data Fields | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 34 | Program Block \<tag\> Data Tags | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 35 | Current Program \<field\> Data Fields | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 36 | Current Program \<tag\> Data Tags | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 37 | Spindle Overload \<field\> Data Fields | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 38 | Spindle Overload \<tag\> Data Tags | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 39 | Machine Time Data \<field\> Data Fields | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 40 | Time Data Supported by Each CNC Model | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 41 | Tool Life Data \<field\> Data Fields | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 42 | Tool Life Data \<tag\> Data Tags | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 43 | Tool Life Data Tag Combinations | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 44 | Tool Life Types | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 45 | Running Status | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 46 | Alarm Status | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 47 | Emergency Stop Status | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 48 | Dry Run Status | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 49 | Alarm Level | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 50 | Gateway Service Running Status | [01_Important_Notes.md](01_Important_Notes.md) |
| Table 51 | Common Error Codes | [02_HTTP_Basics.md](02_HTTP_Basics.md) |
| Table 52 | PLC Data Common Areas and Parameters | [03_HTTP_Data_Read_Write.md](03_HTTP_Data_Read_Write.md) |
| Table 53 | PLC Data Special Areas and Parameters | [03_HTTP_Data_Read_Write.md](03_HTTP_Data_Read_Write.md) |
| Table 54 | PLC Address Numeral System Prefixes | [03_HTTP_Data_Read_Write.md](03_HTTP_Data_Read_Write.md) |
| Table 55 | PLC Data Types | [03_HTTP_Data_Read_Write.md](03_HTTP_Data_Read_Write.md) |
| Table 56 | Default Root Directory Paths by CNC Model | [04_HTTP_File_Management.md](04_HTTP_File_Management.md) |
| Table 57 | Support for Sub-folder Listing in readProgramList by CNC Model | [04_HTTP_File_Management.md](04_HTTP_File_Management.md) |
| Table 58 | CNC Model Support for Create/Delete Machine Directory | [04_HTTP_File_Management.md](04_HTTP_File_Management.md) |
| Table 59 | API Command Format | [07_HTTP_Gateway_Config.md](07_HTTP_Gateway_Config.md) |
| Table 60 | Machine Configuration Parameters | [07_HTTP_Gateway_Config.md](07_HTTP_Gateway_Config.md) |
| Table 61 | machineType Corresponding Machine Types | [07_HTTP_Gateway_Config.md](07_HTTP_Gateway_Config.md) |
| Table 62 | Machine Group Configuration Parameters | [07_HTTP_Gateway_Config.md](07_HTTP_Gateway_Config.md) |
| Table 63 | machines — Machine List Information | [07_HTTP_Gateway_Config.md](07_HTTP_Gateway_Config.md) |
| Table 64 | Machine Task Interval Configuration Parameters | [07_HTTP_Gateway_Config.md](07_HTTP_Gateway_Config.md) |
| Table 65 | Machine Group Task Interval Configuration Parameters | [07_HTTP_Gateway_Config.md](07_HTTP_Gateway_Config.md) |
| Table 66 | OEE Monitoring Configuration Parameters | [07_HTTP_Gateway_Config.md](07_HTTP_Gateway_Config.md) |
| Table 67 | monitorMode — Monitoring Mode | [07_HTTP_Gateway_Config.md](07_HTTP_Gateway_Config.md) |
| Table 68 | availabilityMode — Availability Calculation Method | [07_HTTP_Gateway_Config.md](07_HTTP_Gateway_Config.md) |
| Table 69 | Tool Life Monitoring Configuration Parameters | [07_HTTP_Gateway_Config.md](07_HTTP_Gateway_Config.md) |
| Table 70 | Machining Count Monitoring Configuration Parameters | [07_HTTP_Gateway_Config.md](07_HTTP_Gateway_Config.md) |
| Table 71 | Overload Monitoring Configuration Parameters | [07_HTTP_Gateway_Config.md](07_HTTP_Gateway_Config.md) |
| Table 72 | Alarm Monitoring Configuration Parameters | [07_HTTP_Gateway_Config.md](07_HTTP_Gateway_Config.md) |
| Table 73 | minimumAlarmLevel — Minimum Alarm Level | [07_HTTP_Gateway_Config.md](07_HTTP_Gateway_Config.md) |
| Table 74 | Machine Status Monitoring Configuration Parameters | [07_HTTP_Gateway_Config.md](07_HTTP_Gateway_Config.md) |
| Table 75 | Cloud Platform Configuration Parameters | [07_HTTP_Gateway_Config.md](07_HTTP_Gateway_Config.md) |
| Table 76 | MODBUS Configuration Parameters | [07_HTTP_Gateway_Config.md](07_HTTP_Gateway_Config.md) |
| Table 77 | MQTT Configuration Parameters | [07_HTTP_Gateway_Config.md](07_HTTP_Gateway_Config.md) |
| Table 78 | MQTT mode — Mode | [07_HTTP_Gateway_Config.md](07_HTTP_Gateway_Config.md) |
| Table 79 | Database Configuration Parameters | [07_HTTP_Gateway_Config.md](07_HTTP_Gateway_Config.md) |
| Table 80 | Database Types | [07_HTTP_Gateway_Config.md](07_HTTP_Gateway_Config.md) |
| Table 81 | Database Save Modes | [07_HTTP_Gateway_Config.md](07_HTTP_Gateway_Config.md) |
| Table 82 | Gateway File Server Configuration Parameters | [07_HTTP_Gateway_Config.md](07_HTTP_Gateway_Config.md) |
| Table 83 | HTTP Configuration Parameters | [07_HTTP_Gateway_Config.md](07_HTTP_Gateway_Config.md) |
| Table 84 | Hub Configuration Parameters | [07_HTTP_Gateway_Config.md](07_HTTP_Gateway_Config.md) |
| Table 85 | Remote Access Configuration Parameters | [07_HTTP_Gateway_Config.md](07_HTTP_Gateway_Config.md) |

---


# Chapter I — Important Notes

## 1.1 Identifier Description

### 1.1.1 machineID — Machine Identifier

The machine identifier is used to specify the target machine when performing HTTP or MQTT communication.

By default, `machineID` is derived from the machine IP address: the third and fourth octets of the IP address are concatenated to form the machineID, with leading zeros removed. If the third octet is non-zero, the fourth octet is zero-padded to three digits.

**Examples:**

| Machine IP | machineID |
|------------|-----------|
| 192.168.0.1 | 1 |
| 192.168.0.100 | 100 |
| 192.168.0.255 | 255 |
| 192.168.1.0 | 1000 |
| 192.168.1.12 | 1012 |
| 192.168.1.100 | 1100 |
| 192.168.1.255 | 1255 |
| 192.168.10.1 | 10001 |
| 192.168.10.255 | 10255 |
| 192.168.255.255 | 255255 |

The machineID can be modified. See the *User Manual*, section 5.2.2 Machine Configuration — Add/Edit Device, for details.

---

### 1.1.2 groupID — Machine Group Identifier

The machine group identifier is used to specify the target machine group when performing HTTP or MQTT communication.

The gateway supports up to 16 machine groups. By default, `groupID` is `"g"` followed by the group number, e.g., `"g1"`, `"g2"` … `"g16"`.

The groupID can be modified. See the *User Manual*, section 5.2.4 Machine Configuration — Machine Group Management, for details.

---

### 1.1.3 slaveID — Slave Station Identifier

The slave station identifier is used to specify the target slave station when performing MODBUS communication.

By default, `slaveID` is the last octet of the machine IP address, in the range 1–255.

The slaveID can be modified. See the *User Manual*, section 5.2.2 Machine Configuration — Add/Edit Device, for details.

---

### 1.1.4 ID — Database Identifier

The database identifier is an identifier automatically generated by the gateway. It cannot be modified by the user.

---

## 1.2 Data Class Description

The following table lists all data classes supported by this gateway.

**Table 1 — Data Class List**

| Data Class | Description |
|-----------|-------------|
| AlarmHistory | Alarm history |
| AlarmLog | Alarm log |
| AxialOverload | Servo overload history |
| CNCStatus | Machine running status |
| Count | Machining count |
| CurrentToolNumber | Current tool number |
| Cycle | Cycle time data |
| EnergyConsum | Energy consumption data |
| Feed | Feed data |
| FeedAndSpindle | Feed and spindle data |
| GroupCount | Machine group machining count |
| GroupCumulativeTime | Machine group cumulative status time |
| GroupOEE | Machine group OEE |
| LaserPower | Laser power |
| Load | Load data |
| LogHistory | Log history |
| OEE | Machine OEE |
| Offset | Tool offset data |
| PLC | PLC data |
| Position | Axis position data |
| ProgramBlock | Current program block |
| ProgramInfo | Program information |
| SpindleOverload | Spindle overload history |
| TimeData | Time data |
| ToolLife | Tool life data |

---

### 1.2.1 AlarmHistory — Alarm History

**Table 2 — AlarmHistory Fields**

| Field | Type | Description |
|-------|------|-------------|
| alarmActive | Bool | Current alarm active status (True = active alarm; False = no alarm) |
| alarmLevel | String | Current alarm level |
| alarmMsg | String | Current alarm message |
| cumulativeAlarmCount | Int32 | Cumulative alarm count since gateway last restarted |

---

### 1.2.2 AlarmLog — Alarm Log

**Table 3 — AlarmLog Fields**

| Field | Type | Description |
|-------|------|-------------|
| alarmLevel | Array\<String\> | Alarm level for each alarm in the current alarm list |
| alarmMsg | Array\<String\> | Alarm message for each alarm in the current alarm list |
| alarmTime | Array\<String\> | Alarm time for each alarm in the current alarm list (UTC) |
| cumulativeAlarmTime | Int32 | Cumulative alarm duration since gateway last restarted [milliseconds] |

---

### 1.2.3 AxialOverload — Servo Overload History

**Table 4 — AxialOverload Fields**

| Field | Type | Description |
|-------|------|-------------|
| cumulativeTime | Int64 | Cumulative servo overload duration for this axis [milliseconds] |

**Table 5 — AxialOverload Tags**

| Tag | Key | Description |
|-----|-----|-------------|
| axisNo | A | Axis number (starts from 1) |

---

### 1.2.4 CNCStatus — Machine Running Status

**Table 6 — CNCStatus Fields**

| Field | Type | Description |
|-------|------|-------------|
| alarmStatus | String | Alarm status |
| alarmLevel | String | Alarm level |
| cncStatus | String | Running status |
| adjustedStatus | String | Adjusted running status (used for OEE calculation) |
| mode | String | Operating mode |
| programStatus | String | Program status |
| emergencyStatus | String | Emergency stop status |
| dryRunStatus | String | Dry run status |
| OffTime | Int32 | Off or offline duration since gateway last restarted [seconds] |
| WaitTime | Int32 | Wait duration since gateway last restarted [seconds] |
| EmergencyTime | Int32 | Emergency stop duration since gateway last restarted [seconds] |
| AutoRunTime | Int32 | Auto run duration since gateway last restarted [seconds] |
| ManualTime | Int32 | Setup duration since gateway last restarted [seconds] |

> Note: `mode`, `programStatus`, `emergencyStatus`, and `dryRunStatus` are only supported for specific CNC types. For detailed support information, see section 1.2.23 TimeData.

**Table 7 — CNCStatus Tags**

| Tag | Key | Description |
|-----|-----|-------------|
| channel | C | Channel number (starts from 1) |

---

### 1.2.5 Count — Machining Count

**Table 8 — Count Fields**

| Field | Type | Description |
|-------|------|-------------|
| count | Int32 | Current machining count (value reset to 0 on counter reset) |
| cumulativeCount | Int32 | Cumulative machining count since gateway last restarted |
| currentCount | Int32 | Current machining count (value preserved on counter reset; same as `cumulativeCount` for systems that do not support counter reset) |

---

### 1.2.6 CurrentToolNumber — Current Tool Number

**Table 9 — CurrentToolNumber Fields**

| Field | Type | Description |
|-------|------|-------------|
| toolNumber | Int32 | Current tool number |
| toolOffsetNum | Int32 | Current tool offset number |

**Table 10 — CurrentToolNumber Tags**

| Tag | Key | Description |
|-----|-----|-------------|
| channel | C | Channel number (starts from 1) |

---

### 1.2.7 Cycle — Cycle Time Data

**Table 11 — Cycle Fields**

| Field | Type | Description |
|-------|------|-------------|
| lastCycleTime | Int32 | Previous cycle duration [seconds] |
| lastTotalTime | Int32 | Previous cycle total elapsed time [seconds] |
| mainPrgmName | String | Main program name for this cycle |
| deltaCount | Int32 | Machining count increment for this cycle |

---

### 1.2.8 EnergyConsum — Energy Consumption Data

The energy consumption data class is only supported for Brother machines.

**Table 12 — EnergyConsum Fields**

| Field | Type | Description |
|-------|------|-------------|
| allServoAxes | Float | Total energy for all servo axes [Wh] |
| coolantPump | Float | Coolant pump energy [Wh] |
| ctsPump | Float | CTS (through-spindle coolant) pump energy [Wh] |
| chipFlusherPump | Float | Chip flusher pump energy [Wh] |
| cyclonePump | Float | Cyclone pump energy [Wh] |
| system24V | Float | 24 V system energy [Wh] |
| ncControl | Float | NC control energy [Wh] |
| lcdBacklight | Float | LCD backlight energy [Wh] |
| chipConveyor | Float | Chip conveyor energy [Wh] |
| screwConveyor | Float | Screw conveyor energy [Wh] |
| autoLubrication | Float | Auto lubrication energy [Wh] |
| spindleCoolingFan | Float | Spindle cooling fan energy [Wh] |
| servoControl | Float | Servo control energy [Wh] |

---

### 1.2.9 Feed — Feed Data

**Table 13 — Feed Fields**

| Field | Type | Description |
|-------|------|-------------|
| actFeed | Float | Actual feed rate [mm/min] |
| overFeed | Int32 | Feed override [%] |
| overRapid | Int32 | Rapid traverse override [%] |

**Table 14 — Feed Tags**

| Tag | Key | Description |
|-----|-----|-------------|
| channel | C | Channel number (starts from 1) |

---

### 1.2.10 FeedAndSpindle — Feed and Spindle Data

**Table 15 — FeedAndSpindle Fields**

| Field | Type | Description |
|-------|------|-------------|
| actFeed | Float | Actual feed rate [mm/min] |
| actSpindle | Int32 | Actual spindle speed [rpm] |
| overFeed | Int32 | Feed override [%] |
| overRapid | Int32 | Rapid traverse override [%] |
| overSpindle | Int32 | Spindle speed override [%] |

**Table 16 — FeedAndSpindle Tags**

| Tag | Key | Description |
|-----|-----|-------------|
| channel | C | Channel number (starts from 1) |

---

### 1.2.11 GroupCount — Machine Group Machining Count

**Table 17 — GroupCount Fields**

| Field | Type | Description |
|-------|------|-------------|
| cumulativeCount | Int32 | Machine group cumulative machining count since gateway last restarted |

---

### 1.2.12 GroupCumulativeTime — Machine Group Cumulative Status Time

**Table 18 — GroupCumulativeTime Fields**

| Field | Type | Description |
|-------|------|-------------|
| OffTime | Int32 | Off or offline duration since gateway last restarted [seconds] |
| WaitTime | Int32 | Wait duration since gateway last restarted [seconds] |
| EmergencyTime | Int32 | Emergency stop duration since gateway last restarted [seconds] |
| AutoRunTime | Int32 | Auto run duration since gateway last restarted [seconds] |
| ManualTime | Int32 | Setup duration since gateway last restarted [seconds] |

---

### 1.2.13 GroupOEE — Machine Group OEE Data

**Table 19 — GroupOEE Fields**

| Field | Type | Description |
|-------|------|-------------|
| autoRunCount | Int32 | Number of auto run status transitions since gateway last restarted |
| autoRunTime | Int32 | Machine group auto run duration since gateway last restarted [seconds] |
| availability | Float | Machine group OEE availability since gateway last restarted [%] |
| emergencyCount | Int32 | Number of emergency stop status transitions since gateway last restarted |
| emergencyTime | Int32 | Machine group emergency stop duration since gateway last restarted [seconds] |
| manualCount | Int32 | Number of setup (manual) status transitions since gateway last restarted |
| manualTime | Int32 | Machine group setup duration since gateway last restarted [seconds] |
| offCount | Int32 | Number of off/offline status transitions since gateway last restarted |
| offTime | Int32 | Machine group off/offline duration since gateway last restarted [seconds] |
| waitCount | Int32 | Number of wait status transitions since gateway last restarted |
| waitTime | Int32 | Machine group wait duration since gateway last restarted [seconds] |

---

### 1.2.14 LaserPower — Laser Power

**Table 20 — LaserPower Fields**

| Field | Type | Description |
|-------|------|-------------|
| preset | Float | Preset laser power [W] |
| actual | Float | Actual laser power [W] |

---

### 1.2.15 Load — Load Data

**Table 21 — Load Fields**

| Field | Type | Description |
|-------|------|-------------|
| axialLoad | Array\<Float\> | Load value for each servo axis [%] |
| spindleLoad | Array\<Float\> | Load value for each spindle [%] |

**Table 22 — Load Tags**

| Tag | Key | Description |
|-----|-----|-------------|
| channel | C | Channel number (starts from 1) |

---

### 1.2.16 LogHistory — Log History

**Table 23 — LogHistory Fields**

| Field | Type | Description |
|-------|------|-------------|
| msg | String | Latest log message |

---

### 1.2.17 OEE — Machine OEE Data

**Table 24 — OEE Fields**

| Field | Type | Description |
|-------|------|-------------|
| autoRunTime | Int32 | Auto run duration since gateway last restarted [seconds] |
| availability | Float | OEE availability since gateway last restarted [%] |
| emergencyTime | Int32 | Emergency stop duration since gateway last restarted [seconds] |
| manualTime | Int32 | Setup duration since gateway last restarted [seconds] |
| offTime | Int32 | Off or offline duration since gateway last restarted [seconds] |
| waitTime | Int32 | Wait duration since gateway last restarted [seconds] |

---

### 1.2.18 Offset — Tool Offset Data

**Table 25 — Offset Fields**

| Field | Type | Description |
|-------|------|-------------|
| toolName | String | Tool name |
| toolType | String | Tool type |
| lengthUnit | String | Length unit: `"mm"` or `"inch"` |
| toolNose | Int32 | Tool nose direction (0–9) |
| lengthWear | Float | Length wear offset |
| radiusWear | Float | Radius wear offset |
| lengthGeom | Float | Length geometry offset |
| radiusGeom | Float | Radius geometry offset |
| wearX | Float | Wear offset X component |
| wearY | Float | Wear offset Y component |
| wearZ | Float | Wear offset Z component |
| wearR | Float | Wear offset R component |
| geomX | Float | Geometry offset X component |
| geomY | Float | Geometry offset Y component |
| geomZ | Float | Geometry offset Z component |
| geomR | Float | Geometry offset R component |

**Table 26 — Offset Tags**

| Tag | Key | Description |
|-----|-----|-------------|
| toolNum | T | Tool number |
| offsetNum | O | Offset number |
| channel | C | Channel number (starts from 1) |

**Table 27 — Offset Tag Combinations by CNC Type**

| CNC Type | toolNum (T) | offsetNum (O) | channel (C) |
|----------|-------------|---------------|-------------|
| Fanuc | ✓ | ✓ | — |
| Fanuc (multi-channel) | ✓ | ✓ | ✓ |
| Siemens | ✓ | ✓ | — |
| Mitsubishi | ✓ | ✓ | — |
| Haas | ✓ | ✓ | — |
| Mazak | ✓ | ✓ | — |
| Brother | ✓ | — | — |
| Heidenhain | ✓ | ✓ | — |
| Okuma | ✓ | ✓ | — |
| Delta | ✓ | — | — |

---

### 1.2.19 PLC — PLC Data

**Table 28 — PLC Fields**

| Field | Type | Description |
|-------|------|-------------|
| data | Bytes | Raw byte data |
| msg | String | String data |
| pArray | Array\<Int64\> | Array integer data |
| pInt64 | Int64 | 64-bit integer data |
| pDouble | Float | Floating-point data |
| pString | String | String data (same as `msg`) |
| pBool | Bool | Boolean data |

**Table 29 — PLC Tags**

| Tag | Key | Description |
|-----|-----|-------------|
| channel | C | Channel number (starts from 1) |
| tag | T | Tag number |

The tag number T is composed of the parameter group number and index within the group. Refer to the gateway *User Manual*, section 5.5 Custom PLC Collection, for the parameter configuration details. The tag number T is calculated as follows:

$$T = (\text{group number} - 1) \times 1000 + \text{index within group}$$

For example, if parameter group 2 index 3 is collected, then:

$$T = (2 - 1) \times 1000 + 3 = 1003$$

---

### 1.2.20 Position — Axis Position Data

**Table 30 — Position Fields**

| Field | Type | Description |
|-------|------|-------------|
| axisName | Array\<String\> | Axis name for each axis |
| abs | Array\<Float\> | Absolute position for each axis |
| dist | Array\<Float\> | Distance to go for each axis |
| mach | Array\<Float\> | Machine position for each axis |
| rel | Array\<Float\> | Relative position for each axis |
| unit | Array\<String\> | Position unit for each axis: `"mm"` or `"inch"` |

**Table 31 — Position Tags**

| Tag | Key | Description |
|-----|-----|-------------|
| channel | C | Channel number (starts from 1) |

---

### 1.2.21 ProgramBlock — Current Program Block

**Table 32 — ProgramBlock Fields**

| Field | Type | Description |
|-------|------|-------------|
| currentBlock | String | Current executing program block |

**Table 33 — ProgramBlock Tags**

| Tag | Key | Description |
|-----|-----|-------------|
| channel | C | Channel number (starts from 1) |

---

### 1.2.22 ProgramInfo — Program Information

**Table 34 — ProgramInfo Fields**

| Field | Type | Description |
|-------|------|-------------|
| mainPrgmName | String | Main program name |
| programSeqNum | Int32 | Program sequence number |
| runningPrgName | String | Currently executing program name |
| programStack | Array\<String\> | Program call stack (main program to currently executing sub-program) |

**Table 35 — ProgramInfo Tags**

| Tag | Key | Description |
|-----|-----|-------------|
| channel | C | Channel number (starts from 1) |

---

### 1.2.23 TimeData — Time Data

**Table 36 — TimeData Fields**

| Field | Type | Description |
|-------|------|-------------|
| cumulativePowerOnTimeMin | Int64 | Cumulative power-on time [minutes] (resets to 0 when the counter overflows) |
| cumulativePowerOnTimeMs | Int64 | Cumulative power-on time [milliseconds] (resets to 0 when the counter overflows) |
| powerOnTimeMin | Int64 | Power-on time since last power-on [minutes] |
| powerOnTimeMs | Int64 | Power-on time since last power-on [milliseconds] |
| cumulativeOperatingTimeMin | Int64 | Cumulative operating time (program running) [minutes] (resets to 0 when the counter overflows) |
| cumulativeOperatingTimeMs | Int64 | Cumulative operating time [milliseconds] (resets to 0 when the counter overflows) |
| operatingTimeMin | Int64 | Operating time since last power-on [minutes] |
| operatingTimeMs | Int64 | Operating time since last power-on [milliseconds] |
| cumulativeCuttingTimeMin | Int64 | Cumulative cutting time [minutes] (resets to 0 when the counter overflows) |
| cumulativeCuttingTimeMs | Int64 | Cumulative cutting time [milliseconds] (resets to 0 when the counter overflows) |
| cuttingTimeMin | Int64 | Cutting time since last power-on [minutes] |
| cuttingTimeMs | Int64 | Cutting time since last power-on [milliseconds] |
| lastCycleTimeMin | Int64 | Previous cycle time [minutes] |
| lastCycleTimeMs | Int64 | Previous cycle time [milliseconds] |
| currentCycleTimeMin | Int64 | Current cycle elapsed time [minutes] |
| currentCycleTimeMs | Int64 | Current cycle elapsed time [milliseconds] |
| currentCuttingTimeMin | Int64 | Current cutting time (within current cycle) [minutes] |
| currentCuttingTimeMs | Int64 | Current cutting time (within current cycle) [milliseconds] |

**Table 37 — TimeData CNC Type Support**

| CNC Type | cumPowerOn | powerOn | cumOperating | operating | cumCutting | cutting | lastCycle | currentCycle | currentCutting |
|----------|-----------|---------|--------------|-----------|------------|---------|-----------|--------------|----------------|
| Fanuc 0i-D/F | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✗ |
| Fanuc 16i/18i/21i | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✗ |
| Fanuc 30i/31i/32i | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✗ |
| Fanuc 35i | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✗ |
| Siemens 828D | ✗ | ✓ | ✗ | ✓ | ✗ | ✓ | ✓ | ✓ | ✓ |
| Siemens 840D sl | ✗ | ✓ | ✗ | ✓ | ✗ | ✓ | ✓ | ✓ | ✓ |
| Mitsubishi M70/M80 | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✗ |
| Mitsubishi M700/M800 | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✗ |
| Haas | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✗ |
| Mazak Mazatrol | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✗ |
| Brother TC-S2/R2 | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✗ |
| Brother Speedio | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✗ |
| Heidenhain TNC | ✗ | ✓ | ✗ | ✓ | ✗ | ✓ | ✓ | ✓ | ✓ |
| Okuma OSP-P300 | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✗ |
| Delta | ✗ | ✗ | ✗ | ✗ | ✗ | ✗ | ✗ | ✗ | ✗ |
| GSK | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✗ |

---

### 1.2.24 SpindleOverload — Spindle Overload History

**Table 38 — SpindleOverload Fields**

| Field | Type | Description |
|-------|------|-------------|
| cumulativeTime | Int64 | Cumulative spindle overload duration for this spindle [milliseconds] |

**Table 39 — SpindleOverload Tags**

| Tag | Key | Description |
|-----|-----|-------------|
| spindleNo | S | Spindle number (starts from 1) |
| channel | C | Channel number (starts from 1) |

---

### 1.2.25 ToolLife — Tool Life Data

**Table 40 — ToolLife Fields**

| Field | Type | Description |
|-------|------|-------------|
| timeLimit | Int32 | Tool life time limit [minutes] |
| currentTime | Int32 | Elapsed tool life time [minutes] |
| prewarningTime | Int32 | Tool life pre-warning time threshold [minutes] |
| countLimit | Int32 | Tool life count limit |
| currentCount | Int32 | Elapsed tool life count |
| prewarningCount | Int32 | Tool life pre-warning count threshold |
| wearLimit | Float | Tool life wear limit |
| currentWear | Float | Current tool life wear value |
| prewarningWear | Float | Tool life pre-warning wear threshold |
| rawToolLifeType | Int32 | Raw tool life type code (CNC-specific value) |
| rawToolLifeUnit | Int32 | Raw tool life unit code (CNC-specific value) |
| rawToolLifeStatus | Int32 | Raw tool life status code (CNC-specific value) |
| rawTimeLimit | Int32 | Raw tool life time limit (CNC-specific value) |
| rawCurrentTime | Int32 | Raw elapsed tool life time (CNC-specific value) |
| rawPrewarningTime | Int32 | Raw pre-warning time (CNC-specific value) |
| rawCountLimit | Int32 | Raw tool life count limit (CNC-specific value) |
| rawCurrentCount | Int32 | Raw elapsed count (CNC-specific value) |
| rawPrewarningCount | Int32 | Raw pre-warning count (CNC-specific value) |
| rawWearLimit | Float | Raw tool life wear limit (CNC-specific value) |
| rawCurrentWear | Float | Raw current wear (CNC-specific value) |
| rawPrewarningWear | Float | Raw pre-warning wear (CNC-specific value) |

**Table 41 — ToolLife Tags**

| Tag | Key | Description |
|-----|-----|-------------|
| toolGroupNum | G | Tool group number |
| toolNum | T | Tool number |
| toolOffsetNum | O | Tool offset number |
| toolIndex | I | Tool index |

**Table 42 — ToolLife Tag Combinations by CNC Type**

| CNC Type | toolGroupNum (G) | toolNum (T) | toolOffsetNum (O) | toolIndex (I) |
|----------|-----------------|-------------|-------------------|---------------|
| Fanuc | ✓ | ✓ | ✓ | ✓ |
| Siemens | ✓ | ✓ | ✓ | — |
| Mitsubishi | ✓ | ✓ | — | — |
| Haas | ✓ | ✓ | ✓ | — |
| Mazak | ✓ | ✓ | ✓ | — |
| Brother | ✓ | ✓ | — | — |
| Okuma | ✓ | ✓ | ✓ | — |

**Table 43 — ToolLife Life Type Support by CNC Type**

| CNC Type | Time | Count | Wear |
|----------|------|-------|------|
| Fanuc | ✓ | ✓ | — |
| Siemens | ✓ | ✓ | ✓ |
| Mitsubishi | ✓ | ✓ | — |
| Haas | ✓ | ✓ | — |
| Mazak | ✓ | ✓ | — |
| Brother | ✓ | ✓ | — |
| Okuma | ✓ | ✓ | ✓ |

---

## 1.3 Variable Description

### 1.3.1 CNC Running Status

**Table 44 — CNC Running Status Values**

| Status Value | Status Code | Description |
|-------------|-------------|-------------|
| 0 | OFF | Off or offline |
| 1 | EMERGENCY | Emergency stop |
| 2 | WAIT | Machine on, program not running |
| 10 | AUTO_RUN | Auto running |
| 20 | MANUAL | Setup (manual) |
| 21 | JOG | Jog |
| 22 | INC_FEED | Incremental feed |
| 23 | REF_RETURN | Reference return |
| 24 | HANDLE | Handle / handwheel |
| 25 | TEACH_IN_JOG | Teach-in jog |
| 26 | TEACH_IN_HANDLE | Teach-in handle |
| 27 | MDI | MDI (Manual Data Input) |
| 28 | DNC | DNC (Direct Numerical Control) |
| 29 | EDIT | Edit mode |
| 30 | MAINTENANCE | Maintenance mode |
| 31 | CALL_MACRO | Macro call |
| 32 | REFERENCE_SELECT | Reference selection |
| 33 | SLEEP | Sleep mode |

---

### 1.3.2 Alarm Status

**Table 45 — Alarm Status Values**

| Status Value | Description |
|-------------|-------------|
| ALARM | Machine has an active alarm |
| NO_ALARM | Machine has no active alarm |

---

### 1.3.3 Emergency Stop Status

**Table 46 — Emergency Stop Status Values**

| Status Value | Description |
|-------------|-------------|
| EMG | Machine is in emergency stop |
| NOT_EMG | Machine is not in emergency stop |

---

### 1.3.4 Dry Run Status

**Table 47 — Dry Run Status Values**

| Status Value | Description |
|-------------|-------------|
| DRY_RUN | Machine dry run is enabled |
| NOT_DRY_RUN | Machine dry run is disabled |

---

### 1.3.5 Alarm Level

**Table 48 — Alarm Level Values**

| Level | Priority | Description |
|-------|----------|-------------|
| ERR | Highest | Error |
| WRN | Medium | Warning |
| INF | Lowest | Information |

---

### 1.3.6 Service Running Status

**Table 49 — Service Running Status Values**

| Status Value | Description |
|-------------|-------------|
| 0 | Disabled |
| 1 | Initiated |
| 2 | Ready |
| 3 | Running |
| 4 | Delayed |
| 5 | Error |

**Table 50 — Service Running Status Details**

| Status | Description |
|--------|-------------|
| Disabled | This service is not enabled. |
| Initiated | This service is starting up. |
| Ready | This service is in a ready state but not yet activated. For example, the MQTT module is ready but the broker has not yet connected. |
| Running | This service is running normally. |
| Delayed | This service has encountered an error and is in a retry delay state, waiting to attempt reconnection. |
| Error | This service has encountered an error and has stopped. Manual intervention is required. |

---

# II. HTTP Communication

## 2.1 Basic Description

The service runs on the standard HTTP port (port 80). Unless otherwise noted, the base URL for all requests is `/api/cnc`.

A standard request URL format is as follows:

```
http://{GatewayIP}/api/cnc/{interface}?MachineID={target machineID}
```

For example, if the gateway IP address is 192.168.100.1, and you want to retrieve the running status of the main channel of a machine with IP 192.168.1.10 and MachineID 1010 (see section 1.1.1 machineID — Machine Identifier for an explanation of machineID), use the `/readCNCStatus` interface. The corresponding request URL is:

```
http://192.168.100.1/api/cnc/readCNCStatus?MachineID=1010
```

- All interfaces only accept HTTP data with `Content-Type: application/json`.
- Except for some file-related interfaces, most interfaces return `application/json` type HTTP data.
- All data encoding must be UTF-8.
- Some interfaces described below require additional input parameters appended to the request URL.

---

## 2.2 Error Handling

When any request encounters an error, an error object is returned as follows:

```json
{
  "errorCode": -1,
  "errorMsg": "Unknown error"
}
```

| Return Parameter | Type | Description |
|-----------------|------|-------------|
| errorCode | Int32 | (Required) Error code; 0 indicates success |
| errorMsg | String | (Required) Error message |

When the operation succeeds, the corresponding data is returned with HTTP status code 200.

When an error occurs, an error code is returned with an HTTP status code of typically 400, 409, 500, etc. Common error codes are as follows:

**Table 51 Common Error Codes**

| Error Code | Content | Description |
|-----------|---------|-------------|
| 0 | Success | Operation executed successfully |
| 3 | Machine off or offline | Cannot communicate with the machine; machine is powered off or there is a hardware network failure (machine NIC, switch, cable, etc.) |
| 7 | No permission | Interface is protected or outside the authorization scope, or the authentication credentials are invalid |
| 102 | Machine network fault, unable to retrieve data | Communication with the machine is possible but data cannot be retrieved; the machine's network settings have an issue |
| 125 | Invalid file path | The specified file path is invalid |
| 142 | File already exists | A file with the same name already exists in the target directory |
| 143 | File in use | The file to be operated on is currently in use |
| 144 | File write-protected | The file to be operated on is write-protected |
| 158 | File not found | The target file does not exist in the target directory |
| 10003 | machineID does not exist | Incorrect machineID; the machine is not activated, or the gateway service was not restarted after editing the machine IP or activation status |
| 10006 | Interface not authorized | Contact Bivrost to obtain authorization for this interface |

---

## 2.3 Authentication Methods

When security control is enabled in the gateway settings, users must provide authentication credentials to use authorized APIs. If security control is disabled, authentication can be skipped and all interfaces can be used directly.

The gateway supports two authentication methods: JWT method and Secret Key method.

### 2.3.1 JWT Method

The user calls the authentication interface `/api/auth/login` to log in with a username and password, and receives a JWT token for the corresponding user. The token is valid for 24 hours; after expiration, the user must log in again to obtain a new token. Include `Authorization: Bearer <token>` in the request header to use the authorized APIs under that user's permission level. If the logged-in user has administrator privileges, all interfaces except protected APIs can be used.

### 2.3.2 Secret Key Method

Generate a secret key on the gateway Settings → Manage Users → User Security Settings page. The key is permanently valid. Include `Authorization: Bearer <secret key>` in the request header to use the authorized APIs under that user's permission level. If the logged-in user has administrator privileges, all interfaces except protected APIs can be used.

---

## 2.4 Authentication Interface

Authentication interface base URL: `/api/auth/`.

### 2.4.1 login

```
POST  /api/auth/login
```

Request body example (application/json):

```json
{
  "username": "username",
  "password": "password"
}
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| username | String | (Required) Username |
| password | String | (Required) Password |

**Response Example**

```json
{
  "token": "a2JhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9eyJ1bmlxdWV.bmFtZSI6ImFkbWluIiwibmJmIjoxNjIwMTYzOTUwLCJleHAiOjE2MjAxNzExNTAsImlhdCI6MTYyMDE2Mzk1MH0..."
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| token | String | (Required) User token. Valid for 24 hours; log in again after expiration to obtain a new token |

### 2.4.2 change-password

This interface is only available when using the JWT authentication method.

```
POST  /api/auth/change-password
```

Request body example (application/json):

```json
{
  "currentPassword": "currentPassword",
  "newPassword": "newPassword"
}
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| currentPassword | String | (Required) Current password |
| newPassword | String | (Required) New password |

**Response Example**

```json
{
  "errorCode": 0,
  "errorMsg": "Success"
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| errorCode | Int32 | (Required) Error code; 0 indicates success |
| errorMsg | String | (Required) Error message |

---

# Chapter II — HTTP Communication (Continued)

## 2.5 Data Read/Write Interfaces

The data read/write interfaces allow reading machine data or machine group data through the gateway, and writing data to machines. These interfaces are divided into two categories: **Direct Read/Write** and **Cached Read**.

---

### 2.5.1 Direct Read/Write

When using direct read/write interfaces, the gateway immediately communicates with the target machine to read or write data.

---

### 2.5.1.1 readAlarm — Read Alarm Information

```
GET  /api/cnc/readAlarm?machineID=MACHINEID
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |

**Response Example**

```json
{
  "alarmMsg": [
    "Alarm 1",
    "Alarm 2"
  ],
  "alarmLevel": [
    "WRN",
    "WRN"
  ]
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| alarmMsg | String[] | (Required) Current alarm messages on the machine. Returns an empty array if no alarms are active. |
| alarmLevel | String[] | (Required) Alarm levels, in the same order as `alarmMsg`. Returns an empty array if no alarms. See Table 48 — Alarm Level. |

> Note: Starting from v1.8.1, alarm timestamps have been removed. To obtain alarm start times, use section 2.7.1.2 alarm — Machine Alarm Data Analysis.

---

### 2.5.1.2 readCNCStatus — Read Machine Status

```
GET  /api/cnc/readCNCStatus?machineID=MACHINEID&channel=CHANNEL
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| channel | Int32 | Channel number. If not specified, defaults to `0` (main channel). |

**Response Example**

```json
{
  "cncStatus": "MANUAL_EDIT",
  "alarmStatus": "ALARM",
  "alarmLevel": "WRN",
  "channel": 2
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| cncStatus | String | (Required) Running status. See Table 44 — CNC Running Status. |
| alarmStatus | String | (Required) Alarm status. See Table 45 — Alarm Status. |
| alarmLevel | String | Alarm level. If there are multiple alarms, the highest level is returned. Not returned if no alarms. See Table 48 — Alarm Level. |
| channel | Int32 | Channel number. Only returned when `channel` is specified in the request and is not `0`. |

> Note: The adjusted running status `adjustedStatus`, cumulative off time `offTime`, cumulative wait time `waitTime`, cumulative emergency stop time `emergencyTime`, cumulative auto run time `autoRunTime`, and cumulative setup time `ManualTime` — computed by gateway post-processing — are not currently supported over HTTP. They can be obtained after enabling the auto-collection tasks, via sections 2.5.2.1 `readTaskData` or 2.5.2.2 `batchReadTaskData`, or via MODBUS, MQTT, or database interfaces.

---

### 2.5.1.3 readCNCStatusDetails — Read Machine Status Details

In addition to the same general machine status data as section 2.5.1.2 `readCNCStatus`, this interface also returns non-generic raw status data.

```
GET  /api/cnc/readCNCStatusDetails?machineID=MACHINEID&channel=CHANNEL
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| channel | Int32 | Channel number. If not specified, defaults to `0` (main channel). |

**Response Example**

```json
{
  "mode": "AUTO_RUN",
  "programStatus": "RUNNING",
  "emergencyStatus": "NOT_EMG",
  "dryRunStatus": "DRY_RUN",
  "cncStatus": "AUTO_RUN",
  "alarmStatus": "ALARM",
  "alarmLevel": "WRN",
  "channel": 2
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| mode | String | Operating mode |
| programStatus | String | Program status |
| emergencyStatus | String | Emergency stop status. See Table 46 — Emergency Stop Status. |
| dryRunStatus | String | Dry run status |
| cncStatus | String | (Required) Running status. See Table 44 — CNC Running Status. |
| alarmStatus | String | (Required) Alarm status. See Table 45 — Alarm Status. |
| alarmLevel | String | Alarm level. Highest level when multiple alarms exist. Not returned if no alarms. See Table 48 — Alarm Level. |
| channel | Int32 | Channel number. Only returned when `channel` is specified and not `0`. |

---

### 2.5.1.4 readCount — Read Machining Count

```
GET  /api/cnc/readCount?machineID=MACHINEID
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |

**Response Example**

```json
{
  "count": 1052
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| count | Int32 | (Required) Machining count retrieved from the CNC system |

> Note: The gateway-derived cumulative machining count `cumulativeCount` and the current monitoring period count `currentCount` are not currently supported over HTTP. They can be obtained after enabling auto-collection tasks, via sections 2.5.2.1 `readTaskData` or 2.5.2.2 `batchReadTaskData`, or via MODBUS, MQTT, or database interfaces.

---

### 2.5.1.5 readCurrentToolNumber — Read Current Tool Number

```
GET  /api/cnc/readCurrentToolNumber?machineID=MACHINEID&channel=CHANNEL
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| channel | Int32 | Channel number. If not specified, defaults to `0` (main channel). |

**Response Example**

```json
{
  "toolNumber": "6",
  "toolOffsetNum": "6",
  "channel": 2
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| toolNumber | String | (Required) Current tool number |
| toolOffsetNum | String | Current tool offset number |
| channel | Int32 | Channel number. Only returned when `channel` is specified and not `0`. |

---

### 2.5.1.6 readEnergyConsum — Read Energy Consumption Data

Currently supported for selected Brother machines and simulated machines.

```
GET  /api/cnc/readEnergyConsum?machineID=MACHINEID
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |

**Response Example**

```json
{
  "allServoAxes": 127144.0,
  "coolantPump": 41577.0,
  "ctsPump": 6507.0,
  "chipFlusherPump": 0.0,
  "cyclonePump": 0.0,
  "system24V": 46270.0,
  "ncControl": 10099.0,
  "lcdBacklight": 2884.0,
  "chipConveyor": 0.0,
  "screwConveyor": 0.0,
  "autoLubrication": 239.0,
  "spindleCoolingFan": 7212.0,
  "servoControl": 23806.0
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| allServoAxes | Double | Total energy consumption for all servo axes [Wh] |
| coolantPump | Double | Coolant pump energy consumption [Wh] |
| ctsPump | Double | CTS (through-spindle coolant) pump energy consumption [Wh] |
| chipFlusherPump | Double | Chip flusher pump energy consumption [Wh] |
| cyclonePump | Double | Cyclone filter pump energy consumption [Wh] |
| system24V | Double | 24 V system energy consumption [Wh] |
| ncControl | Double | NC control energy consumption [Wh] |
| lcdBacklight | Double | LCD backlight energy consumption [Wh] |
| chipConveyor | Double | Chip conveyor energy consumption [Wh] |
| screwConveyor | Double | Screw conveyor energy consumption [Wh] |
| autoLubrication | Double | Auto lubrication unit energy consumption [Wh] |
| spindleCoolingFan | Double | Spindle cooling fan energy consumption [Wh] |
| servoControl | Double | Servo control energy consumption [Wh] |

---

### 2.5.1.7 readFeed — Read Feed Data

Laser cutting / welding machines only.

```
GET  /api/cnc/readFeed?machineID=MACHINEID&channel=CHANNEL
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| channel | Int32 | Channel number. If not specified, defaults to `0` (main channel). |

**Response Example**

```json
{
  "overFeed": 100.0,
  "actFeed": 80.0,
  "overRapid": 100.0,
  "channel": 2
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| overFeed | Float | Feed override [%] |
| actFeed | Float | Actual feed rate |
| overRapid | Float | Rapid traverse override [%] |
| channel | Int32 | Channel number. Only returned when `channel` is specified and not `0`. |

---

### 2.5.1.8 readFeedAndSpindle — Read Feed and Spindle Data

CNC machines only.

```
GET  /api/cnc/readFeedAndSpindle?machineID=MACHINEID&channel=CHANNEL
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| channel | Int32 | Channel number. If not specified, defaults to `0` (main channel). |

**Response Example**

```json
{
  "overSpindle": 150.0,
  "actSpindle": 3000.0,
  "overFeed": 100.0,
  "actFeed": 80.0,
  "overRapid": 100.0,
  "channel": 2
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| overSpindle | Float | Spindle speed override [%] |
| actSpindle | Float | Actual spindle speed |
| overFeed | Float | Feed override [%] |
| actFeed | Float | Actual feed rate |
| overRapid | Float | Rapid traverse override [%] |
| channel | Int32 | Channel number. Only returned when `channel` is specified and not `0`. |

> Note: When multiple spindles are present, only the first spindle speed is returned.

---

### 2.5.1.9 readLaserPower — Read Laser Power

Laser cutting / welding machines only.

```
GET  /api/cnc/readLaserPower?machineID=MACHINEID
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |

**Response Example**

```json
{
  "preset": 100.0,
  "actual": 100.0
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| preset | Float | Preset power [%] |
| actual | Float | Actual power [%] |

---

### 2.5.1.10 readLoad — Read Load Data

CNC machines only.

```
GET  /api/cnc/readLoad?machineID=MACHINEID&channel=CHANNEL
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| channel | Int32 | Channel number. If not specified, defaults to `0` (main channel). |

**Response Example**

```json
{
  "spindleLoad": [
    100.0,
    0.0
  ],
  "axialLoad": [
    50.1,
    12.4,
    0.0
  ],
  "channel": 2
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| spindleLoad | Float[] | Spindle load [%] |
| axialLoad | Float[] | Servo axis load [%] |
| channel | Int32 | Channel number. Only returned when `channel` is specified and not `0`. |

> Note: When multiple spindles are present, the spindle load array entries correspond to the first spindle, second spindle, etc. in order. The servo axis load entries correspond in order to the axis names returned by section 2.5.1.15 `readPosition`.

---

### 2.5.1.11 readLog — Read Log Information

Currently supports Fanuc Robot, ABB Robot, and simulated machines.

```
GET  /api/cnc/readLog?machineID=MACHINEID
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| type | String | Log type. Values: `Alarm` (alarm log), `Operation` (operation log), `Default`. Defaults to `Default`. ABB Robot supports `Operation`; Fanuc Robot supports `Alarm`; simulated machines support all types; `Default` is equivalent to `Operation`. |
| count | Int32 | Number of log entries. Returns the specified number of the most recent entries. Defaults to `0` (all entries). |

**Response Example** (ABB Robot — Operation)

```json
{
  "msgs": [
    "{\"SeqNo\":\"79\",\"Type\":\"1 \",\"Code\":\"10011\",\"Title\":\"Motors ON state\",\"Date\":\"2025-04-02 T 10:54:40\",\"Description\":\"The system is in the Motors ON state.\",\"Args\":[]}",
    "{\"SeqNo\":\"78\",\"Type\":\"1 \",\"Code\":\"10010\",\"Title\":\"Motors OFF state\",\"Date\":\"2025-04-02 T 10:54:39\",\"Description\":\"The system is in the Motors OFF state.\",\"Args\":[]}"
  ]
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| msgs | String[] | (Required) Log messages. Note: the format of log content varies by machine type. |

---

### 2.5.1.12 readOffsetData — Read Tool Offset Data

```
GET  /api/cnc/readOffsetData?machineID=MACHINEID&channel=CHANNEL&toolNum=TOOLNUM&offsetNum=OFFSETNUM
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| channel | Int32 | Channel number. If not specified, defaults to `0` (main channel). |
| toolNum | Int32 | Specify `toolNum` (tool number) and/or `offsetNum` (offset number) to identify the target tool. Parameters correspond to the tags in Table 26 — Offset Tags. Refer to Table 27 — Offset Tag Combinations for the tag combination supported by each CNC system. |
| offsetNum | Int32 | See above. |

**Response Example** (Heidenhain)

```json
{
  "toolNum": 1,
  "toolName": "MILL_D2_ROUGH",
  "toolType": "9",
  "lengthWear": 0.6,
  "radiusWear": 0.5,
  "lengthGeom": 30.0,
  "radiusGeom": 1.0,
  "radius2Wear": 0.2,
  "radius2Geom": 2.0
}
```

**Response Example** (Siemens)

```json
{
  "toolNum": 2,
  "offsetNum": 1,
  "toolName": "ROUGHING_T80 A",
  "toolType": 500,
  "toolNose": 3,
  "wearX": 0.88,
  "wearZ": 0.78,
  "wearR": 0.05,
  "geomX": 55.0,
  "geomZ": 39.0,
  "geomR": 0.8
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| channel | Int32 | Channel number. Only returned when `channel` is specified and not `0`. |
| toolNum | Int32 | Tool number |
| offsetNum | Int32 | Offset number |
| toolName | String | Tool name |
| toolType | String | Tool type |
| lengthUnit | String | Tool offset length unit |
| toolNose | Int32 | Tool nose / cutting edge position |
| lengthWear | Double | Length wear offset |
| radiusWear | Double | Radius wear offset |
| lengthGeom | Double | Length geometry offset |
| radiusGeom | Double | Radius geometry offset |
| wearX | Double | Length X wear offset |
| wearY | Double | Length Y wear offset |
| wearZ | Double | Length Z wear offset |
| wearR | Double | Radius wear offset |
| geomX | Double | Length X geometry |
| geomY | Double | Length Y geometry |
| geomZ | Double | Length Z geometry |
| geomR | Double | Radius geometry |

> Note: The parameters listed above are the common tool offset parameters, but are not exhaustive. It is recommended to test which offset parameters can be read when connecting a new CNC type for the first time. If you need access to tool offset parameters not currently included in this interface, contact support.

---

### 2.5.1.13 batchReadOffsetData — Batch Read Tool Offset Data

This interface is the batch version of section 2.5.1.12 `readOffsetData`. By specifying a list of target tools in the request body, multiple sets of data can be read in a single call.

```
POST  /api/cnc/batchReadOffsetData?machineID=MACHINEID
```

**Request Body Example** (application/json)

```json
[
  {
    "toolNum": 1,
    "offsetNum": 1,
    "channel": 2
  },
  {
    "toolNum": 1,
    "offsetNum": 2,
    "channel": 2
  }
]
```

**Request Parameters** (same as section 2.5.1.12 `readOffsetData`)

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| channel | Int32 | Channel number. If not specified, defaults to `0` (main channel). |
| toolNum | Int32 | Specify tool number or offset number to identify the target tool |
| offsetNum | Int32 | See above. |

**Response Example**

```json
[
  {
    "toolNum": 1,
    "offsetNum": 1,
    "lengthUnit": "MM",
    "toolNose": 3,
    "lengthWear": 0.0001,
    "radiusWear": 0.03,
    "lengthGeom": 5.0,
    "radiusGeom": 0.2,
    "channel": 2
  },
  {
    "toolNum": 1,
    "offsetNum": 2,
    "lengthUnit": "MM",
    "toolNose": 4,
    "lengthWear": 0.01,
    "radiusWear": 0.02,
    "lengthGeom": 6.0,
    "radiusGeom": 0.3,
    "channel": 2
  }
]
```

Response parameters are the same as section 2.5.1.12 `readOffsetData`. If a particular request fails, the corresponding position in the response array contains the error information for that request.

---

### 2.5.1.14 writeOffsetData — Write Tool Offset Data

```
POST  /api/cnc/writeOffsetData?machineID=MACHINEID&channel=CHANNEL&toolNum=TOOLNUM&offsetNum=OFFSETNUM
```

**Request Body Example** (application/json)

```json
{
  "toolNose": 3,
  "lengthWear": 0.0001,
  "radiusWear": 0.03,
  "lengthGeom": 5.0,
  "radiusGeom": 0.2
}
```

> Note: Only include in the request body the parameters you need to write. Parameters that should remain unchanged do not need to be specified.

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| channel | Int32 | Channel number. If not specified, defaults to `0` (main channel). |
| toolNum | Int32 | Specify tool number or offset number to identify the target tool |
| offsetNum | Int32 | See above. |
| toolName | String | Tool name. (Read-only in Siemens systems; cannot be written.) |
| toolType | String | Tool type. (Read-only in Okuma systems; cannot be written.) |
| lengthUnit | String | Tool offset length unit |
| toolNose | Int32 | Tool nose / cutting edge position |
| lengthWear | Double | Length wear offset |
| radiusWear | Double | Radius wear offset |
| lengthGeom | Double | Length geometry offset |
| radiusGeom | Double | Radius geometry offset |
| wearX | Double | Length X wear offset |
| wearY | Double | Length Y wear offset |
| wearZ | Double | Length Z wear offset |
| wearR | Double | Radius wear offset |
| geomX | Double | Length X geometry |
| geomY | Double | Length Y geometry |
| geomZ | Double | Length Z geometry |
| geomR | Double | Radius geometry |

**Response Example**

```json
{
  "errorCode": 0,
  "errorMsg": "Success"
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| errorCode | Int32 | (Required) Error code. `0` = success. |
| errorMsg | String | (Required) Error message |

---

### 2.5.1.15 readPosition — Read Axis Position Data

```
GET  /api/cnc/readPosition?machineID=MACHINEID&channel=CHANNEL
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| channel | Int32 | Channel number. If not specified, defaults to `0` (main channel). |

**Response Example**

```json
{
  "axisName": ["X", "Y", "Z"],
  "unit": ["mm", "mm", "mm"],
  "mach": [150.12, 0, -31.35],
  "abs": [150.12, 0, -31.35],
  "rel": [150.12, 0, -31.35],
  "dist": [9.88, 0, 31.35],
  "channel": 2
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| axisName | String[] | (Required) Axis names |
| unit | String[] | Units for each axis |
| mach | Float[] | Machine position for each axis |
| abs | Float[] | Absolute position for each axis |
| rel | Float[] | Relative position for each axis |
| dist | Float[] | Distance to go for each axis |
| channel | Int32 | Channel number. Only returned when `channel` is specified and not `0`. |

> Note: All position data arrays correspond positionally to the axis names in `axisName`.

---

### 2.5.1.16 readProgramBlock — Read Current Program Block

Reads the program block currently executing on the machine.

```
GET  /api/cnc/readProgramBlock?machineID=MACHINEID&channel=CHANNEL
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| channel | Int32 | Channel number. If not specified, defaults to `0` (main channel). |

**Response Example**

```json
{
  "currentBlock": "Y70.800",
  "channel": 2
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| currentBlock | String | (Required) Currently executing program block content |
| channel | Int32 | Channel number. Only returned when `channel` is specified and not `0`. |

---

### 2.5.1.17 readProgramInfo — Read Program Information

```
GET  /api/cnc/readProgramInfo?machineID=MACHINEID&channel=CHANNEL
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| channel | Int32 | Channel number. If not specified, defaults to `0` (main channel). |

**Response Example**

```json
{
  "mainPrgmName": "1234",
  "runningPrgName": "abcd",
  "programSeqNum": "N30",
  "programStack": "A/B/1234/abcd",
  "channel": 2
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| mainPrgmName | String | (Required) Main program name |
| runningPrgName | String | (Required) Currently executing sub-program name |
| programSeqNum | String | Program sequence number of the currently executing block |
| programStack | String | Program call stack. Currently supported only for Siemens and simulated machines. |
| channel | Int32 | Channel number. Only returned when `channel` is specified and not `0`. |

> Note: For Fanuc systems, leading zeros in standard program names (letter O + digits) are automatically removed. For example, if the program name on the machine is `O0010`, the returned name is `010`.

---

### 2.5.1.18 readPlcData — Read PLC Data

Before using this interface, you must know the PLC area address and data type of the target data. Consult the device manual or contact the equipment manufacturer for this information.

```
GET  /api/cnc/readPlcData?machineID=MACHINEID&area=AREA&start=START&count=COUNT&type=TYPE
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| area | String | (Required) Area. Format: `{areaName}\|{parameter1}\|{parameter2}…`. `areaName` is the PLC area (e.g., R, X, Y — obtain from the machine manual or manufacturer). For standard MODBUS communication, `areaName` is a partition name such as `0x`, `1x`, `3x`, `4x`. The gateway supports special area names including `$MACRO$` for macro variables, `$PARAMS$` for system parameters, and `$TAG$` for tags. See Table 52 — PLC Special Areas and Parameters. |
| start | String | Start address. If not base-10, add a prefix per Table 53 — PLC Address Numeral System Prefixes. |
| count | Int32 | (Required) Data count. For non-String types, this is the number of data items to read; for String type, this is the target string length in bytes. |
| type | String | (Required) Data type. Supported types are listed in Table 54 — PLC Data Types. |
| channel | Int32 | Channel number. If not specified, defaults to `0` (main channel). |

**Table 51 — PLC Common Areas and Parameters**

| Device System | Area | `area` Example | Notes |
|--------------|------|---------------|-------|
| All | General area | X | X area of the PLC device |
| All | General area | X\|s=S | To communicate with another PLC connected to the current PLC, append `station`, `slot`, or `slaveID` (MODBUS). If `s` is not specified, defaults to communicating with the current PLC. Currently supported by select PLC devices only. |

**Table 52 — PLC Special Areas and Parameters (Partial)**

| System | Area | `area` Example | Notes |
|--------|------|---------------|-------|
| Bosunman | MODBUS address | `0x` or `1x` or `4x` | |
| Brother | Macro variables | `$MACRO$` | |
| Delta | Macro variables | `$MACRO$` | |
| Fanuc | Diagnostic data | `$DIAG$` | |
| Fanuc | Macro variables | `$MACRO$` | |
| Fanuc | System parameters | `$PARAMS$` | Supports Byte, Int16, Int32, Double; some parameters require an axis number, e.g., `axis=1` |
| GSK [980, 988] | Macro variables | `$MACRO$` | |
| Haas [Universal] | Macro variables | `$MACRO$` | |
| Siemens | Macro variables (R parameters) | `$MACRO$\|type=R` | |
| Siemens | Macro variables (RG parameters) | `$MACRO$\|type=RG` | |
| Siemens [Universal] | Tags (variable names) | `$TAG$\|area=AREA\|block=BLOCK\|name=NAME\|areaNo=AREANO\|row=ROW\|column=COLUMN` | S7 variables; supply Area, Block (Component), VariableName, AreaNo. (default 1), Row (default 1), Column (default 1) |

**Table 53 — PLC Address Numeral System Prefixes**

| Base | Prefix (digit 0 + letter) | Example |
|------|--------------------------|---------|
| Binary | 0b | 0b1001 |
| Octal | 0 | 03671 |
| Decimal | (none) | 123 |
| Hexadecimal | 0x | 0x5A7 |

**Table 54 — PLC Data Types (Support Varies by System)**

| Data Type | Bit | Byte | SByte | Int16 | UInt16 | Float | Int32 | UInt32 | Double | String |
|-----------|-----|------|-------|-------|--------|-------|-------|--------|--------|--------|
| Bosunman | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | |
| Brother | ✓ | | | ✓ | | | | | | |
| Delta | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |
| Fanuc | | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | | * | |
| Siemens | ✓ | ✓ | | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |
| Mock | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |

✓: Supported; *: Only supported for macro variables (local variables, common variables, etc.)

**Response Example** (general area, Int32 array)

```json
{
  "data": [2147483647, -616240881, 1351548766, 1408080714, -1677592641, 681965706, 1002992212, -1588442413]
}
```

**Response Example** (String type)

```json
{
  "msg": "Test string"
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| data | Array\[Object\] | When `type` is any type other than String, the response contains `data` — an array of the specified `type`, with length equal to the requested `count`. |
| msg | String | When `type` is String, the response contains `msg`. Trailing whitespace is automatically trimmed. |
| channel | Int32 | Channel number. Only returned when `channel` is specified and not `0`. |

---

### 2.5.1.19 writePlcData — Write PLC Data

> **Warning**: Writing PLC data carries inherent risks. Ensure you fully understand the risks and only write data in safe conditions. By default, this interface is disabled on the gateway. It must be explicitly enabled in the **Settings** page of the gateway management interface before use.

Before using this interface, you must know the PLC area address and data type of the target data.

```
POST  /api/cnc/writePlcData?machineID=MACHINEID&area=AREA&start=START&type=TYPE
```

**Request Body Example** (writing non-String type, application/json)

```json
{
  "data": [2147483647, -616240881, 1351548766, 1408080714]
}
```

**Request Body Example** (writing String type)

```json
{
  "msg": "Test string"
}
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| area | String | (Required) Area. Format is the same as the `area` parameter in `readPlcData`. |
| start | String | Start address. Add a prefix per Table 53 if not base-10. |
| type | String | (Required) Data type. See Table 54 — PLC Data Types. |
| data | Array\[Object\] | For non-String types, provide the data array in the request body. |
| msg | String | For String type, provide the string value in the request body. |
| channel | Int32 | Channel number. If not specified, defaults to `0` (main channel). |

**Response Example**

```json
{
  "errorCode": 0,
  "errorMsg": "Success"
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| errorCode | Int32 | (Required) Error code. `0` = success. |
| errorMsg | String | (Required) Error message |

---

### 2.5.1.20 readTimeData — Read Machine Time Data

```
GET  /api/cnc/readTimeData?machineID=MACHINEID
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |

**Response Example**

```json
{
  "cumulativePowerOnTimeMin": 34194,
  "cumulativePowerOnTimeMs": 0,
  "powerOnTimeMin": 2944,
  "powerOnTimeMs": 0,
  "cumulativeOperatingTimeMin": 6683,
  "cumulativeOperatingTimeMs": 13328,
  "operatingTimeMin": 0,
  "operatingTimeMs": 0,
  "cumulativeCuttingTimeMin": 0,
  "cumulativeCuttingTimeMs": 0,
  "cuttingTimeMin": 0,
  "cuttingTimeMs": 0,
  "lastCycleTimeMin": 4,
  "lastCycleTimeMs": 43000,
  "currentCycleTimeMin": 0,
  "currentCycleTimeMs": 0,
  "currentCuttingTimeMin": 0,
  "currentCuttingTimeMs": 0,
  "remainingCycleTimeMin": 0,
  "remainingCycleTimeMs": 0
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| cumulativePowerOnTimeMin | Int32 | Cumulative power-on time 1 [minutes] |
| cumulativePowerOnTimeMs | Int32 | Cumulative power-on time 2 [milliseconds] |
| powerOnTimeMin | Int32 | Current power-on time 1 [minutes] |
| powerOnTimeMs | Int32 | Current power-on time 2 [milliseconds] |
| cumulativeOperatingTimeMin | Int32 | Cumulative operating time 1 [minutes] |
| cumulativeOperatingTimeMs | Int32 | Cumulative operating time 2 [milliseconds] |
| operatingTimeMin | Int32 | Current operating time 1 [minutes] |
| operatingTimeMs | Int32 | Current operating time 2 [milliseconds] |
| cumulativeCuttingTimeMin | Int32 | Cumulative cutting time 1 [minutes] |
| cumulativeCuttingTimeMs | Int32 | Cumulative cutting time 2 [milliseconds] |
| cuttingTimeMin | Int32 | Current cutting time 1 [minutes] |
| cuttingTimeMs | Int32 | Current cutting time 2 [milliseconds] |
| lastCycleTimeMin | Int32 | Last cycle time 1 [minutes] |
| lastCycleTimeMs | Int32 | Last cycle time 2 [milliseconds] |
| currentCycleTimeMin | Int32 | Current cycle elapsed time 1 [minutes] |
| currentCycleTimeMs | Int32 | Current cycle elapsed time 2 [milliseconds] |
| currentCuttingTimeMin | Int32 | Current cutting time (within current cycle) 1 [minutes] |
| currentCuttingTimeMs | Int32 | Current cutting time (within current cycle) 2 [milliseconds] |
| remainingCycleTimeMin | Int32 | Remaining cycle time 1 [minutes] |
| remainingCycleTimeMs | Int32 | Remaining cycle time 2 [milliseconds] |

> Note: The interface only returns time data supported by the CNC system. Each time value is derived by combining its corresponding time 1 and time 2 through addition. For the calculation method, see section 1.2.23 TimeData — Machine Time Data.

---

### 2.5.1.21 readToolLife — Read Tool Life Data

```
GET  /api/cnc/readToolLife?machineID=MACHINEID&groupNum=GROUPNUM&toolIndex=TOOLINDEX&toolNum=TOOLNUM&offsetNum=OFFSETNUM
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| groupNum | Int32 | Specify one or more of: `groupNum` (tool group number), `toolIndex` (tool index within group), `toolNum` (tool number), or `offsetNum` (offset number) to identify the target tool. |
| toolIndex | Int32 | See above. |
| toolNum | Int32 | Parameters correspond to the tags in section 1.2.25 ToolLife. Note: `groupNum` corresponds to tag `toolGroupNum`; `offsetNum` corresponds to tag `toolOffsetNum`; others match tag names directly. Refer to the tag combination tables in section 1.2.25 for your CNC system. |
| offsetNum | Int32 | See above. |

**Response Example** (Fanuc — count-based)

```json
{
  "toolNum": 32,
  "toolIndex": 4,
  "toolGroupNum": 1,
  "countLimit": 100,
  "currentCount": 21
}
```

**Response Example** (Fanuc — time-based)

```json
{
  "toolNum": 8,
  "toolIndex": 2,
  "toolGroupNum": 1,
  "timeLimit": 60000,
  "currentTime": 1380
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| toolGroupNum | Int32 | Tool group number |
| toolIndex | Int32 | Tool index within the group |
| toolNum | Int32 | Tool number |
| toolOffsetNum | Int32 | Tool offset number |
| timeLimit | Int32 | Tool life time limit [seconds] — maximum usable time |
| currentTime | Int32 | Current tool life used [seconds] |
| prewarningTime | Int32 | Tool life pre-warning threshold [seconds] — alarm triggered when `currentTime` reaches this value |
| countLimit | Int32 | Tool life count limit — maximum usable count |
| currentCount | Int32 | Current tool life used count |
| prewarningCount | Int32 | Tool life pre-warning count threshold |
| wearLimit | Int32 | Tool life wear limit [machine default length unit] |
| currentWear | Int32 | Current tool life wear [machine default length unit] |
| prewarningWear | Int32 | Tool life pre-warning wear threshold [machine default length unit] |

> Note: The parameters listed are standardized tool life data; some values are converted from raw data for uniformity across CNC systems. To access raw data, use section 2.5.1.23 `readToolLifeDetails`. Supported life types per CNC system are listed in section 1.2.25 ToolLife.

---

### 2.5.1.22 batchReadToolLife — Batch Read Tool Life Data

This interface is the batch version of section 2.5.1.21 `readToolLife`. By specifying a list of target tools in the request body, multiple sets of data can be read in a single call.

```
POST  /api/cnc/batchReadToolLife?machineID=MACHINEID
```

**Request Body Example** (application/json)

```json
[
  {
    "groupNum": 1,
    "toolIndex": 4
  },
  {
    "groupNum": 2,
    "toolIndex": 3
  }
]
```

**Request Parameters** (same as section 2.5.1.21 `readToolLife`)

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| groupNum | Int32 | Specify one or more of `groupNum`, `toolIndex`, `toolNum`, or `offsetNum` to identify the target tool |
| toolIndex | Int32 | See above. |
| toolNum | Int32 | See above. |
| offsetNum | Int32 | See above. |

**Response Example**

```json
[
  {
    "toolNum": 32,
    "toolIndex": 4,
    "toolGroupNum": 1,
    "countLimit": 100,
    "currentCount": 21
  },
  {
    "toolNum": 23,
    "toolIndex": 3,
    "toolGroupNum": 2,
    "countLimit": 200,
    "currentCount": 58
  }
]
```

Response parameters are the same as section 2.5.1.21 `readToolLife`. If a particular request fails, the corresponding position in the response array contains that request's error information.

---

### 2.5.1.23 readToolLifeDetails — Read Tool Life Details

In addition to the common tool life data available from section 2.5.1.21 `readToolLife`, this interface also returns unprocessed raw data and additional non-generic tool life parameters.

```
GET  /api/cnc/readToolLifeDetails?machineID=MACHINEID&groupNum=GROUPNUM&toolIndex=TOOLINDEX&toolNum=TOOLNUM&offsetNum=OFFSETNUM
```

**Request Parameters** (same as section 2.5.1.21 `readToolLife`)

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| groupNum | Int32 | Specify one or more of `groupNum`, `toolIndex`, `toolNum`, or `offsetNum` to identify the target tool |
| toolIndex | Int32 | See above. |
| toolNum | Int32 | See above. |
| offsetNum | Int32 | See above. |

**Response Example** (Fanuc — count-based)

```json
{
  "toolNum": 32,
  "toolIndex": 4,
  "toolGroupNum": 1,
  "countLimit": 100,
  "currentCount": 21,
  "rawToolLifeType": "Count",
  "rawToolLifeStatus": "Enabled"
}
```

**Response Example** (Fanuc — time-based)

```json
{
  "toolNum": 8,
  "toolIndex": 2,
  "toolGroupNum": 1,
  "timeLimit": 60000,
  "currentTime": 1380,
  "rawToolLifeType": "Time",
  "rawToolLifeUnit": "Minute",
  "rawToolLifeStatus": "Enabled",
  "rawTimeLimit": 1000.0,
  "rawCurrentTime": 23.0
}
```

**Response Example** (Siemens — time-based)

```json
{
  "toolNum": 1,
  "toolOffsetNum": 1,
  "timeLimit": 1800,
  "currentTime": 0,
  "prewarningTime": 1428,
  "rawToolLifeType": "Time",
  "rawToolLifeUnit": "Minute",
  "rawTimeLimit": 30.0,
  "rawRemainingTime": 30.0,
  "rawPrewarningRemainingTime": 6.2
}
```

**Response Example** (Siemens — wear-based)

```json
{
  "toolNum": 3,
  "toolOffsetNum": 1,
  "wearLimit": 2.0,
  "currentWear": 0.0,
  "prewarningWear": 1.0,
  "rawToolLifeType": "Wear",
  "rawRemainingWear": 2.0,
  "rawPrewarningRemainingWear": 1.0
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| **Common Data** | | |
| groupNum | Int32 | Tool group number |
| toolIndex | Int32 | Tool index within the group |
| toolNum | Int32 | Tool number |
| toolOffsetNum | Int32 | Tool offset number |
| timeLimit | Int32 | Tool life time limit [seconds] |
| currentTime | Int32 | Current tool life used [seconds] |
| prewarningTime | Int32 | Tool life pre-warning threshold [seconds] |
| countLimit | Int32 | Tool life count limit |
| currentCount | Int32 | Current tool life used count |
| prewarningCount | Int32 | Tool life pre-warning count threshold |
| wearLimit | Int32 | Tool life wear limit [machine default length unit] |
| currentWear | Int32 | Current tool life wear [machine default length unit] |
| prewarningWear | Int32 | Tool life pre-warning wear threshold [machine default length unit] |
| **Raw Data** | | |
| rawToolLifeType | String | Tool life type |
| rawToolLifeUnit | String | Time unit (referred to as [time] below) |
| rawToolLifeStatus | String | Tool life status |
| rawTimeLimit | Double | Tool life time limit [time] |
| rawTimeLimit1 | Double | Maximum tool life [time]. Heidenhain only. |
| rawTimeLimit2 | Double | Maximum tool life for each tool call [time]. Heidenhain only. |
| rawCurrentTime | Double | Current tool life used [time] |
| rawOverTime | Double | Overtime beyond tool life [time]. Heidenhain only. |
| rawRemainingTime | Double | Remaining tool life [time]. Siemens only. |
| rawPrewarningRemainingTime | Double | Pre-warning remaining tool life [time]. Siemens only. |
| rawRemainingCount | Int32 | Remaining tool life [count]. Siemens only. |
| rawPrewarningRemainingCount | Int32 | Pre-warning remaining tool life [count]. Siemens only. |
| rawRemainingWear | Double | Remaining tool life [machine default length unit]. Siemens only. |
| rawPrewarningRemainingWear | Double | Pre-warning remaining tool life [machine default length unit]. Siemens only. |
| inventoryNum | String | Tool identification code. Heidenhain only. |

> Note: The common data section is equivalent to the response parameters in section 2.5.1.21 `readToolLife`. For supported life types per CNC system, see section 1.2.25 ToolLife.

---

### 2.5.1.24 batchReadToolLifeDetails — Batch Read Tool Life Details

This interface is the batch version of section 2.5.1.23 `readToolLifeDetails`. By specifying a list of target tools in the request body, multiple sets of data can be read in a single call.

```
POST  /api/cnc/batchReadToolLifeDetails?machineID=MACHINEID
```

**Request Body Example** (application/json)

```json
[
  {
    "groupNum": 1,
    "toolIndex": 4
  },
  {
    "groupNum": 2,
    "toolIndex": 3
  }
]
```

**Request Parameters** (same as section 2.5.1.23 `readToolLifeDetails`)

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| groupNum | Int32 | Specify one or more of `groupNum`, `toolIndex`, `toolNum`, or `offsetNum` to identify the target tool |
| toolIndex | Int32 | See above. |
| toolNum | Int32 | See above. |
| offsetNum | Int32 | See above. |

**Response Example**

```json
[
  {
    "toolNum": 32,
    "toolIndex": 4,
    "toolGroupNum": 1,
    "countLimit": 100,
    "currentCount": 21
  },
  {
    "toolNum": 23,
    "toolIndex": 3,
    "toolGroupNum": 2,
    "countLimit": 200,
    "currentCount": 58
  }
]
```

Response parameters are the same as section 2.5.1.23 `readToolLifeDetails`. If a particular request fails, the corresponding position in the response array contains that request's error information.

---

### 2.5.2 Cached Read

When using cached read interfaces, the gateway returns data from the cache corresponding to the configured automatic data collection tasks. To use these interfaces, the gateway local cache feature must be enabled (enabled by default from the factory), and the corresponding auto-collection tasks must be active.

---

### 2.5.2.1 readTaskData — Read Machine Task Data

This interface reads task data for the target machine from the gateway cache, rather than communicating directly with the machine. As a result, in addition to raw data from the machine (such as machine status and alarm information), it can also return gateway-computed data (overload times, OEE data, etc.) with higher operational efficiency. The corresponding task must be enabled first.

```
GET  /api/cnc/readTaskData?machineID=MACHINEID&type=TYPE&tag=TAG
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| type | String | (Required) Data type. See section 1.2 — Data Class Description. |
| tag | String | Tag in field notation. See section 1.2 — Data Class Description. |

**Example**

To retrieve spindle overload data for spindle 1 of the machine with machineID `1010`, use `type=SpindleOverload`, `tag=S1`:

```
/api/cnc/readTaskData?machineID=1010&type=SpindleOverload&tag=S1
```

If the requested task is not enabled, or is enabled but has not executed yet, the response is:

```json
{
  "errorCode": 1303,
  "errorMsg": "Task not ready."
}
```

When operating normally, the data for the specified type is returned in JSON format:

```json
{
  "cumulativeTime": 14367,
  "spindleNo": 1,
  "time": "2024-03-01T02:26:42.2781587Z"
}
```

> Note: In the response, `time` is the timestamp when the data was collected. For other response parameters, see the field and tag descriptions for the corresponding `type` in section 1.2 — Data Class Description.

---

### 2.5.2.2 batchReadTaskData — Batch Read Machine Task Data

This interface is the batch version of section 2.5.2.1 `readTaskData`. By specifying a list of target data in the request body, multiple sets of data can be read in a single call. The corresponding tasks must be enabled first.

```
POST  /api/cnc/batchReadTaskData
```

**Request Body Example** (application/json)

```json
[
  {
    "machineID": "1",
    "type": "CNCStatus"
  },
  {
    "machineID": "2110",
    "type": "Count"
  },
  {
    "machineID": "3",
    "type": "PLC",
    "tag": "TR0"
  }
]
```

**Request Parameters** (same as section 2.5.2.1 `readTaskData`)

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| type | String | (Required) Data type. See section 1.2 — Data Class Description. |
| tag | String | Tag in field notation. See section 1.2 — Data Class Description. |

**Response Example**

```json
[
  {
    "cncStatus": "AUTO_RUN",
    "alarmStatus": "ALARM",
    "alarmLevel": "WRN",
    "mode": "AUTO_RUN",
    "programStatus": "RUNNING",
    "emergencyStatus": "NOT_EMG",
    "dryRunStatus": "NOT_DRY_RUN",
    "adjustedStatus": "AUTO_RUN",
    "offTime": 2509,
    "waitTime": 2123,
    "emergencyTime": 25,
    "autoRunTime": 1526,
    "manualTime": 2905,
    "time": "2024-03-01T02:26:48.7383566Z"
  },
  {
    "count": 22406,
    "cumulativeCount": 0,
    "currentCount": 0,
    "time": "2024-03-01T02:26:49.8853233Z"
  },
  {
    "data": [32767],
    "tag": "R0",
    "time": "2024-03-01T02:26:49.3324829Z"
  }
]
```

Results are returned in the same order as the requests. If a particular request fails, the corresponding position in the response array contains that request's error information.

> Note: In the response, `time` is the timestamp when the data was collected. For other response parameters, see section 1.2 — Data Class Description.

---

### 2.5.2.3 readGroupTaskData — Read Machine Group Task Data

This interface reads the latest data for the specified task of the target machine group from the gateway cache. The corresponding machine group task must be enabled first.

```
GET  /api/cnc/readGroupTaskData?groupID=GROUPID&type=TYPE&tag=TAG
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| groupID | String | (Required) Target machine group identifier; see section 1.1.2 groupID — Machine Group Identifier |
| type | String | (Required) Data type. Currently supports: section 1.2.11 `GroupCount`, section 1.2.12 `GroupCumulativeTime`, and section 1.2.13 `GroupOEE`. |
| tag | String | Tag in field notation. See section 1.2 — Data Class Description. |

**Example**

To retrieve machining count data for the machine group with groupID `g2`, use `type=GroupCount`:

```
/api/cnc/readGroupTaskData?groupID=g2&type=GroupCount
```

If the requested task is not enabled or has not yet executed, the response is:

```json
{
  "errorCode": 1303,
  "errorMsg": "Task not ready."
}
```

When operating normally, the data for the specified type is returned:

```json
{
  "cumulativeCount": 127,
  "time": "2024-03-01T02:26:50.1127663Z"
}
```

---

### 2.5.2.4 batchReadGroupTaskData — Batch Read Machine Group Task Data

This interface is the batch version of section 2.5.2.3 `readGroupTaskData`. By specifying a list of target data in the request body, multiple sets of data can be read in a single call. The corresponding tasks must be enabled first.

```
POST  /api/cnc/batchReadTaskData
```

**Request Body Example** (application/json)

```json
[
  {
    "groupID": "1",
    "type": "GroupOEE"
  },
  {
    "groupID": "2",
    "type": "GroupCount"
  }
]
```

**Request Parameters** (same as section 2.5.2.1 `readTaskData`)

| Parameter | Type | Description |
|-----------|------|-------------|
| groupID | String | Target machine group identifier; see section 1.1.2 groupID — Machine Group Identifier |
| type | String | Data type. Currently supports `GroupCount`, `GroupCumulativeTime`, and `GroupOEE`. |
| tag | String | Tag in field notation. See section 1.2 — Data Class Description. |

**Response Example**

```json
[
  {
    "autoRunCount": 1,
    "waitCount": 0,
    "emergencyCount": 0,
    "manualCount": 0,
    "offCount": 0,
    "availability": 90.0,
    "offTime": 360,
    "waitTime": 0,
    "emergencyTime": 0,
    "autoRunTime": 3240,
    "manualTime": 0,
    "time": "2024-03-01T02:27:30.5534659Z"
  },
  {
    "cumulativeCount": 127,
    "time": "2024-03-01T02:27:30.6533778Z"
  }
]
```

Results are returned in the same order as the requests. If a particular request fails, the corresponding position in the response array contains that request's error information.

---

### 2.5.2.5 batchReadErrors — Batch Read Machine Connection Status

This interface retrieves the current connection status for a list of specified machines in a single call.

```
POST  /api/cnc/batchReadErrors
```

**Request Body Example** (application/json)

```json
[
  {
    "machineID": "1"
  },
  {
    "machineID": "2"
  }
]
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |

**Response Example**

```json
[
  {
    "errorCode": 0,
    "errorMsg": "Success"
  },
  {
    "errorCode": 3,
    "errorMsg": "Machine offline."
  }
]
```

Results are returned in the same order as the requests.

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| errorCode | Int32 | (Required) Error code. `0` = connection successful. |
| errorMsg | String | (Required) Error message |

---

### 2.5.2.6 readErrorSummary — Read Connection Status Summary

Retrieves a summary of the current machine connection status. No request parameters.

```
GET  /api/cnc/readErrorSummary
```

**Response Example**

```json
{
  "success": 8,
  "offline": 1,
  "error": 0
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| success | Int32 | (Required) Number of successfully connected machines |
| offline | Int32 | (Required) Number of offline machines |
| error | Int32 | (Required) Number of machines with connection errors |

---

## 2.6 File Management Interfaces

The file management interfaces connect to a target file server and provide functions to read file lists, receive, send, delete, lock, and unlock files, and create or delete directories.

Currently supported file server types are: **Machine Storage**, **FTP Server**, **Shared Folder**, etc. (see *User Manual*, section 5.3.1 Add Machine — Program Transfer Settings for each machine type). The default is **Machine Storage**. Some CNC systems support enabling a local FTP server or shared folder option for file transfer. For machines with limited onboard storage, or machines that do not support direct access to their storage, file transfer can be achieved through an external file server.

Most file management interfaces accept the optional request parameter `dirAtCNC` or `subDir` to specify the directory path on the machine or file server. If neither `dirAtCNC` nor `subDir` is provided, the corresponding file operation is performed in the default root directory. The root directory path can be configured by the user (see *User Manual*, section 5.3.1 Add Machine). If the user has not configured a root directory path, the default root directory paths shown below are used.

**Table 55 — Default Root Directory Paths by CNC System**

| File Server Type | System (Model) | Custom Path Supported | Default Root Directory Path |
|-----------------|----------------|-----------------------|-----------------------------|
| Machine Storage | Brother [TC Series] | No | / |
| Machine Storage | Brother [S Series] | Yes | / |
| Machine Storage | Delta [Universal] | Yes | B:\ |
| Machine Storage | Fagor [All Models] | Yes | MEMORY |
| Machine Storage | Fanuc [0i-D, 0i-F, 30i, 31i, 32i, 35i, Power Motion i-A] ★ | Yes | //CNC_MEM/ |
| Machine Storage | Fanuc [Models other than 0i-D, 0i-F, 30i, 31i, 32i, 35i, Power Motion i-A] | No | Foreground directory configured on the machine (not fixed; e.g. //CNC_MEM/) |
| Machine Storage | GSK [980, 988] | Yes | /user/NCPROG |
| Machine Storage | Haas [Universal, MT-CONNECT] | Yes | (none) |
| Machine Storage | Heidenhain [TNC640, TNC640 DNC] | Yes | TNC:\nc_prog |
| Machine Storage | Heidenhain [iTNC530] | Yes | TNC:\ |
| Machine Storage | Lynuc [All Models] | Yes | /home/Lynuc/Users/NCFiles |
| Machine Storage | Mitsubishi [All Models] ★★ | Yes | PRG\USER\ |
| Machine Storage | Mock (Simulated Machine) | Yes | / |
| Machine Storage | Okuma [All Models] | Yes | MD1 |
| Machine Storage | Rexroth [OPC UA] | Yes | Filesystem/prog |
| Machine Storage | Siemens [Universal] | Yes | /nckfs |
| Machine Storage | Siemens [OPC UA] | Yes | Sinumerik/FileSystem/PartProgram |
| Machine Storage | Siemens [810D/840D] | Yes | mpf.dir |
| Machine Storage | Other CNC models supporting program transfer | No | Machine default storage directory |
| FTP Server | | Yes | FTP server root directory |
| Shared Folder | | Yes | (none) |
| Shared Folder (Win XP) | | Yes | (none) |
| Wireless Transfer Box | | Yes | / |
| Gateway File Server | | Yes | / |

Yes: Supported; No: Not supported

★ Fanuc [0i-F, 30i, 31i, 32i, 35i, Power Motion i-A]: The target directory path can be changed to an external CF card, e.g., `//MEMCARD/`.

★★ Mitsubishi [M700 Series, M800 Series]: The target directory path can be changed to an external CF card (M700 Series) or SD card (M800 Series), e.g., `IC1`.

---

## 2.6.1 readProgramList — Read Machine File List

```
GET  /api/cnc/readProgramList?machineID=MACHINEID&dirAtCNC=DIRATCNC&subDir=SUBDIR
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| dirAtCNC | String | Target directory path on the machine. If not specified, defaults to the default root directory path (see Table 55). |
| subDir | String | Target subdirectory path. If `dirAtCNC` is not provided, the root directory path and subdirectory path are automatically combined into `dirAtCNC`. If both `dirAtCNC` and `subDir` are provided, `subDir` is ignored. |

**Response Example**

```json
{
  "dirAtCNC": "Dir/Prog",
  "programs": [
    "1111",
    "2322",
    "3222"
  ],
  "subDirs": [
    "dir1",
    "dir2"
  ]
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| dirAtCNC | String | (Required) The resolved directory path. Generally matches the `dirAtCNC` request parameter, except in the following cases: (1) The device only has a single unnamed default directory — in this case, the returned `dirAtCNC` is empty; (2) If `dirAtCNC` was not specified or was empty in the request, the returned value is the default root directory path; (3) If the specified path exists but does not conform to the system path format, the returned value is the auto-corrected path. |
| programs | String[] | (Required) List of programs (files) in the specified directory |
| subDirs | String[] | (Required) List of subdirectories in the specified directory. Some CNC systems cannot retrieve folder lists; in such cases, `subDirs` is empty. |

**Table 56 — Subdirectory Listing Support by CNC System**

| File Server Type | System (Model) | Get File List | Get Subdirectory List |
|-----------------|----------------|---------------|-----------------------|
| Machine Storage | Brother [All Models] | Yes | Yes |
| Machine Storage | Fagor [All Models] | Yes | No |
| Machine Storage | Fanuc [0i-D, 0i-F, 30i, 31i, 32i, 35i, Power Motion i-A] | * | Yes |
| Machine Storage | Fanuc [Other Models] | Yes | No |
| Machine Storage | Heidenhain [All Models] | Yes | Yes |
| Machine Storage | Lynuc [All Models] | Yes | Yes |
| Machine Storage | Mitsubishi [All Models] | Yes | No |
| Machine Storage | Mock (Simulated Machine) | Yes | Yes |
| Machine Storage | Okuma [All Models] | Yes | Yes |
| Machine Storage | Rexroth [OPC UA] | Yes | Yes |
| Machine Storage | Siemens [All Models] | Yes | Yes |
| Machine Storage | Other models supporting program transfer | Yes | No |
| FTP Server | | Yes | Yes |
| Shared Folder | | Yes | Yes |
| Shared Folder (Win XP) | | Yes | Yes |
| Wireless Transfer Box | | Yes | Yes |
| Gateway File Server | | Yes | Yes |

Yes: Supported; No: Not supported

\*: Fanuc [0i-D, 0i-F, 30i, 31i, 32i, 35i, Power Motion i-A] returns standard Fanuc program names (letter O + digits), automatically removing leading zeros from the numeric portion. For example, if the program is named `O0010` on the machine, `010` is returned. Non-standard named programs are returned as-is (e.g., `SAMPLE`).

---

## 2.6.2 receiveFileStream — Receive Machine File (Stream Method)

This interface can receive both text and binary files. Compared to section 2.6.3 `receiveFile`, this interface additionally supports files larger than 10 MB. It is recommended to use `/receiveFileStream`.

```
GET  /api/cnc/receiveFileStream?machineID=MACHINEID&fileName=FILENAME&dirAtCNC=DIRATCNC&subDir=SUBDIR
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| fileName | String | (Required) Target file name. Refer to file names returned by section 2.6.1 `readProgramList` or section 2.6.15 `readAllPrograms`. Some CNC systems (e.g., GSK, Siemens) require that the file name include the file extension. |
| dirAtCNC | String | Target directory path. If not specified, defaults to the default root directory path (see Table 55). |
| subDir | String | Target subdirectory path. If `dirAtCNC` is not provided, the root and subdirectory paths are combined. If both are provided, `subDir` is ignored. |

**Response Example**

For text files, response body example (`application/octet-stream`):

```gcode
%
O0001
G21 G90 G40
T01 M06
G90 G0 G54 X12.64 Y88.0 s2546
G43 H01 Z15.0 M8
G81 G98 Z-20. R1.F200.
x70.
X85.
x100.
x170.
X185.
x200.
G80
G00 x100. Y200
G28 G91 z0 M9
M30
%
```

For binary files, the response body contains the raw binary content.

---

## 2.6.3 receiveFile — Receive Machine File

This interface can receive both text and binary files. Compared to section 2.6.2 `receiveFileStream`, this interface does not support files larger than 10 MB. It is recommended to use `/receiveFileStream`.

```
GET  /api/cnc/receiveFile?machineID=MACHINEID&fileName=FILENAME&dirAtCNC=DIRATCNC&subDir=SUBDIR
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| fileName | String | (Required) Target file name. Refer to file names returned by section 2.6.1 `readProgramList` or section 2.6.15 `readAllPrograms`. Some systems require the file extension. |
| dirAtCNC | String | Target directory path. If not specified, defaults to the default root directory path (see Table 55). |
| subDir | String | Target subdirectory path. Combined with root if `dirAtCNC` is not provided. Ignored if both are provided. |

**Response Example (text file)**

```json
{
  "content": "string",
  "encoding": "us-ascii"
}
```

**Response Example (binary file)**

```json
{
  "base64": "string"
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| content | String | File content |
| encoding | String | Original file encoding |
| base64 | String | When the file is binary, the gateway encodes the binary content as a Base64 string. The user can decode it to retrieve the binary file. |

---

## 2.6.4 readCurrentProgram — Receive Currently Running File

```
GET  /api/cnc/readCurrentProgram?machineID=MACHINEID&dirAtCNC=DIRATCNC&subDir=SUBDIR
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1 Basic Description |
| dirAtCNC | String | Target directory path. If not specified, defaults to the default root directory path (see Table 55). |
| subDir | String | Target subdirectory path. Combined with root if `dirAtCNC` is not provided. Ignored if both are provided. |

**Response Example (text file)**

```json
{
  "dirAtCNC": "Dir/Prog",
  "fileName": "09001",
  "content": "string",
  "encoding": "us-ascii"
}
```

**Response Example (binary file)**

```json
{
  "dirAtCNC": "Dir/Prog",
  "fileName": "Program",
  "base64": "string"
}
```

**Response when no program is currently running:**

```json
{
  "errorCode": 158,
  "errorMsg": "Path is not found.",
  "statusMsg": "No content."
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| dirAtCNC | String | Directory path of the file currently running on the machine |
| fileName | String | File name of the file currently running on the machine |
| content | String | File content |
| encoding | String | Original file encoding |
| base64 | String | When the file is binary, the binary content is encoded as Base64. The user can decode it to retrieve the binary file. |
| errorCode | Int32 | Error code. `0` = success. |
| errorMsg | String | Error message |
| statusMsg | String | Error details |

---

## 2.6.5 sendFileStream — Send File to Machine (Stream Method)

This interface can send both text and binary files. Compared to section 2.6.6 `sendFile`, this interface additionally supports files larger than 10 MB. It is recommended to use `/sendFileStream`.

Overwriting an existing file with the same name is not supported. Delete the existing file first, then send the new file.

```
POST  /api/cnc/sendFileStream?machineID=MACHINEID&fileName=FILENAME&dirAtCNC=DIRATCNC&subDir=SUBDIR
```

**Request Example**

For text files, request body example (`application/octet-stream`):

```gcode
%
O0001
G21 G90 G40
T01 M06
G90 G0 G54 X12.64 Y88.0 s2546
G43 H01 Z15.0 M8
G81 G98 Z-20. R1.F200.
x70.
X85.
x100.
x170.
X185.
x200.
G80
G00 x100. Y200
G28 G91 z0 M9
M30
%
```

For binary files, upload the raw binary content in the request body.

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| fileName | String | File name on the machine. Some systems (e.g., GSK, Siemens) require the file extension. Refer to file names from `readProgramList` or `readAllPrograms`. For Fanuc systems, `fileName` is not used; the program name is taken from the content between the first and second `\n` characters. |
| dirAtCNC | String | Target directory path. If not specified, defaults to the default root directory path (see Table 55). |
| subDir | String | Target subdirectory path. Combined with root if `dirAtCNC` is not provided. Ignored if both are provided. |

**Response Example**

```json
{
  "errorCode": 0,
  "errorMsg": "Success"
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| errorCode | Int32 | (Required) Error code. `0` = success. |
| errorMsg | String | (Required) Error message |

---

## 2.6.6 sendFile — Send File to Machine

This interface can send both text and binary files. Compared to section 2.6.5 `sendFileStream`, this interface does not support files larger than 10 MB. It is recommended to use `/sendFileStream`.

Overwriting an existing file with the same name is not supported. Delete the existing file first, then send the new file.

```
POST  /api/cnc/sendFile?machineID=MACHINEID&fileName=FILENAME&dirAtCNC=DIRATCNC&subDir=SUBDIR
```

**Request Body Example** (application/json)

For text files:

```json
{
  "content": "string",
  "encoding": "us-ascii"
}
```

For binary files:

```json
{
  "base64": "string"
}
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| fileName | String | File name on the machine. Some systems (e.g., GSK, Siemens) require the file extension. For Fanuc systems, `fileName` is not used; the program name is taken from the content between the first and second `\n` characters. |
| dirAtCNC | String | Target directory path. If not specified, defaults to the default root directory path (see Table 55). |
| subDir | String | Target subdirectory path. Combined with root if `dirAtCNC` is not provided. Ignored if both are provided. |
| content | String | File content. Use this parameter for text files. When `content` is defined, the `base64` parameter is ignored. |
| encoding | String | Original file encoding. If not specified, the encoding configured in the machine settings is used. |
| base64 | String | For binary files, encode the binary content as a Base64 string and write it to this parameter. |

**Response Example**

```json
{
  "errorCode": 0,
  "errorMsg": "Success"
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| errorCode | Int32 | (Required) Error code. `0` = success. |
| errorMsg | String | (Required) Error message |

---

## 2.6.7 batchSendFile — Batch Send Files to Machines

This interface is the batch version of section 2.6.6 `sendFile`. By specifying multiple target destinations in the request body, the same file can be sent simultaneously to different machines, with different file names and different directory paths.

Overwriting an existing file with the same name is not supported. Delete the existing file first, then send.

```
POST  /api/cnc/batchSendFile
```

**Request Body Example** (application/json)

For text files:

```json
{
  "content": "string",
  "encoding": "us-ascii",
  "targets": [
    { "machineID": "1010", "fileName": "08000" },
    { "machineID": "1011", "fileName": "sample.NC", "DirAtCNC": "dir1" },
    { "machineID": "1012", "fileName": "sample.NC", "SubDir": "Dir/Prog" }
  ]
}
```

For binary files:

```json
{
  "base64": "string",
  "targets": [
    { "machineID": "1011", "fileName": "sample.NC", "SubDir": "Dir/Prog" }
  ]
}
```

Request parameters are the same as section 2.6.6 `sendFile`.

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| targets | Array | (Required) Target destinations for sending the file |
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| fileName | String | File name on the machine. Some systems (e.g., GSK, Siemens) require the file extension. For Fanuc systems, `fileName` is not used; the program name is taken from the content between the first and second `\n` characters. |
| dirAtCNC | String | Target directory path. If not specified, defaults to the default root directory path (see Table 55). |
| subDir | String | Target subdirectory path. Combined with root if `dirAtCNC` is not provided. Ignored if both are provided. |
| content | String | File content. Use for text files. When `content` is defined, `base64` is ignored. |
| encoding | String | Original file encoding. If not specified, the encoding in machine settings is used. |
| base64 | String | For binary files, encode the binary content as Base64 and write it here. |

**Response Example**

```json
[
  {
    "errorCode": 0,
    "errorMsg": "Success"
  },
  {
    "errorCode": 10003,
    "errorMsg": "Machine ID does not exist."
  },
  {
    "errorCode": 142,
    "errorMsg": "Path exists."
  }
]
```

The response body contains the results for each request in the same order as the request body.

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| errorCode | Int32 | (Required) Error code. `0` = success. |
| errorMsg | String | (Required) Error message |

---

## 2.6.8 deleteFile — Delete Machine File

Deletes a specified file from the machine.

```
GET  /api/cnc/deleteFile?machineID=MACHINEID&fileName=FILENAME&dirAtCNC=DIRATCNC&subDir=SUBDIR
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| fileName | String | (Required) Target file name. Refer to file names from `readProgramList` or `readAllPrograms`. Some systems (e.g., GSK, Siemens) require the file extension. |
| dirAtCNC | String | Target directory path. If not specified, defaults to the default root directory path (see Table 55). |
| subDir | String | Target subdirectory path. Combined with root if `dirAtCNC` is not provided. Ignored if both are provided. |

**Response Example**

```json
{
  "errorCode": 0,
  "errorMsg": "Success"
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| errorCode | Int32 | (Required) Error code. `0` = success. |
| errorMsg | String | (Required) Error message |

---

## 2.6.9 batchDeleteFile — Batch Delete Machine Files

This interface is the batch version of section 2.6.8 `deleteFile`. By specifying multiple targets in the request body, files on different machines can be deleted in a single call.

```
POST  /api/cnc/batchDeleteFile
```

**Request Body Example** (application/json)

```json
[
  { "machineID": "1010", "fileName": "08000" },
  { "machineID": "1011", "fileName": "sample.NC", "DirAtCNC": "dir1" },
  { "machineID": "1012", "fileName": "sample.NC", "SubDir": "Dir/Prog" }
]
```

Request parameters are the same as section 2.6.8 `deleteFile`.

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| fileName | String | (Required) Target file name. Refer to file names from `readProgramList` or `readAllPrograms`. Some systems require the file extension. |
| dirAtCNC | String | Target directory path. If not specified, defaults to the default root directory path (see Table 55). |
| subDir | String | Target subdirectory path. Combined with root if `dirAtCNC` is not provided. Ignored if both are provided. |

**Response Example**

```json
[
  {
    "errorCode": 0,
    "errorMsg": "Success"
  },
  {
    "errorCode": 10003,
    "errorMsg": "Machine ID does not exist."
  },
  {
    "errorCode": 158,
    "errorMsg": "Path is not found."
  }
]
```

The response contains results for each request in order.

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| errorCode | Int32 | (Required) Error code. `0` = success. |
| errorMsg | String | (Required) Error message |

---

## 2.6.10 lockFileByRange — Lock/Unlock Machine Program Editing

Currently supports locking/unlocking program editing for Mitsubishi and Fanuc systems, for program numbers in the ranges 8000–8999, 9000–9999, and 8000–9999. Some systems prevent modification after locking, but the program may still be deleted from the machine side.

```
GET  /api/cnc/lockFileByRange?machineID=MACHINEID&isLock=ISLOCK&lockStart=LOCKSTART&lockEnd=LOCKEND
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| isLock | Bool | (Required) Target lock state. `true` = lock, `false` = unlock. |
| lockStart | Int32 | (Required) Starting program number of the lock/unlock range |
| lockEnd | Int32 | (Required) Ending program number of the lock/unlock range |

**Response Example**

```json
{
  "errorCode": 0,
  "errorMsg": "Success"
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| errorCode | Int32 | (Required) Error code. `0` = success. |
| errorMsg | String | (Required) Error message |

---

## 2.6.11 createDir — Create Machine Directory

```
GET  /api/cnc/createDir?machineID=MACHINEID&dirName=DIRNAME&dirAtCNC=DIRATCNC&subDir=SUBDIR
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| dirName | String | (Required) Name of the directory to create |
| dirAtCNC | String | Parent directory path. If not specified, defaults to the default root directory path (see Table 55). |
| subDir | String | Parent subdirectory path. Combined with root if `dirAtCNC` is not provided. Ignored if both are provided. |

**Response Example**

```json
{
  "errorCode": 0,
  "errorMsg": "Success"
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| errorCode | Int32 | (Required) Error code. `0` = success. |
| errorMsg | String | (Required) Error message |

**Table 57 — Create/Delete Directory Support by CNC System**

| File Server Type | System (Model) | Create/Delete Directory |
|-----------------|----------------|-------------------------|
| Machine Storage | Brother [S Series] | Yes |
| Machine Storage | Delta [Universal] | Yes |
| Machine Storage | Fanuc [0i-D, 0i-F, 30i, 31i, 32i, 35i, Power Motion i-A] | Yes |
| Machine Storage | GSK [All Models] | No |
| Machine Storage | Haas [Universal, MT-CONNECT] | Yes |
| Machine Storage | Heidenhain [All Models] | Yes |
| Machine Storage | Mitsubishi [M70/M700 L, M70/M700 M, M80/M800 L, M80/M800 M] | ★ CF card / SD card only (path: IC1) |
| Machine Storage | Mock (Simulated Machine) | Yes |
| Machine Storage | Okuma [All Models] | Yes |
| Machine Storage | Rexroth [OPC UA] | Yes |
| Machine Storage | Siemens [All Models] | Yes |
| Machine Storage | Other models supporting program transfer | No |
| FTP Server | | Yes |
| Shared Folder | | Yes |
| Shared Folder (Win XP) | | Yes |
| Wireless Transfer Box | | Yes |
| Gateway File Server | | Yes |

Yes: Supported; No: Not supported

---

## 2.6.12 deleteDir — Delete Machine Directory

Only empty directories can be deleted. Delete all files and subdirectories within the directory before calling this interface.

```
GET  /api/cnc/deleteDir?machineID=MACHINEID&dirName=DIRNAME&dirAtCNC=DIRATCNC&subDir=SUBDIR
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| dirName | String | (Required) Name of the directory to delete |
| dirAtCNC | String | Parent directory path. If not specified, defaults to the default root directory path (see Table 55). |
| subDir | String | Parent subdirectory path. Combined with root if `dirAtCNC` is not provided. Ignored if both are provided. |

**Response Example**

```json
{
  "errorCode": 0,
  "errorMsg": "Success"
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| errorCode | Int32 | (Required) Error code. `0` = success. |
| errorMsg | String | (Required) Error message |

For supported CNC systems, refer to Table 57 — Create/Delete Directory Support by CNC System.

---

## 2.6.13 backupFiles — Backup Machine Files

This interface packages the specified files, or all files within a directory (including subdirectories and their contents), into a ZIP archive and returns it as a stream. The ZIP archive structure is: first level — `"BackupFiles_<date-time>"`, second level — one folder per machine named `"<machineID>_<machineName>"`, inside which the specified files and directories are preserved in their original folder structure.

```
POST  /api/cnc/backupFiles
```

**Request Body Example** (application/json)

```json
[
  { "machineID": "1010", "fileName": "08000" },
  { "machineID": "1011", "DirAtCNC": "dir1", "includeSubDir": false },
  { "machineID": "1012", "fileName": "sample.NC", "SubDir": "Dir/Prog" }
]
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| fileName | String | Target file name. Refer to file names from `readProgramList` or `readAllPrograms`. Some systems require the file extension. If `fileName` is not provided, all files in the directory specified by `dirAtCNC` or `subDir` are backed up. |
| dirAtCNC | String | Target directory path. If not specified, defaults to the default root directory path (see Table 55). |
| subDir | String | Target subdirectory path. Combined with root if `dirAtCNC` is not provided. Ignored if both are provided. |
| includeSubDir | Bool | When `fileName` is not specified (backing up an entire directory), if `true`, all files in subdirectories are also included. Default is `true`. |

**Response Example** (`application/octet-stream`)

```
PK gx BackupFiles_2024.03.07.12.04.46…
```

The response body contains the ZIP archive delivered as a stream.

If any operation in the request fails, the task is aborted and the error for that request is returned, e.g.:

```json
{
  "errorCode": 10003,
  "errorMsg": "Machine ID does not exist.",
  "statusMsg": "Invalid MachineID (1011)"
}
```

---

## 2.6.14 selectProgram — Select Program

Selects the specified program as the main program on the machine.

```
GET  /api/cnc/selectProgram?machineID=MACHINEID&fileName=FILENAME&dirAtCNC=DIRATCNC&subDir=SUBDIR
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| fileName | String | (Required) Target file name. Refer to file names from `readProgramList` or `readAllPrograms`. Some systems require the file extension. |
| dirAtCNC | String | Target directory path. If not specified, defaults to the default root directory path (see Table 55). |
| subDir | String | Target subdirectory path. Combined with root if `dirAtCNC` is not provided. Ignored if both are provided. |

**Response Example**

```json
{
  "errorCode": 0,
  "errorMsg": "Success"
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| errorCode | Int32 | (Required) Error code. `0` = success. |
| errorMsg | String | (Required) Error message |

**Supported Devices**

| System (Model) | Notes |
|----------------|-------|
| Brother [All Models] | Machine must be in Auto Run or Run-in-Edit mode; no program may be currently running. |
| Fanuc [0i-D, 0i-F, 30i, 31i, 32i, 35i, Power Motion i-A] | Machine must be in Auto or Edit mode. |
| Mock (Simulated Machine) | Always returns SUCCESS but does not change the current program. |

---

## 2.6.15 readAllPrograms — Browse All Files

Searches for all program files in the specified directory on the machine (including subdirectories) and returns the file names and their directory paths.

```
GET  /api/cnc/readAllPrograms?machineID=MACHINEID&dirAtCNC=DIRATCNC&subDir=SUBDIR
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| dirAtCNC | String | Target directory path. If not specified, defaults to the default root directory path (see Table 55). |
| subDir | String | Target subdirectory path. Combined with root if `dirAtCNC` is not provided. Ignored if both are provided. |

**Response Example**

```json
{
  "programs": [
    {
      "dirAtCNC": "/",
      "fileName": "SAMPLE"
    },
    {
      "dirAtCNC": "1",
      "fileName": "sample1.nc"
    },
    {
      "dirAtCNC": "1/1",
      "fileName": "sample2.nc"
    }
  ]
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| programs | Object[] | (Required) Array of program file objects |
| fileName | String | Program file name. Some systems (e.g., GSK, Siemens) include the file extension. |
| dirAtCNC | String | Directory path where the program file is located |

---

## 2.6.16 searchFile — Search for a Machine File

Searches for a specified file name in the given directory (including subdirectories) and returns the path of the directory containing the file, along with all files and subdirectories in that directory.

```
GET  /api/cnc/searchFile?machineID=MACHINEID&fileName=FILENAME&dirAtCNC=DIRATCNC&subDir=SUBDIR
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| fileName | String | (Required) Target file name. Refer to file names from `readProgramList` or `readAllPrograms`. Some systems require the file extension. |
| dirAtCNC | String | Search root directory path. If not specified, defaults to the default root directory path (see Table 55). |
| subDir | String | Search root subdirectory path. Combined with root if `dirAtCNC` is not provided. Ignored if both are provided. |

**Response Example**

```json
{
  "dirAtCNC": "Dir/Prog",
  "programs": [
    "1111",
    "2322",
    "3222"
  ],
  "subDirs": [
    "dir1",
    "dir2"
  ]
}
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| dirAtCNC | String | Directory path where the target file was found |
| programs | String[] | List of programs (files) in the directory containing the target file |
| subDirs | String[] | List of subdirectories in the directory containing the target file |

---

## 2.7 Data Analysis Interface

The data analysis interface is used to retrieve data analysis results for a target machine or machine group within a specified time range.

Before using the data analysis interface, the gateway local cache must be enabled (see the *User Manual*, section 5.2.1 Settings — Advanced Options) to allow machine status history data to be saved locally on the gateway.

Using the data analysis interface requires specifying a start timestamp and an end timestamp. The maximum range between them is 31 days. The maximum local retention period is 365 days; therefore, the start time cannot be earlier than 365 days before the current time.

If the current timestamp is less than the specified end timestamp, the current timestamp is automatically used as the end timestamp.

If the gateway did not receive machine or machine group data for a period (data gap), the data returned by this interface may not match actual conditions. Common causes of data gaps include: the gateway local cache is not enabled, the corresponding automatic data collection task is not enabled, the gateway lost power, the gateway network was interrupted, and the machine being offline.

---

## 2.7.1 Machine Data Analysis

Machine data analysis is used to retrieve data analysis for a target machine within a specified time range. Base URL: `/api/analysis`.

### 2.7.1.1 oee — Machine OEE Data Analysis

Retrieves machine OEE statistics for each grouping interval within the specified time range.

```
GET  /api/analysis/oee?machineID=MACHINEID&startUnix=STARTUNIX&endUnix=ENDUNIX&interval=INTERVAL
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| startUnix | Int64 | (Required) Start timestamp [seconds] |
| endUnix | Int64 | (Required) End timestamp [seconds] |
| interval | Int32 | Grouping interval [seconds]. If not specified, there is only one grouping interval. |

**Response Example**

```json
[
  {
    "machineName": "Simulated Machine 1",
    "startTime": "2022-04-28T14:30:00Z",
    "endTime": "2022-04-28T15:30:00Z",
    "availability": 83.33333,
    "offTime": 100,
    "waitTime": 200,
    "emergencyTime": 300,
    "autoRunTime": 3000,
    "manualTime": 0.0
  },
  {
    "machineName": "Simulated Machine 1",
    "startTime": "2022-04-28T15:30:00Z",
    "endTime": "2022-04-28T16:30:00Z",
    "availability": 0.0,
    "offTime": 0,
    "waitTime": 3600,
    "emergencyTime": 0,
    "autoRunTime": 0,
    "manualTime": 0
  }
]
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineName | String | (Required) Machine name, set in the Add/Edit Device window on the Machine Configuration page. |
| startTime | String | (Required) Grouping interval start time (UTC) |
| endTime | String | (Required) Grouping interval end time (UTC) |
| availability | Float | (Required) Availability [%] |
| offTime | Int64 | (Required) Off or offline time [seconds] |
| waitTime | Int64 | (Required) Wait time [seconds] |
| emergencyTime | Int64 | (Required) Emergency stop time [seconds] |
| autoRunTime | Int64 | (Required) Auto run time [seconds] |
| manualTime | Int64 | (Required) Setup time [seconds] |

> Note: For Machine OEE data descriptions, see the *User Manual*, section 6.1.1 Machine OEE Data. If status data is missing for a period between the start and end times, that period is treated as off or offline.

---

### 2.7.1.2 alarm — Machine Alarm Data Analysis

Retrieves the alarm history for the machine within the specified time range.

```
GET  /api/analysis/alarm?machineID=MACHINEID&startUnix=STARTUNIX&endUnix=ENDUNIX
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| startUnix | Int64 | (Required) Start timestamp [seconds] |
| endUnix | Int64 | (Required) End timestamp [seconds] |

**Response Example**

```json
[
  {
    "machineName": "Simulated Machine 1",
    "startTime": "2023-06-16T16:00:00Z",
    "endTime": "2023-06-16T16:00:10Z",
    "alarmMsg": "00:00 ALARM 1",
    "alarmLevel": "WRN"
  },
  {
    "machineName": "Simulated Machine 1",
    "startTime": "2023-06-16T16:00:00Z",
    "endTime": "2023-06-16T16:00:10.001Z",
    "alarmMsg": "00:00 ALARM 2",
    "alarmLevel": "WRN"
  },
  {
    "machineName": "Simulated Machine 1",
    "startTime": "2023-06-16T16:01:00.008Z",
    "endTime": "2023-06-16T16:01:50.019Z",
    "alarmMsg": "00:01 ALARM 1",
    "alarmLevel": "WRN"
  }
]
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineName | String | (Required) Machine name, set in the Add/Edit Device window on the Machine Configuration page. |
| startTime | String | (Required) Alarm start time (UTC) |
| endTime | String | (Required) Alarm end time (UTC) |
| alarmMsg | String | (Required) Alarm content |
| alarmLevel | String | (Required) Alarm level. Three levels in descending priority: Error (ERR), Warning (WRN), Information (INF). Refer to *User Manual* section 5.5.7 Alarm Monitoring Settings to assign levels using keywords and filter alarms below the minimum level. Alarms without an assigned level default to Warning (WRN). |

> Note: The period from alarm activation to alarm clearance constitutes one alarm record, including its start time, end time, alarm content, and alarm level. If an alarm was already active before the start timestamp and has not been cleared, the start time of that alarm record is the time corresponding to the start timestamp. If an alarm has not been cleared at the end timestamp, the end time is the time corresponding to the end timestamp. If alarm data is missing between the start and end times, no alarms are assumed to have occurred during that missing period.

---

### 2.7.1.3 count — Machine Count Data Analysis

Retrieves the cumulative machining count for each grouping interval within the specified time range.

```
GET  /api/analysis/count?machineID=MACHINEID&startUnix=STARTUNIX&endUnix=ENDUNIX&interval=INTERVAL
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| startUnix | Int64 | (Required) Start timestamp [seconds] |
| endUnix | Int64 | (Required) End timestamp [seconds] |
| interval | Int32 | Grouping interval [seconds]. If not specified, there is only one grouping interval. |

**Response Example**

```json
[
  {
    "machineName": "Simulated Machine 1",
    "startTime": "2022-04-28T14:30:00Z",
    "endTime": "2022-04-28T15:30:00Z",
    "count": 96
  },
  {
    "machineName": "Simulated Machine 1",
    "startTime": "2022-04-28T15:30:00Z",
    "endTime": "2022-04-28T16:30:00Z",
    "count": 0
  }
]
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineName | String | (Required) Machine name, set in the Add/Edit Device window on the Machine Configuration page. |
| startTime | String | (Required) Grouping interval start time (UTC) |
| endTime | String | (Required) Grouping interval end time (UTC) |
| count | Int32 | (Required) Cumulative machining count; the difference between `cumulativeCount` at the beginning and end of the grouping interval |

---

### 2.7.1.4 overall — Machine Overall Data Analysis

Retrieves comprehensive data for each grouping interval within the specified time range, combining OEE analysis (section 2.7.1.1) and count analysis (section 2.7.1.3).

```
GET  /api/analysis/overall?machineID=MACHINEID&startUnix=STARTUNIX&endUnix=ENDUNIX&interval=INTERVAL
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| startUnix | Int64 | (Required) Start timestamp [seconds] |
| endUnix | Int64 | (Required) End timestamp [seconds] |
| interval | Int32 | Grouping interval [seconds]. If not specified, there is only one grouping interval. |

**Response Example**

```json
[
  {
    "machineName": "Simulated Machine 1",
    "startTime": "2022-04-28T14:30:00Z",
    "endTime": "2022-04-28T15:30:00Z",
    "count": 96,
    "availability": 83.33333,
    "offTime": 100,
    "waitTime": 200,
    "emergencyTime": 300,
    "autoRunTime": 3000,
    "manualTime": 0.0
  },
  {
    "machineName": "Simulated Machine 1",
    "startTime": "2022-04-28T15:30:00Z",
    "endTime": "2022-04-28T16:30:00Z",
    "count": 0,
    "availability": 0.0,
    "offTime": 0,
    "waitTime": 3600,
    "emergencyTime": 0,
    "autoRunTime": 0,
    "manualTime": 0
  }
]
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineName | String | (Required) Machine name |
| startTime | String | (Required) Grouping interval start time (UTC) |
| endTime | String | (Required) Grouping interval end time (UTC) |
| count | Int32 | (Required) Cumulative machining count |
| availability | Float | (Required) Availability [%] |
| offTime | Int64 | (Required) Off or offline time [seconds] |
| waitTime | Int64 | (Required) Wait time [seconds] |
| emergencyTime | Int64 | (Required) Emergency stop time [seconds] |
| autoRunTime | Int64 | (Required) Auto run time [seconds] |
| manualTime | Int64 | (Required) Setup time [seconds] |

---

### 2.7.1.5 cycle — Machine Cycle Time Data Analysis

Retrieves cycle time data for the machine within the specified time range.

```
GET  /api/analysis/cycle?machineID=MACHINEID&startUnix=STARTUNIX&endUnix=ENDUNIX
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| startUnix | Int64 | (Required) Start timestamp [seconds] |
| endUnix | Int64 | (Required) End timestamp [seconds] |

**Response Example**

```json
[
  {
    "machineName": "Simulated Machine 1",
    "startTime": "2025-05-23T06:35:44.046Z",
    "endTime": "2025-05-23T06:36:25.046Z",
    "lastCycleTime": 41,
    "mainPrgmName": "06495",
    "machineID": "1"
  },
  {
    "machineName": "Simulated Machine 1",
    "startTime": "2025-05-23T06:36:25.072Z",
    "endTime": "2025-05-23T06:36:56.072Z",
    "lastCycleTime": 31,
    "mainPrgmName": "06495",
    "machineID": "1"
  }
]
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineName | String | (Required) Machine name, set in the Add/Edit Device window on the Machine Configuration page. |
| startTime | String | (Required) Cycle start time (UTC) |
| endTime | String | (Required) Cycle end time (UTC) |
| lastCycleTime | Int32 | (Required) Cycle duration [seconds]; only auto run time is counted. |
| mainPrgmName | String | (Required) Main program name executed during this cycle |
| machineID | String | Machine machineID |

---

## 2.7.2 Machine Group Data Analysis

Machine group data analysis retrieves data analysis for target machines or machine groups within a specified time range. Base URL: `/api/group-analysis`. Replace the machine identifier `machineID` with the machine group identifier `groupID`.

### 2.7.2.1 oee — Machine Group OEE Data Analysis

Retrieves the machine OEE data for all machines in the machine group, for each grouping interval within the specified time range.

```
GET  /api/group-analysis/oee?groupID=GROUPID&startUnix=STARTUNIX&endUnix=ENDUNIX&interval=INTERVAL
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| groupID | String | (Required) Target machine group identifier; see section 1.1.2 groupID — Machine Group Identifier |
| startUnix | Int64 | (Required) Start timestamp [seconds] |
| endUnix | Int64 | (Required) End timestamp [seconds] |
| interval | Int32 | Grouping interval [seconds]. If not specified, there is only one grouping interval. |

**Response Example**

```json
[
  {
    "machineID": "1010",
    "machineName": "Simulated Machine 1",
    "startTime": "2022-04-28T14:30:00Z",
    "endTime": "2022-04-28T15:30:00Z",
    "availability": 83.33333,
    "offTime": 100,
    "waitTime": 200,
    "emergencyTime": 300,
    "autoRunTime": 3000,
    "manualTime": 0.0
  },
  {
    "machineID": "1010",
    "machineName": "Simulated Machine 1",
    "startTime": "2022-04-28T15:30:00Z",
    "endTime": "2022-04-28T16:30:00Z",
    "availability": 0.0,
    "offTime": 0,
    "waitTime": 3600,
    "emergencyTime": 0,
    "autoRunTime": 0,
    "manualTime": 0
  },
  {
    "machineID": "1011",
    "machineName": "Simulated Machine 2",
    "startTime": "2022-04-28T14:30:00Z",
    "endTime": "2022-04-28T15:30:00Z",
    "availability": 80.55556,
    "offTime": 150,
    "waitTime": 250,
    "emergencyTime": 300,
    "autoRunTime": 2900,
    "manualTime": 0.0
  }
]
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Machine machineID; see section 1.1.1 machineID — Machine Identifier |
| machineName | String | (Required) Machine name, set in the Add/Edit Device window on the Machine Configuration page. |
| startTime | String | (Required) Grouping interval start time |
| endTime | String | (Required) Grouping interval end time |
| availability | Float | (Required) Availability [%] |
| offTime | Int64 | (Required) Off or offline time [seconds] |
| waitTime | Int64 | (Required) Wait time [seconds] |
| emergencyTime | Int64 | (Required) Emergency stop time [seconds] |
| autoRunTime | Int64 | (Required) Auto run time [seconds] |
| manualTime | Int64 | (Required) Setup time [seconds] |

---

### 2.7.2.2 alarm — Machine Group Alarm Data Analysis

Retrieves the alarm history for all machines in the machine group within the specified time range.

```
GET  /api/group-analysis/alarm?groupID=GROUPID&startUnix=STARTUNIX&endUnix=ENDUNIX
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| groupID | String | (Required) Target machine group identifier; see section 1.1.2 groupID — Machine Group Identifier |
| startUnix | Int64 | (Required) Start timestamp [seconds] |
| endUnix | Int64 | (Required) End timestamp [seconds] |

**Response Example**

```json
[
  {
    "machineID": "1010",
    "machineName": "Simulated Machine 1",
    "startTime": "2023-06-16T16:00:00Z",
    "endTime": "2023-06-16T16:00:10Z",
    "alarmMsg": "00:00 ALARM 1",
    "alarmLevel": "WRN"
  },
  {
    "machineID": "1010",
    "machineName": "Simulated Machine 1",
    "startTime": "2023-06-17T15:59:48.105Z",
    "endTime": "2023-06-17T16:00:00Z",
    "alarmMsg": "23:59 ALARM 2",
    "alarmLevel": "WRN"
  },
  {
    "machineID": "1011",
    "machineName": "Simulated Machine 2",
    "startTime": "2023-06-16T16:00:00.399Z",
    "endTime": "2023-06-16T16:00:30.395Z",
    "alarmMsg": "00:00 ALARM 1",
    "alarmLevel": "WRN"
  }
]
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| machineName | String | Machine name, set in the Add/Edit Device window on the Machine Configuration page. |
| startTime | String | (Required) Alarm start time (UTC) |
| endTime | String | (Required) Alarm end time (UTC) |
| alarmMsg | String | (Required) Alarm content |
| alarmLevel | String | (Required) Alarm level. If no alarms, returns an empty Array. Three levels in descending priority: Error (ERR), Warning (WRN), Information (INF). Alarms without an assigned level default to Warning (WRN). |

---

### 2.7.2.3 count — Machine Group Count Data Analysis

Retrieves the machining count data for all machines in the machine group, for each grouping interval within the specified time range.

```
GET  /api/group-analysis/count?groupID=GROUPID&startUnix=STARTUNIX&endUnix=ENDUNIX&interval=INTERVAL
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| groupID | String | (Required) Target machine group identifier; see section 1.1.2 groupID — Machine Group Identifier |
| startUnix | Int64 | (Required) Start timestamp [seconds] |
| endUnix | Int64 | (Required) End timestamp [seconds] |
| interval | Int32 | Grouping interval [seconds]. If not specified, there is only one grouping interval. |

**Response Example**

```json
[
  {
    "machineID": "1010",
    "machineName": "Simulated Machine 1",
    "startTime": "2022-04-28T14:30:00Z",
    "endTime": "2022-04-28T15:30:00Z",
    "count": 96
  },
  {
    "machineID": "1010",
    "machineName": "Simulated Machine 1",
    "startTime": "2022-04-28T15:30:00Z",
    "endTime": "2022-04-28T16:30:00Z",
    "count": 0
  },
  {
    "machineID": "1011",
    "machineName": "Simulated Machine 2",
    "startTime": "2022-04-28T14:30:00Z",
    "endTime": "2022-04-28T15:30:00Z",
    "count": 52
  }
]
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Machine machineID; see section 1.1.1 machineID — Machine Identifier |
| machineName | String | (Required) Machine name, set in the Add/Edit Device window on the Machine Configuration page. |
| startTime | String | (Required) Grouping interval start time |
| endTime | String | (Required) Grouping interval end time |
| count | Int32 | (Required) Cumulative machining count; the difference between `cumulativeCount` at the beginning and end of the specified time range |

---

### 2.7.2.4 overall — Machine Group Overall Data Analysis

Retrieves comprehensive data for all machines in the machine group, for each grouping interval within the specified time range.

```
GET  /api/group-analysis/overall?groupID=GROUPID&startUnix=STARTUNIX&endUnix=ENDUNIX&interval=INTERVAL
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| groupID | String | (Required) Target machine group identifier; see section 1.1.2 groupID — Machine Group Identifier |
| startUnix | Int64 | (Required) Start timestamp [seconds] |
| endUnix | Int64 | (Required) End timestamp [seconds] |
| interval | Int32 | Grouping interval [seconds]. If not specified, there is only one grouping interval. |

**Response Example**

```json
[
  {
    "machineID": "1010",
    "machineName": "Simulated Machine 1",
    "startTime": "2022-04-28T14:30:00Z",
    "endTime": "2022-04-28T15:30:00Z",
    "count": 96,
    "availability": 83.33333,
    "offTime": 100,
    "waitTime": 200,
    "emergencyTime": 300,
    "autoRunTime": 3000,
    "manualTime": 0.0
  },
  {
    "machineID": "1011",
    "machineName": "Simulated Machine 2",
    "startTime": "2022-04-28T14:30:00Z",
    "endTime": "2022-04-28T15:30:00Z",
    "count": 52,
    "availability": 80.55556,
    "offTime": 150,
    "waitTime": 250,
    "emergencyTime": 300,
    "autoRunTime": 2900,
    "manualTime": 0.0
  }
]
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Machine machineID; see section 1.1.1 machineID — Machine Identifier |
| machineName | String | (Required) Machine name, set in the Add/Edit Device window on the Machine Configuration page. |
| startTime | String | (Required) Grouping interval start time |
| endTime | String | (Required) Grouping interval end time |
| count | Int32 | (Required) Cumulative machining count; the difference between `cumulativeCount` at the beginning and end of the specified time range |
| availability | Float | (Required) Availability [%] |
| offTime | Int64 | (Required) Off or offline time [seconds] |
| waitTime | Int64 | (Required) Wait time [seconds] |
| emergencyTime | Int64 | (Required) Emergency stop time [seconds] |
| autoRunTime | Int64 | (Required) Auto run time [seconds] |
| manualTime | Int64 | (Required) Setup time [seconds] |

---

### 2.7.2.5 cycle — Machine Group Cycle Time Data Analysis

Retrieves cycle time data for all machines in the machine group within the specified time range.

```
GET  /api/group-analysis/cycle?groupID=GROUPID&startUnix=STARTUNIX&endUnix=ENDUNIX
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| groupID | String | (Required) Target machine group identifier; see section 1.1.2 groupID — Machine Group Identifier |
| startUnix | Int64 | (Required) Start timestamp [seconds] |
| endUnix | Int64 | (Required) End timestamp [seconds] |

**Response Example**

```json
[
  {
    "machineName": "Simulated Machine 1",
    "startTime": "2025-05-23T06:35:44.046Z",
    "endTime": "2025-05-23T06:36:25.046Z",
    "lastCycleTime": 41,
    "mainPrgmName": "06495",
    "machineID": "1"
  },
  {
    "machineName": "Simulated Machine 1",
    "startTime": "2025-05-23T06:36:25.072Z",
    "endTime": "2025-05-23T06:36:56.072Z",
    "lastCycleTime": 31,
    "mainPrgmName": "06495",
    "machineID": "1"
  },
  {
    "machineName": "Simulated Machine 2",
    "startTime": "2025-05-23T07:51:50.777Z",
    "endTime": "2025-05-23T07:52:10.777Z",
    "lastCycleTime": 20,
    "mainPrgmName": "02228",
    "machineID": "2"
  }
]
```

**Response Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Machine machineID; see section 1.1.1 machineID — Machine Identifier |
| machineName | String | (Required) Machine name, set in the Add/Edit Device window on the Machine Configuration page. |
| startTime | String | (Required) Cycle start time (UTC) |
| endTime | String | (Required) Cycle end time (UTC) |
| lastCycleTime | Int32 | (Required) Cycle duration [seconds]; only auto run time is counted. |
| mainPrgmName | String | (Required) Main program name executed during this cycle |

---

## 2.8 Historical Data Interface

The historical data interface is used to retrieve historical data for a target machine or machine group within a specified time range. The base URL is `/api/db`.

Before using the historical data interface, the gateway local cache must be enabled (see the *User Manual*, section 5.2.1 Settings — Advanced Options) to allow historical data to be saved locally on the gateway.

Using the historical data interface requires specifying a start timestamp and an end timestamp. The maximum range between them is 31 days. The maximum local retention period is 365 days; therefore, the start time cannot be earlier than 365 days before the current time.

If the current timestamp is less than the specified end timestamp, the current timestamp is automatically used as the end timestamp.

If the gateway did not receive machine or machine group data for a period (data gap), the historical data returned by this interface may not match actual conditions. Common causes of data gaps include: the gateway local cache is not enabled, the corresponding automatic data collection task is not enabled, the gateway lost power, the gateway network was interrupted, and the machine being offline.

---

## 2.8.1 machine — Machine Historical Data

Retrieves historical data for a target machine within a specified time range.

```
GET  /api/db/machine?machineID=MACHINEID&type=TYPE&startUnix=STARTUNIX&endUnix=ENDUNIX
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| machineID | String | (Required) Target machine identifier; see section 1.1.1 machineID — Machine Identifier |
| type | String | (Required) Data type; see section 1.2 Data Description |
| startUnix | Int64 | (Required) Start timestamp [seconds] |
| endUnix | Int64 | (Required) End timestamp [seconds] |

**Example**

To retrieve the machine status history of the machine with machineID 1010 from 10:00 to 11:00 AM on March 1, 2024, with type=CNCStatus, use the following request:

```
/api/db/machine?machineID=1010&type=CNCStatus&startUnix=1709258400&endUnix=1709262000
```

If no historical data exists for the target machine in the specified time range, an empty array is returned:

```json
[]
```

If historical data exists, the data of the specified type is returned in JSON format:

```json
[
  {
    "cncStatus": "MANUAL_INC",
    "adjustedStatus": "MANUAL_INC",
    "alarmStatus": "ALARM",
    "alarmLevel": "WRN",
    "offTime": 2329,
    "waitTime": 3212,
    "emergencyTime": 232,
    "autoRunTime": 1336,
    "manualTime": 1232,
    "machineID": "2112",
    "time": "2024-03-01T02:22:11.442Z"
  },
  {
    "cncStatus": "MANUAL_INC",
    "adjustedStatus": "MANUAL_INC",
    "alarmStatus": "ALARM",
    "alarmLevel": "WRN",
    "offTime": 2329,
    "waitTime": 3212,
    "emergencyTime": 232,
    "autoRunTime": 1336,
    "manualTime": 1237,
    "machineID": "2112",
    "time": "2024-03-01T02:22:16.44Z"
  },
  ...
]
```

In the response, `machineID` is the machine's machineID (see section 1.1 Basic Description) and `time` is the data acquisition time. Other response parameters correspond to the `field` and `tag` contents of the matching `type` in section 1.2 Data Description.

---

## 2.8.2 group-machine — Historical Data for All Machines in a Group

Retrieves historical data for all machines in a target machine group within a specified time range.

```
GET  /api/db/group-machine?groupID=GROUPID&type=TYPE&startUnix=STARTUNIX&endUnix=ENDUNIX
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| groupID | String | (Required) Target machine group identifier; see section 1.1.2 groupID — Machine Group Identifier |
| type | String | (Required) Data type; see section 1.2 Data Description |
| startUnix | Int64 | (Required) Start timestamp [seconds] |
| endUnix | Int64 | (Required) End timestamp [seconds] |

**Example**

To retrieve the machine status history of all machines in the machine group with groupID g1 from 10:00 to 11:00 AM on March 1, 2024, with type=CNCStatus, use the following request:

```
/api/db/group-machine?groupID=g1&type=CNCStatus&startUnix=1709258400&endUnix=1709262000
```

If no historical data exists in the specified time range, an empty array is returned:

```json
[]
```

If historical data exists, the data of the specified type is returned in JSON format:

```json
[
  {
    "cncStatus": "MANUAL_INC",
    "adjustedStatus": "MANUAL_INC",
    "alarmStatus": "ALARM",
    "alarmLevel": "WRN",
    "offTime": 2329,
    "waitTime": 3212,
    "emergencyTime": 232,
    "autoRunTime": 1336,
    "manualTime": 1232,
    "machineID": "2112",
    "time": "2024-03-01T02:22:11.442Z"
  },
  {
    "cncStatus": "MANUAL_INC",
    "adjustedStatus": "MANUAL_INC",
    "alarmStatus": "ALARM",
    "alarmLevel": "WRN",
    "offTime": 2329,
    "waitTime": 3212,
    "emergencyTime": 232,
    "autoRunTime": 1336,
    "manualTime": 1237,
    "machineID": "2112",
    "time": "2024-03-01T02:22:16.44Z"
  },
  ...
  {
    "cncStatus": "AUTO_RUN",
    "adjustedStatus": "AUTO_RUN",
    "alarmStatus": "NO_ALARM",
    "offTime": 12229,
    "waitTime": 12312,
    "emergencyTime": 2332,
    "autoRunTime": 52332,
    "manualTime": 6132,
    "machineID": "3",
    "time": "2024-03-01T02:19:29.308Z"
  },
  ...
]
```

In the response, `machineID` is the machine's machineID (see section 1.1 Basic Description) and `time` is the data acquisition time. Other response parameters correspond to the `field` and `tag` contents of the matching `type` in section 1.2 Data Description.

---

## 2.8.3 query — Query Historical Data

Queries historical data that meets specified conditions, similar to a database query command.

```
POST  /api/db/query?groupID=GROUPID&type=TYPE&startUnix=STARTUNIX&endUnix=ENDUNIX
```

**Request Body Example (application/json)**

Query data of type "PLC" with timestamps between 1704892831–1708893358, machineID equal to simulated machine 1, and tag equal to Ttag1 or Ttag2, returning the 2 oldest records (ascending by time, limited to 2):

```json
{
  "type": "PLC",
  "startUnix": 1704892831,
  "endUnix": 1708893358,
  "filters": [
    {
      "key": "machineID",
      "operator": "equal",
      "value": "Simulated Machine 1"
    },
    {
      "key": "tag",
      "operator": "in",
      "value": [
        "Ttag1",
        "Ttag2"
      ]
    }
  ],
  "orderBy": {
    "field": "time",
    "isDesc": false
  },
  "limit": 2
}
```

**Request Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| type | String | (Required) Data type; see section 1.2 Data Description |
| startUnix | Int64 | (Required) Start timestamp [seconds] |
| endUnix | Int64 | (Required) End timestamp [seconds] |
| filters | Object[] | (Required) Filter conditions |
| key | String | (Required) Key |
| operator | String | (Required) Comparison operator |
| value | Object | (Required) Comparison value; type is String or String[] |
| orderBy | Object | (Required) Sort method |
| field | String | (Required) Sort field |
| isDesc | Bool | (Required) true: descending; false: ascending |
| limit | Int32 | (Required) Maximum number of results |

**Response Example**

```json
[
  {
    "data": [
      255
    ],
    "tag": "Ttag1",
    "machineID": "Simulated Machine 1",
    "time": "2025-04-28T06:30:19.827Z"
  },
  {
    "data": [
      2147483647
    ],
    "tag": "Ttag2",
    "machineID": "Simulated Machine 1",
    "time": "2025-04-28T06:30:19.848Z"
  }
]
```

In the response, `machineID` is the machine's machineID (see section 1.1 Basic Description) and `time` is the data acquisition time. Other response parameters correspond to the `field` and `tag` contents of the matching `type` in section 1.2 Data Description.

---

# Chapter II — HTTP Communication (Continued)

## 2.9 Gateway Configuration Interfaces

The gateway configuration interfaces are used to command the gateway to perform specific operations. The base path is `/api/config`.

---

## 2.9.1 Global Configuration Interfaces

### 2.9.1.1 gateway-info — Get Gateway Information

This interface has no request parameters.

```
GET  /api/config/gateway-info
```

**Response Example**

```json
{
  "hid": "XXXXXX-XXXXXX-XXXXXX-XXXXXX",
  "uid": "XXXXXX-XXXXXX-XXXXXX-XXXXXX",
  "alias": "iotgw"
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| hid | String | (Required) Gateway hardware ID |
| uid | String | (Required) Gateway UID |
| alias | String | (Required) Gateway name |

---

### 2.9.1.2 settings — Get Global Gateway Settings

This interface has no request parameters.

```
GET  /api/config/settings
```

**Response Example**

```json
{
  "version": "1.19.3.102",
  "enableLocalCaching": true,
  "enableRemoteService": true,
  "enableLan2Setup": false,
  "timeServerAddress": "ntp1.aliyun.com;ntp2.aliyun.com;ntp3.aliyun.com;ntp4.aliyun.com;"
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| version | String | (Required) Settings version |
| enableLocalCaching | Bool | (Required) Enable local cache |
| enableRemoteService | Bool | (Required) Enable remote assistance |
| enableLan2Setup | Bool | (Required) Enable LAN2 configuration |
| timeServerAddress | String | (Required) Time server address |

---

### 2.9.1.3 update-settings — Modify Global Gateway Settings

```
POST  /api/gateway/update-settings
```

**Request Body Example** (application/json)

```json
{
  "enableLocalCaching": true,
  "enableRemoteService": true,
  "enableLan2Setup": false,
  "timeServerAddress": "ntp1.aliyun.com;ntp2.aliyun.com;ntp3.aliyun.com;ntp4.aliyun.com;"
}
```

| Request Parameter | Type | Description |
|-------------------|------|-------------|
| enableLocalCaching | Bool | Enable local cache |
| enableRemoteService | Bool | Enable remote assistance |
| enableLan2Setup | Bool | Enable LAN2 configuration |
| timeServerAddress | String | Time server address |

**Response Example**

```json
{
  "version": "1.19.3.102",
  "enableLocalCaching": true,
  "enableRemoteService": true,
  "enableLan2Setup": false,
  "timeServerAddress": "ntp1.aliyun.com;ntp2.aliyun.com;ntp3.aliyun.com;ntp4.aliyun.com;"
}
```

Response parameters are the same as request parameters, with the addition of `version` (settings version).

---

### 2.9.1.4 security — Get Global Security Settings

This interface has no request parameters.

```
GET  /api/config/security
```

**Response Example**

```json
{
  "enable": true,
  "protectedApi": "exact,/cnc/writeOffsetData;exact,/cnc/writePlcData"
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| enable | Bool | (Required) Enable global security control |
| protectedApi | String | Protected APIs — APIs that no user is permitted to call. Not returned if not configured. See Table 58 for API command format. |

**Table 58 — API Command Format**

| Command Type | `exact` | `prefix` |
|-------------|---------|---------|
| Description | Specifies one exact API path | Specifies all API paths sharing a given prefix |
| Example | `exact,/cnc/writePlcData` | `prefix,/db` |

- API paths begin after `/api`. The value `"prefix,/"` matches all API paths.
- Multiple API commands are separated by `;`.

---

### 2.9.1.5 update-security — Modify Global Security Settings

```
POST  /api/gateway/update-security
```

**Request Body Example** (application/json)

```json
{
  "enable": true,
  "protectedApi": "exact,/cnc/writeOffsetData;exact,/cnc/writePlcData"
}
```

| Request Parameter | Type | Description |
|-------------------|------|-------------|
| enable | Bool | (Required) Enable global security control |
| protectedApi | String | Protected APIs. See Table 58 for API command format. |

**Response Example**

```json
{
  "enable": true,
  "protectedApi": "exact,/cnc/writeOffsetData;exact,/cnc/writePlcData"
}
```

Response parameters are the same as request parameters.

---

## 2.9.2 User Configuration Interfaces

### 2.9.2.1 user — Get User Settings

This interface has no request parameters. Returns the settings for the currently authenticated user.

```
GET  /api/config/user
```

**Response Example**

```json
{
  "id": 0,
  "username": "admin",
  "isAdmin": true
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| id | Int32 | (Required) Database identifier; see section 1.1.4 ID — Database Identifier |
| username | String | (Required) Username |
| isAdmin | Bool | (Required) Whether the user has administrator privileges |

---

### 2.9.2.2 users — Get All User Settings

This interface has no request parameters. Returns settings for all users.

```
GET  /api/config/users
```

**Response Example**

```json
[
  {
    "id": 0,
    "username": "admin",
    "isAdmin": true
  },
  {
    "id": 1,
    "username": "user1",
    "isAdmin": false
  }
]
```

Response parameters are the same as section 2.9.2.1.

---

### 2.9.2.3 create-user — Create New User

The new user's initial password is the same as the username.

```
POST  /api/config/create-user
```

**Request Body Example** (application/json)

```json
{
  "username": "user2",
  "isAdmin": false
}
```

| Request Parameter | Type | Description |
|-------------------|------|-------------|
| username | String | (Required) Username |
| isAdmin | Bool | Whether the user has administrator privileges. Defaults to `true`. |

**Response Example**

```json
{
  "id": 2,
  "username": "user2",
  "isAdmin": false
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| id | Int32 | (Required) Database identifier |
| username | String | (Required) Username |
| isAdmin | Bool | (Required) Whether the user has administrator privileges |

---

### 2.9.2.4 update-user — Modify User Settings

When the username is changed, the password is not affected.

```
POST  /api/config/update-user
```

**Request Body Example** (application/json)

```json
{
  "id": 2,
  "username": "user2",
  "isAdmin": false
}
```

| Request Parameter | Type | Description |
|-------------------|------|-------------|
| id | Int32 | (Required) Database identifier |
| username | String | Username. Not modified if omitted. |
| isAdmin | Bool | Whether the user has administrator privileges. Not modified if omitted. |

**Response Example**

```json
{
  "id": 2,
  "username": "user2",
  "isAdmin": false
}
```

Response parameters are the same as section 2.9.2.3.

---

### 2.9.2.5 delete-user — Delete User

```
GET  /api/config/delete-user?id=ID
```

| Request Parameter | Type | Description |
|-------------------|------|-------------|
| id | Int32 | (Required) Database identifier |

**Response Example**

```json
{
  "errorCode": 0,
  "errorMsg": "Success"
}
```

---

### 2.9.2.6 user-security — Get User Security Settings

```
GET  /api/config/user-security?id=ID
```

| Request Parameter | Type | Description |
|-------------------|------|-------------|
| id | Int32 | (Required) Database identifier |

**Response Example**

```json
{
  "id": 2,
  "secretKey": "sk-XXXXXXXXXX",
  "authorizedApis": "prefix,/cnc;prefix,/db;prefix,/analysis;prefix,/group-analysis;prefix,/config;prefix,/core;prefix,/gateway;prefix,/auth;"
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| id | Int32 | (Required) Database identifier |
| secretKey | String | Secret key, prefixed with `sk-`. Not returned if not configured. |
| authorizedApis | String | Authorized APIs — APIs the user is permitted to call. Not returned if not configured. See Table 58 for API command format. |

---

### 2.9.2.7 update-user-security — Modify User Security Settings

```
POST  /api/config/update-user-security
```

**Request Body Example** (application/json)

```json
{
  "id": 2,
  "secretKey": "Token",
  "authorizedApis": "prefix,/cnc;prefix,/db;prefix,/analysis;prefix,/group-analysis;prefix,/config;prefix,/core;prefix,/gateway;prefix,/auth;"
}
```

| Request Parameter | Type | Description |
|-------------------|------|-------------|
| id | Int32 | (Required) Database identifier |
| secretKey | String | Secret key, prefixed with `sk-` |
| authorizedApis | String | Authorized APIs. See Table 58 for API command format. |

**Response Example**

```json
{
  "id": 2,
  "secretKey": "Token",
  "authorizedApis": "prefix,/cnc;prefix,/db;prefix,/analysis;prefix,/group-analysis;prefix,/config;prefix,/core;prefix,/gateway;prefix,/auth;"
}
```

Response parameters are the same as request parameters.

---

## 2.9.3 Machine Configuration Interfaces

The machine configuration interfaces are used to get, create, modify, or delete machine configurations. For background on machine configuration, refer to section 5.3 Machine Configuration in the product manual.

**Table 59 — Machine Configuration Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| id | Int32 | Database identifier |
| machineType | String | Machine type. See Table 60 — machineType Values. |
| system | String | System |
| model | String | Model |
| name | String | Machine name |
| machineID | String | Machine identifier |
| slaveID | Int32 | Slave station identifier |
| ip | String | IP address |
| port | Int32 | Port number. `0` = use the device's default port. |
| isActive | Bool | Active status. `true` = active, `false` = inactive. |
| useDefaultMachineID | Bool | Use the default machine identifier |
| useDefaultSlaveID | Bool | Use the default slave station identifier |
| customAttributes | String | Custom attributes. Example: `{"attribute": value,...}` |
| username | String | Username. Required by some devices. |
| permission | String | Permission level. Required only for Delta CNC systems. Values: `NORMAL`, `USER_1`, `USER_2`, `MACHIN`, `SYSTEM`. Default: `NORMAL`. |
| password | String | Password. Required by some devices. |
| version | String | Version. Required by some devices. |
| connectionMode | String | Connection mode. Required by some devices. |
| encoding | String | Character encoding (e.g., `ASCII`, `UTF-8`, `GBK`). Default: `default` (auto-detect). |
| language | String | Alarm language. Required only for Siemens systems. Supported values: `English`, `Chinese`. Default: `Chinese`. |
| numberOfTasks | Int32 | Number of enabled tasks. Read-only. |
| taskAlarm | Bool | Alarm information task. `true` = enabled, `false` = disabled. |
| taskAlarmPrecond | String | Alarm task precondition. Not returned if not configured. |
| taskAlarmEnableCustomAlarm | Bool | Custom alarm. `true` = enabled. When enabled, replaces default alarms with custom alarms. |
| taskAlarmCustomAlarmStatusTag | String | Custom alarm `alarmStatus` tag. Enter the corresponding PLC data task result tag. |
| taskAlarmCustomAlarmMsgTag | String | Custom alarm `alarmMsg` tag. Enter the corresponding PLC data task result tag. |
| taskMachineStatus | Bool | Machine status task. `true` = enabled. |
| taskChannelMachineStatus | String | Machine status task target channels. Example: `"0;1-3"`. |
| taskMachineStatusPrecond | String | Machine status task precondition. Not returned if not configured. |
| taskMachineStatusEnableAdjustedManual | Bool | Machine status task setup-mode correction. `true` = enabled. |
| taskMachineStatusMaxManualPauseTime | Int32 | Machine status task maximum setup-mode pause time [seconds]. |
| taskMachineStatusEnableStatusConversion | Bool | Machine status task status conversion. `true` = enabled. |
| taskMachineStatusStatusConversionSettings | String | Machine status task: status to convert when condition is met. |
| taskMachineStatusEnableCustomStatus | Bool | Custom machine status. `true` = enabled. When enabled, replaces default status with custom status. |
| taskMachineStatusCustomStatusCNCStatusTag | String | Custom status `cncStatus` tag. Enter the corresponding PLC data task result tag. |
| taskMachineStatusCustomStatusAlarmStatusTag | String | Custom status `alarmStatus` tag. Enter the corresponding PLC data task result tag. |
| taskCount | Bool | Machining count task. `true` = enabled. |
| taskCountPrecond | String | Machining count task precondition. Not returned if not configured. |
| taskCountEnableCustomCount | Bool | Custom machining count. `true` = enabled. |
| taskCountCustomCountTag | String | Custom machining count tag. Enter the corresponding PLC data task result tag. |
| taskCurrentToolNo | Bool | Current tool number task. `true` = enabled. |
| taskChannelCurrentToolNo | String | Current tool number task target channels. |
| taskCurrentToolNoPrecond | String | Current tool number task precondition. Not returned if not configured. |
| taskEnergyConsumption | Bool | Energy consumption task. `true` = enabled. |
| taskEnergyConsumptionPrecond | String | Energy consumption task precondition. Not returned if not configured. |
| taskFeed | Bool | Feed task. `true` = enabled. |
| taskChannelFeed | String | Feed task target channels. |
| taskFeedPrecond | String | Feed task precondition. Not returned if not configured. |
| taskFeedAndSpindle | Bool | Feed and spindle task. `true` = enabled. |
| taskChannelFeedAndSpindle | String | Feed and spindle task target channels. |
| taskFeedAndSpindlePrecond | String | Feed and spindle task precondition. Not returned if not configured. |
| taskLaserPower | Bool | Laser power task. `true` = enabled. |
| taskLoad | Bool | Load data task. `true` = enabled. |
| taskChannelLoad | String | Load data task target channels. |
| taskLoadPrecond | String | Load data task precondition. Not returned if not configured. |
| taskLogHistory | Bool | Log history task. `true` = enabled. |
| taskLogHistoryPrecond | String | Log history task precondition. Not returned if not configured. |
| taskOverLoad | Bool | Overload monitoring task. `true` = enabled. |
| taskChannelOverLoad | String | Overload monitoring task target channels. |
| taskOverLoadPrecond | String | Overload monitoring task precondition. Not returned if not configured. |
| taskPlcData | Bool | PLC data task. `true` = enabled. |
| taskPlcDataSettings | String | PLC data task settings. |
| taskPosition | Bool | Axis position task. `true` = enabled. |
| taskChannelPosition | String | Axis position task target channels. |
| taskPositionPrecond | String | Axis position task precondition. Not returned if not configured. |
| taskCurrentProgramBlock | Bool | Current program block task. `true` = enabled. |
| taskCurrentProgramBlockPrecond | String | Current program block task precondition. Not returned if not configured. |
| taskProgramInfo | Bool | Program information task. `true` = enabled. |
| taskChannelProgramInfo | String | Program information task target channels. |
| taskProgramInfoPrecond | String | Program information task precondition. Not returned if not configured. |
| taskMachineTimeData | Bool | Machine time data task. `true` = enabled. |
| taskMachineTimeDataPrecond | String | Machine time data task precondition. Not returned if not configured. |
| taskToolLife | Bool | Tool life task. `true` = enabled. |
| taskToolLifePrecond | String | Tool life task precondition. Not returned if not configured. |
| taskToolLifeGroupNumIndex | String | Tool life task target tools in `{groupNum.indexInGroup}` format. |
| taskToolLifeIndex | String | Tool life task target tools in `{index}` format. |
| taskToolLifeToolNum | String | Tool life task target tools in `{toolNum}` format. |
| taskToolLifeToolNumOffsetNum | String | Tool life task target tools in `{toolNum.offsetNum}` format. |
| taskToolOffset | Bool | Tool offset task. `true` = enabled. |
| taskChannelToolOffset | String | Tool offset task target channels. |
| taskToolOffsetPrecond | String | Tool offset task precondition. Not returned if not configured. |
| taskToolOffsetToolNum | String | Tool offset task target tools in `{toolNum}` format. |
| taskToolOffsetOffsetNum | String | Tool offset task target tools in `{offsetNum}` format. |
| taskToolOffsetToolNumOffsetNum | String | Tool offset task target tools in `{toolNum.offsetNum}` format. |
| taskAlarmHistory | Bool | Alarm history task. `true` = enabled. |
| taskAlarmHistoryPrecond | String | Alarm history task precondition. Not returned if not configured. |
| taskCycleData | Bool | Cycle time data task. `true` = enabled. |
| taskCycleDataPrecond | String | Cycle time data task precondition. Not returned if not configured. |
| taskOEE | Bool | OEE monitoring task. `true` = enabled. |
| taskOEEPrecond | String | OEE monitoring task precondition. Not returned if not configured. |
| taskExternalPlcDataSettings | String | External PLC task settings. |
| parallelProcessing | Int | Number of parallel task processing threads. |
| fileServerType | String | File server type (program transfer). Values: `Machine Memory`, `Shared Folder`, `Shared Folder (Win XP)`, `FTP Server`, `Wireless Disk`, `Gateway File Server`. |
| fileServerAddress | String | Server address (program transfer). |
| fileServerPort | Int32 | Custom port (program transfer). |
| fileServerUsername | String | Username (program transfer). |
| fileServerPassword | String | Password (program transfer). |
| fileServerUCode | String | U-code (program transfer). |
| fileServerRootDir | String | Root directory (program transfer). |
| modbusSlaveID | Int32 | Slave ID (standard), required for MODBUS communication. Default: `1`. |
| modbusByteOrder4 | String | 32-bit type byte order, required for MODBUS communication. Values: `DCBA`, `BADC`, `ABCD`, `CDAB`. |
| modbusByteOrder8 | String | 64-bit type byte order, required for MODBUS communication. Values: `HGFEDCBA`, `BADCFEHG`, `ABCDEFGH`, `GHEFCDAB`. |
| modbusPLCAddress | Bool | Use PLC addressing, required for MODBUS communication. `true` = enabled. When enabled, the target address is offset by +1. |
| modbusReverseString | Bool | Reverse string, required for MODBUS communication. `true` = enabled. |

> **Note:** The interface only returns parameters that have been set. The `password` parameter is never returned regardless of whether it has been set. Supported tasks differ by `machineType`; the interface returns task-related parameters only for tasks supported by the machine type.

**Table 60 — machineType Values**

| machineType | Machine Type |
|-------------|-------------|
| CNC | CNC Machine |
| LASER | Laser Cutter |
| PLC | PLC |
| ROBOT | Robot |

---

### 2.9.3.1 machine — Get Machine Configuration

```
GET  /api/config/machine?ID=ID&machineID=MACHINEID
```

| Request Parameter | Type | Description |
|-------------------|------|-------------|
| id | Int32 | Database identifier |
| machineID | String | Target machine identifier. If both `id` and `machineID` are supplied, `machineID` is ignored. |

**Response Example**

```json
{
  "id": 1,
  "machineType": "CNC",
  "system": "Mock",
  "model": "General",
  "name": "Demo 1",
  "useDefaultMachineID": true,
  "machineID": "1",
  "useDefaultSlaveID": true,
  "slaveID": 1,
  "customAttributes": "",
  "encoding": "Default",
  "ip": "127.0.0.1",
  "port": 0,
  "isActive": true,
  "numberOfTasks": 20,
  "taskAlarm": true,
  "taskMachineStatus": true,
  "taskChannelMachineStatus": "0",
  "taskCount": true,
  "taskCurrentToolNo": true,
  "taskEnergyConsumption": true,
  "taskFeedAndSpindle": true,
  "taskChannelFeedAndSpindle": "0",
  "taskLoad": true,
  "taskChannelLoad": "0",
  "taskLogHistory": true,
  "taskOverLoad": true,
  "taskChannelOverLoad": "0",
  "taskPlcData": true,
  "taskPlcDataSettings": "R,0,10,Int16;Y,0,3,Bit0",
  "taskPosition": true,
  "taskChannelPosition": "0",
  "taskCurrentProgramBlock": true,
  "taskChannelCurrentProgramBlock": "0",
  "taskProgramInfo": true,
  "taskChannelProgramInfo": "0",
  "taskMachineTimeData": true,
  "taskToolLife": true,
  "taskToolOffset": true,
  "taskChannelToolOffset": "0",
  "taskToolOffsetToolNumOffsetNum": "1.2;3-5.1;7-9.1-3",
  "taskAlarmHistory": true,
  "taskCycleData": true,
  "taskOEE": true,
  "parallelProcessing": 1,
  "fileServerType": "Machine Memory",
  "fileServerRootDir": ""
}
```

Response parameters: see Table 59 — Machine Configuration Parameters.

---

### 2.9.3.2 machines — Get All Machine Configurations

This interface has no request parameters.

```
GET  /api/config/machines
```

Returns an array of all machine configurations. Response parameters: see Table 59 — Machine Configuration Parameters.

---

### 2.9.3.3 create-machine — Add Machine Configuration

```
POST  /api/config/create-machine
```

**Request Body Example**

```json
{
  "machineType": "PLC",
  "system": "Standard Protocols",
  "model": "Modbus TCP",
  "name": "150",
  "useDefaultMachineID": false,
  "machineID": "M150",
  "useDefaultSlaveID": true,
  "ip": "127.0.0.150",
  "isActive": true,
  "taskPlcData": true,
  "taskPlcDataSettings": "4x,100,2,Int32;0x,100,10,Bit0;"
}
```

Request parameters: see Table 59 — Machine Configuration Parameters. Note: do not include the database identifier `id` in the request body; the gateway assigns `id` automatically. The assigned `id` appears in the response body after successful creation.

Response parameters: see Table 59 — Machine Configuration Parameters.

---

### 2.9.3.4 update-machine — Modify Machine Configuration

Modifies the configuration of the specified machine and returns the updated configuration.

```
POST  /api/config/update-machine
```

**Request Body Example**

```json
{
  "id": 21,
  "name": "newName",
  "useDefaultMachineID": false,
  "machineID": "newMachineID",
  "useDefaultSlaveID": false,
  "slaveID": 192,
  "ip": "127.0.0.192",
  "port": 6000,
  "isActive": false,
  "taskPlcData": false
}
```

Request parameters: see Table 59 — Machine Configuration Parameters. Note: this interface uses `id` as the unique identifier; `id` must be included in the request body. The machine identifier `machineID` can also be changed through this interface.

Response parameters: see Table 59 — Machine Configuration Parameters.

---

### 2.9.3.5 delete-machine — Delete Machine Configuration

```
GET  /api/config/delete-machine?ID=ID&machineID=MACHINEID
```

| Request Parameter | Type | Description |
|-------------------|------|-------------|
| id | Int32 | Database identifier |
| machineID | String | Target machine identifier. If both `id` and `machineID` are supplied, `machineID` is ignored. |

**Response Example**

```json
{
  "errorCode": 0,
  "errorMsg": "Success"
}
```

---

### 2.9.3.6 batch-delete-machines — Batch Delete Machine Configurations

This interface is the batch version of section 2.9.3.5 `delete-machine`. By specifying a list of database IDs in the request body, multiple machines can be deleted in a single call.

```
POST  /api/config/batch-delete-machines
```

**Request Body Example** (application/json)

```json
{
  "ids": [2, 3, 4]
}
```

| Request Parameter | Type | Description |
|-------------------|------|-------------|
| ids | Int32[] | (Required) Array of database identifiers |

**Response Example**

```json
{
  "deleted": 3
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| deleted | Int32 | (Required) Number of machines deleted |

---

## 2.9.4 Machine Group Configuration Interfaces

The machine group configuration interfaces are used to get, create, modify, or delete machine group configurations. For background information, refer to section 5.4 Machine Group Configuration in the product manual.

**Table 61 — Machine Group Configuration Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| id | Int32 | Machine group database identifier |
| number | Int32 | Machine group number. Valid range: 1–8. |
| useDefaultGroupID | Bool | Use the default machine group identifier |
| groupID | String | Machine group identifier |
| name | String | Machine group name |
| isActive | Bool | Active status. `true` = active, `false` = inactive. |
| machines | Object[] | List of machines in the group. See Table 62 — machines Machine List. |
| enableExternalMachines | Bool | Enable external machines |
| externalMachines | String | External machine command string |
| taskCount | Bool | Machine group machining count task. `true` = enabled. |
| taskOEE | Bool | Machine group OEE monitoring task. `true` = enabled. |
| taskCumulativeStatusTime | Bool | Machine group cumulative status time task. `true` = enabled. |

**Table 62 — machines Machine List**

| Parameter | Type | Description |
|-----------|------|-------------|
| id | Int32 | Machine database identifier. Add or remove `id` in the list to add or remove a machine from the group. |
| machineType | String | Machine type |
| system | String | System |
| model | String | Model |
| name | String | Machine name |
| machineID | String | Machine identifier. Add or remove `machineID` in the list to add or remove a machine from the group. If both `id` and `machineID` are supplied, `machineID` is ignored. |
| slaveID | Int32 | Slave station identifier |
| ip | String | IP address |
| port | Int32 | Port number. `0` = use the device's default port. |
| isActive | Bool | Active status |
| countMultiplier | Int32 | Production count multiplier |

---

### 2.9.4.1 group — Get Machine Group Configuration

```
GET  /api/config/group?ID=ID&groupID=GROUPID
```

| Request Parameter | Type | Description |
|-------------------|------|-------------|
| id | Int32 | Database identifier |
| groupID | String | Target machine group identifier. If both `id` and `groupID` are supplied, `groupID` is ignored. |

**Response Example**

```json
{
  "id": 1,
  "number": 1,
  "useDefaultGroupID": true,
  "groupID": "g1",
  "name": "g1",
  "isActive": true,
  "machines": [
    {
      "id": 4,
      "machineType": "CNC",
      "system": "Mock",
      "model": "General",
      "name": "Demo 1",
      "machineID": "1",
      "slaveID": 1,
      "ip": "127.0.0.1",
      "port": 0,
      "isActive": true,
      "countMultiplier": 1
    }
  ],
  "enableExternalMachines": false,
  "taskCount": true,
  "taskOEE": true,
  "taskCumulativeStatusTime": true
}
```

Response parameters: see Table 61 — Machine Group Configuration Parameters.

---

### 2.9.4.2 groups — Get All Machine Group Configurations

This interface has no request parameters.

```
GET  /api/config/groups
```

Returns an array of all machine group configurations. Response parameters: see Table 61 — Machine Group Configuration Parameters.

---

### 2.9.4.3 create-group — Add Machine Group Configuration

```
POST  /api/config/create-group
```

**Request Body Example**

```json
{
  "number": 7,
  "name": "g7",
  "useDefaultGroupID": false,
  "groupID": "group7",
  "isActive": true,
  "machines": [
    {"id": 6, "countMultiplier": 23},
    {"id": 7, "machineID": "4", "countMultiplier": 4}
  ],
  "enableExternalMachines": false,
  "taskCount": true,
  "taskOEE": true,
  "taskCumulativeStatusTime": true
}
```

Request parameters: see Table 61 — Machine Group Configuration Parameters. Note: do not include `id` in the request body; the gateway assigns `id` automatically. The assigned `id` appears in the response body after successful creation.

Response parameters: see Table 61 — Machine Group Configuration Parameters.

---

### 2.9.4.4 update-group — Modify Machine Group Configuration

Modifies the configuration of the specified machine group and returns the updated configuration.

```
POST  /api/config/update-group
```

**Request Body Example**

```json
{
  "id": 3,
  "number": 6,
  "name": "newName",
  "useDefaultGroupID": false,
  "groupID": "newGroupID",
  "isActive": true,
  "machines": [{"id": 6, "countMultiplier": 1}],
  "taskCount": false,
  "taskOEE": false,
  "taskCumulativeStatusTime": false
}
```

Request parameters: see Table 61 — Machine Group Configuration Parameters. Note: this interface uses `id` as the unique identifier; `id` must be included in the request body. The group identifier `groupID` can also be changed through this interface.

Response parameters: see Table 61 — Machine Group Configuration Parameters.

---

### 2.9.4.5 delete-group — Delete Machine Group Configuration

```
GET  /api/config/delete-group?ID=ID&groupID=GROUPID
```

| Request Parameter | Type | Description |
|-------------------|------|-------------|
| ID | Int32 | Database identifier |
| groupID | String | Target machine group identifier. If both `ID` and `groupID` are supplied, `groupID` is ignored. |

**Response Example**

```json
{
  "errorCode": 0,
  "errorMsg": "Success"
}
```

---

### 2.9.4.6 batch-delete-groups — Batch Delete Machine Group Configurations

This interface is the batch version of section 2.9.4.5 `delete-group`. By specifying a list of database IDs in the request body, multiple machine groups can be deleted in a single call.

```
POST  /api/config/batch-delete-groups
```

**Request Body Example** (application/json)

```json
{
  "ids": [2, 3, 4]
}
```

| Request Parameter | Type | Description |
|-------------------|------|-------------|
| ids | Int32[] | (Required) Array of database identifiers |

**Response Example**

```json
{
  "deleted": 3
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| deleted | Int32 | (Required) Number of machine groups deleted |

---

## 2.9.5 Task Configuration Interfaces

The task configuration interfaces are used to get or modify task configurations. For background information, refer to section 5.5 Task Configuration in the product manual.

### 2.9.5.1 machine-task-interval-settings — Get Machine Task Interval Settings

This interface has no request parameters.

```
GET  /api/config/machine-task-interval-settings
```

**Response Example**

```json
{
  "alarm": 5000,
  "machineStatus": 5000,
  "count": 5000,
  "currentToolNo": 5000,
  "energyConsumption": 60000,
  "feedAndSpindle": 5000,
  "laserPower": 5000,
  "load": 5000,
  "logHistory": 5000,
  "overload": 100,
  "plcData": 5000,
  "position": 5000,
  "currentProgramBlock": 5000,
  "programInfo": 5000,
  "machineTimeData": 5000,
  "toolLife": 5000,
  "toolOffset": 5000,
  "alarmHistory": 5000,
  "cycleData": 5000,
  "oee": 5000
}
```

**Table 63 — Machine Task Interval Settings Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| alarm | Int32 | Alarm information interval [ms] |
| machineStatus | Int32 | Machine status interval [ms] |
| count | Int32 | Machining count interval [ms] |
| currentToolNo | Int32 | Current tool number interval [ms] |
| energyConsumption | Int32 | Energy consumption interval [ms] |
| feedAndSpindle | Int32 | Feed and spindle data interval [ms] |
| laserPower | Int32 | Laser power interval [ms] |
| load | Int32 | Load data interval [ms] |
| logHistory | Int32 | Log history interval [ms] |
| overload | Int32 | Overload monitoring interval [ms] |
| plcData | Int32 | PLC data interval [ms] |
| position | Int32 | Axis position interval [ms] |
| currentProgramBlock | Int32 | Current program block interval [ms] |
| programInfo | Int32 | Program information interval [ms] |
| machineTimeData | Int32 | Machine time data interval [ms] |
| toolLife | Int32 | Tool life interval [ms] |
| toolOffset | Int32 | Tool offset interval [ms] |
| alarmHistory | Int32 | Alarm history interval [ms] |
| cycleData | Int32 | Cycle time data interval [ms] |
| oee | Int32 | OEE monitoring interval [ms] |

---

### 2.9.5.2 update-machine-task-interval-settings — Modify Machine Task Interval Settings

Modifies machine task interval settings and returns the updated settings.

```
POST  /api/config/update-machine-task-interval-settings
```

**Request Body Example**

```json
{
  "alarm": 6000,
  "machineStatus": 8000
}
```

Request parameters: see Table 63. Parameters not included in the request body retain their current values.

Response parameters: see Table 63.

---

### 2.9.5.3 group-task-interval-settings — Get Machine Group Task Interval Settings

This interface has no request parameters.

```
GET  /api/config/group-task-interval-settings
```

**Response Example**

```json
{
  "count": 5000,
  "oee": 5000,
  "cumulativeStatusTime": 5000
}
```

**Table 64 — Machine Group Task Interval Settings Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| count | Int32 | Machining count interval [ms] |
| oee | Int32 | OEE monitoring interval [ms] |
| cumulativeStatusTime | Int32 | Cumulative status time interval [ms] |

---

### 2.9.5.4 update-group-task-interval-settings — Modify Machine Group Task Interval Settings

Modifies machine group task interval settings and returns the updated settings.

```
POST  /api/config/update-group-task-interval-settings
```

**Request Body Example**

```json
{
  "count": 3000,
  "oee": 2000,
  "cumulativeStatusTime": 1000
}
```

Request/response parameters: see Table 64.

---

### 2.9.5.5 oee-monitoring-settings — Get OEE Monitoring Settings

This interface has no request parameters.

```
GET  /api/config/oee-monitoring-settings
```

**Response Example**

```json
{
  "monitorMode": "Scheduled Reset",
  "windowSize": 3600,
  "resetTime": "00:00",
  "availabilityMode": "Autorun Time / Total Time",
  "breakTimeInterval": ""
}
```

**Table 65 — OEE Monitoring Settings Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| monitorMode | String | Monitoring mode. See Table 66 — monitorMode Values. |
| windowSize | Int32 | Window duration [seconds]. Applies in Time Window mode. |
| resetTime | String | Reset time (HH:MM). Applies in Scheduled Reset mode. |
| availabilityMode | String | Availability calculation method. See Table 67 — availabilityMode Values. |
| breakTimeInterval | String | Break time intervals (HH:MM–HH:MM). |

**Table 66 — monitorMode Values**

| Option | Description |
|--------|-------------|
| Scheduled Reset | Reset at a scheduled time |
| Time Window | Real-time sliding window |

**Table 67 — availabilityMode Values**

| Option | Description |
|--------|-------------|
| Autorun Time / Total Time | Auto-run time / total time |
| Autorun Time / (Total Time - Off Time) | Auto-run time / (total time − off time) |
| Autorun Time / (Total Time - Off Time - Manual Time) | Auto-run time / (total time − off time − setup time) |
| Autorun Time / (Total Time - Break Time) | Auto-run time / (total time − break time) |

---

### 2.9.5.6 update-oee-monitoring-settings — Modify OEE Monitoring Settings

Modifies OEE monitoring settings and returns the updated settings.

```
POST  /api/config/update-oee-monitoring-settings
```

**Request Body Example**

```json
{
  "monitorMode": "Time Window",
  "windowSize": 6000,
  "resetTime": "00:00;22:00;01:00;2:00",
  "availabilityMode": "Autorun Time / (Total Time - Break Time)",
  "breakTimeInterval": "08:00-09:00;11:30-12:30"
}
```

Request/response parameters: see Table 65.

---

### 2.9.5.7 tool-life-monitoring-settings — Get Tool Life Monitoring Settings

This interface has no request parameters.

```
GET  /api/config/tool-life-monitoring-settings
```

**Response Example**

```json
{
  "enableToolLifeDetails": false
}
```

**Table 68 — Tool Life Monitoring Settings Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| enableToolLifeDetails | Bool | Tool life details. `true` = enabled, `false` = disabled. |

---

### 2.9.5.8 update-tool-life-monitoring-settings — Modify Tool Life Monitoring Settings

Modifies tool life monitoring settings and returns the updated settings.

```
POST  /api/config/update-tool-life-monitoring-settings
```

Request/response parameters: see Table 68.

---

### 2.9.5.9 count-monitoring-settings — Get Machining Count Monitoring Settings

This interface has no request parameters.

```
GET  /api/config/count-monitoring-settings
```

**Response Example**

```json
{
  "monitorMode": "Time Window",
  "windowSize": 3600,
  "resetTime": "00:00"
}
```

**Table 69 — Machining Count Monitoring Settings Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| monitorMode | String | Monitoring mode. See Table 66 — monitorMode Values. |
| windowSize | Int32 | Window duration [seconds]. Applies in Time Window mode. |
| resetTime | String[] | Reset time(s) (HH:MM). Applies in Scheduled Reset mode. |

---

### 2.9.5.10 update-count-monitoring-settings — Modify Machining Count Monitoring Settings

Modifies machining count monitoring settings and returns the updated settings.

```
POST  /api/config/update-count-monitoring-settings
```

**Request Body Example**

```json
{
  "monitorMode": "Scheduled Reset",
  "windowSize": 36000,
  "resetTime": "23:00;3:24;15:28;12:22"
}
```

Request/response parameters: see Table 69.

---

### 2.9.5.11 overload-monitoring-settings — Get Overload Monitoring Settings

This interface has no request parameters.

```
GET  /api/config/overload-monitoring-settings
```

**Response Example**

```json
{
  "spindleLoadUpperLimit": 100.0
}
```

**Table 70 — Overload Monitoring Settings Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| spindleLoadUpperLimit | Float | Spindle load upper limit [%] |

---

### 2.9.5.12 update-overload-monitoring-settings — Modify Overload Monitoring Settings

Modifies overload monitoring settings and returns the updated settings.

```
POST  /api/config/update-overload-monitoring-settings
```

**Request Body Example**

```json
{
  "spindleLoadUpperLimit": 80.0
}
```

Request/response parameters: see Table 70.

---

### 2.9.5.13 alarm-monitoring-settings — Get Alarm Monitoring Settings

This interface has no request parameters.

```
GET  /api/config/alarm-monitoring-settings
```

**Response Example**

```json
{
  "mininumAlarmLevel": "Warning"
}
```

**Table 71 — Alarm Monitoring Settings Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| mininumAlarmLevel | String | Minimum alarm level. See Table 72 — mininumAlarmLevel Values. |
| infoLevel | String | Information-level keywords. Not returned if not configured. |
| errorLevel | String | Error-level keywords. Not returned if not configured. |

**Table 72 — mininumAlarmLevel Values**

| Option | Description |
|--------|-------------|
| Information | Information |
| Warning | Warning |
| Error | Error |

---

### 2.9.5.14 update-alarm-monitoring-settings — Modify Alarm Monitoring Settings

Modifies alarm monitoring settings and returns the updated settings.

```
POST  /api/config/update-alarm-monitoring-settings
```

**Request Body Example**

```json
{
  "mininumAlarmLevel": "Error",
  "infoLevel": "Info;Inf;MSG",
  "errorLevel": "Error;ERR;Err"
}
```

Request/response parameters: see Table 71.

---

### 2.9.5.15 machine-status-monitoring-settings — Get Machine Status Monitoring Settings

This interface has no request parameters.

```
GET  /api/config/machine-status-monitoring-settings
```

**Response Example**

```json
{
  "enableStatusDetails": false,
  "enableAdjustedManualStatus": false,
  "maxManualPauseTime": 600,
  "enableStatusConversion": false
}
```

**Table 73 — Machine Status Monitoring Settings Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| enableStatusDetails | Bool | Status details. `true` = enabled. |
| enableAdjustedManualStatus | Bool | Setup-mode status correction. `true` = enabled. |
| maxManualPauseTime | Int32 | Maximum setup-mode pause time [seconds]. |
| enableStatusConversion | Bool | Status conversion. `true` = enabled. |
| statusConversionSettings | String | Status conversion rule. Not returned if not configured. |

---

### 2.9.5.16 update-machine-status-monitoring-settings — Modify Machine Status Monitoring Settings

Modifies machine status monitoring settings and returns the updated settings.

```
POST  /api/config/update-machine-status-monitoring-settings
```

**Request Body Example**

```json
{
  "enableStatusDetails": true,
  "enableAdjustedManualStatus": true,
  "maxManualPauseTime": 300,
  "enableStatusConversion": true,
  "statusConversionSettings": "CNCStatus_cncStatus = \"MANUAL_MDI_RUN\" | AUTO_RUN"
}
```

Request/response parameters: see Table 73.

---

## 2.9.6 Communication Configuration Interfaces

The communication configuration interfaces are used to get or modify communication settings. For background information, refer to section 5.6 Communication Configuration in the product manual.

### 2.9.6.1 cloud-settings — Get Cloud Platform Settings

This interface has no request parameters.

```
GET  /api/config/cloud-settings
```

**Response Example**

```json
{
  "enable": false,
  "serverAddress": "severAddress",
  "token": "tokenABCDEFG",
  "enableBroadcasting": false,
  "enableGatewayLinking": false,
  "gatewayLinks": "uid1,token1;uid2,token2;"
}
```

**Table 74 — Cloud Platform Settings Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| enable | Bool | Enable cloud platform. `true` = enabled. |
| serverAddress | String | Server address. Not returned if not configured. |
| token | String | Gateway token. Not returned if not configured. |
| enableBroadcasting | Bool | Enable broadcasting. `true` = enabled. When enabled, data is broadcast through the cloud platform. |
| enableGatewayLinking | Bool | Enable gateway linking. `true` = enabled. When enabled, receives data broadcast by linked gateways via the cloud platform. |
| gatewayLinks | String | Linked gateways. Not returned if not configured. |

---

### 2.9.6.2 update-cloud-settings — Modify Cloud Platform Settings

Modifies cloud platform settings and returns the updated settings.

```
POST  /api/config/update-cloud-settings
```

Request/response parameters: see Table 74.

---

### 2.9.6.3 modbus-settings — Get MODBUS Settings

This interface has no request parameters.

```
GET  /api/config/modbus-settings
```

**Response Example**

```json
{
  "enable": false,
  "byte4Order": "DCBA",
  "byte8Order": "HGFEDCBA",
  "encoding": "GBK",
  "reverseString": false
}
```

**Table 75 — MODBUS Settings Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| enable | Bool | Enable MODBUS. `true` = enabled. |
| byte4Order | String | 32-bit type byte order. Supported values: `ABCD`, `BADC`, `CDAB`, `DCBA`, etc. |
| byte8Order | String | 64-bit type byte order. Supported values: `ABCDEFGH`, `BADCFEHG`, `GHEFCDAB`, `HGFEDCBA`, etc. |
| encoding | String | Character encoding (e.g., `ASCII`, `UTF-8`, `GBK`). |
| reverseString | Bool | Reverse string. `true` = enabled. |

---

### 2.9.6.4 update-modbus-settings — Modify MODBUS Settings

Modifies MODBUS settings and returns the updated settings.

```
POST  /api/config/update-modbus-settings
```

Request/response parameters: see Table 75.

---

### 2.9.6.5 mqtt-settings — Get MQTT Settings

This interface has no request parameters.

```
GET  /api/config/mqtt-settings
```

**Response Example**

```json
{
  "enable": false,
  "mode": "Default",
  "brokerAddress": "brokerAddress",
  "port": 1111,
  "clientID": "client",
  "username": "username",
  "password": "password",
  "dataReportTopic": "topic1",
  "rpcRequestTopic": "rpcReq",
  "rpcResponseTopic": "rpcRes",
  "encoding": "GBK",
  "allowAnomynous": false,
  "arrayToString": false,
  "publishOnValueChange": false,
  "publishAllOnValueChange": false,
  "timeoutReportingInterval": 0
}
```

**Table 76 — MQTT Settings Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| enable | Bool | Enable MQTT. `true` = enabled. |
| mode | String | Mode. See Table 77 — MQTT mode Values. |
| brokerAddress | String | Broker server address. |
| port | Int32 | Broker server port. |
| clientID | String | Client ID. |
| username | String | Username. |
| password | String | Password. |
| dataReportTopic | String | Data reporting topic. |
| rpcRequestTopic | String | RPC request topic. |
| rpcResponseTopic | String | RPC response topic. |
| encoding | String | Character encoding (e.g., `ASCII`, `UTF-8`, `GBK`). |
| allowAnomynous | Bool | Anonymous login. `true` = enabled. |
| arrayToString | Bool | Convert arrays to string. `true` = enabled. |
| publishOnValueChange | Bool | Publish on value change. `true` = enabled. Default: `false`. |
| publishAllOnValueChange | Bool | Publish all fields on value change. `true` = enabled. Applies when value-change publishing is enabled. Default: `false` — only the changed fields are published. |
| timeoutReportingInterval | Int32 | Timeout reporting interval [seconds]. Applies when value-change publishing is enabled. Default: `0` (timeout reporting disabled). |

**Table 77 — MQTT mode Values**

| Option |
|--------|
| Default |
| TB2 |
| Brm |
| IoTDA |
| WisIoT |
| MKT |
| TB |

---

### 2.9.6.6 update-mqtt-settings — Modify MQTT Settings

Modifies MQTT settings and returns the updated settings.

```
POST  /api/config/update-mqtt-settings
```

Request/response parameters: see Table 76.

---

### 2.9.6.7 database-settings — Get Database Settings

This interface has no request parameters.

```
GET  /api/config/database-settings
```

**Response Example** (InfluxDB v2.x)

```json
{
  "enable": true,
  "type": "InfluxDB v2.x",
  "serverAddress": "192.168.100.101",
  "port": "12345",
  "username": "username",
  "password": "password",
  "bucket": "Bucket",
  "tablePrefix": "Prefix",
  "organization": "Organization",
  "writeOnValueChange": true,
  "timeoutReportingInterval": 0
}
```

**Response Example** (non-InfluxDB v2.x)

```json
{
  "enable": true,
  "type": "MySQL",
  "serverAddress": "192.168.100.101",
  "port": "12345",
  "username": "username",
  "password": "password",
  "database": "Database",
  "tablePrefix": "Prefix",
  "storageMode": "User Defined",
  "useLocalTime": false,
  "enablePrimaryKey": false,
  "writeOnValueChange": false,
  "timeoutReportingInterval": 0,
  "loggingModeTypes": ["AlarmHistory", "AxialOverload", "CNCStatus", "Count"],
  "realTimeModeTypes": ["AlarmLog", "GroupOEE", "OEE"]
}
```

**Table 78 — Database Settings Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| enable | Bool | Enable database. `true` = enabled. |
| type | String | Database type. See Table 79 — Database Types. |
| serverAddress | String | Server address. |
| port | String | Server port. |
| username | String | Username. |
| password | String | Password. |
| bucket | String | Database bucket. InfluxDB v2.x only. |
| organization | String | Organization name. InfluxDB v2.x only. |
| database | String | Database name. Non-InfluxDB v2.x only. |
| storageMode | String | Storage mode. Non-InfluxDB v2.x only. See Table 80 — Database Storage Modes. |
| dataRetentionPeriod | Int32 | Data retention period [hours]. Non-InfluxDB v2.x only. |
| loggingModeTypes | String[] | Effective when `storageMode` is `User Defined`. See section 1.2 for data type names. |
| noActionModeTypes | String[] | Effective when `storageMode` is `User Defined`. See section 1.2 for data type names. |
| realTimeModeTypes | String[] | Effective when `storageMode` is `User Defined`. See section 1.2 for data type names. |
| useLocalTime | Bool | Use local time. Non-InfluxDB v2.x types only. |
| enablePrimaryKey | Bool | Enable primary key. Non-InfluxDB v2.x types only. |
| tablePrefix | String | Table name prefix. |
| writeOnValueChange | Bool | Write on value change. `true` = enabled. |
| timeoutReportingInterval | Int32 | Timeout reporting interval [seconds]. Applies when value-change writing is enabled. Default: `0` (timeout writing disabled). |

**Table 79 — Database Types**

| Option |
|--------|
| InfluxDB v2.x |
| MySQL |
| SQL Server |
| Postgre SQL |

**Table 80 — Database Storage Modes**

| Option | Description |
|--------|-------------|
| Logging | Log mode (write on change) |
| Real Time | Real-time mode (write on every collection) |
| User Defined | Custom mode |

---

### 2.9.6.8 update-database-settings — Modify Database Settings

Modifies database settings and returns the updated settings.

```
POST  /api/config/update-database-settings
```

Request/response parameters: see Table 78.

---

### 2.9.6.9 gateway-file-server-settings — Get Gateway File Server Settings

This interface has no request parameters.

```
GET  /api/config/gateway-file-server-settings
```

**Response Example**

```json
{
  "enable": false,
  "enableFtp": false,
  "enableSmb": false,
  "username": "dncuser",
  "password": "dncuser"
}
```

**Table 81 — Gateway File Server Settings Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| enable | Bool | Enable gateway file server. `true` = enabled. |
| enableFtp | Bool | Enable FTP. `true` = enabled. |
| enableSmb | Bool | Enable shared folder (SMB). `true` = enabled. |
| username | String | Username. Read-only; cannot be modified. |
| password | String | Password. |

---

### 2.9.6.10 update-gateway-file-server-settings — Modify Gateway File Server Settings

Modifies gateway file server settings and returns the updated settings.

```
POST  /api/config/update-gateway-file-server-settings
```

Request/response parameters: see Table 81.

---

### 2.9.6.11 http-settings — Get HTTP Settings

This interface has no request parameters.

```
GET  /api/config/http-settings
```

**Response Example**

```json
{
  "enable": true,
  "enableIpWhiteList": true,
  "ipWhiteList": "192.168.100.200;192.168.100.201;"
}
```

**Table 82 — HTTP Settings Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| enable | Bool | Enable HTTP. `true` = enabled. |
| enableIpWhiteList | Bool | Enable IP whitelist. `true` = enabled. |
| ipWhiteList | String | IP whitelist (semicolon-separated). Not returned if not configured. |

---

### 2.9.6.12 update-http-settings — Modify HTTP Settings

Modifies HTTP settings and returns the updated settings.

```
POST  /api/config/update-http-settings
```

Request/response parameters: see Table 82.

---

### 2.9.6.13 hub-settings — Get Hub Settings

This interface has no request parameters.

```
GET  /api/config/hub-settings
```

**Response Example**

```json
{
  "enable": false,
  "server": "serverAddress",
  "accessToken": "accessToken",
  "enableBroadcasting": false,
  "enableGatewayLinking": false,
  "gatewayLinks": "uid1,token1;uid2,token2;"
}
```

**Table 83 — Hub Settings Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| enable | Bool | Enable Hub. `true` = enabled. |
| server | String | Server address. Not returned if not configured. |
| accessToken | String | Gateway token. Not returned if not configured. |
| enableBroadcasting | Bool | Enable broadcasting. `true` = enabled. When enabled, data is broadcast through the Hub. |
| enableGatewayLinking | Bool | Enable gateway linking. `true` = enabled. When enabled, receives data broadcast by linked gateways via the Hub. |
| gatewayLinks | String | Linked gateways. Not returned if not configured. |

---

### 2.9.6.14 update-hub-settings — Modify Hub Settings

Modifies Hub settings and returns the updated settings.

```
POST  /api/config/update-hub-settings
```

Request/response parameters: see Table 83.

---

### 2.9.6.15 remote-access — Get Remote Access Settings

This interface has no request parameters.

```
GET  /api/config/remote-access
```

**Response Example**

```json
{
  "host": "serverUrl",
  "hub": "XXXXXX-XXXXXX-XXXXXX-XXXXXX",
  "password": "password",
  "bridgeNetwork": "LAN1",
  "state": "Established",
  "expiration": "2999-12-31T23:59:59"
}
```

**Table 84 — Remote Access Settings Parameters**

| Parameter | Type | Description |
|-----------|------|-------------|
| host | String | Remote server address. |
| hub | String | Site (read-only). Defaults to the gateway UID. |
| password | String | Password. |
| bridgeNetwork | String | Bridged network: `"LAN1"`, `"LAN2"`, or `""` (no bridge). |
| state | String | Connection state (read-only). Values: `Connecting`, `Negotiation`, `Retry` (all three indicate connecting), `Auth` (authenticating), `Established` (connected), `Idle` (disconnected). |
| expiration | String | Expiration date (read-only). Only returned when `state` is `Established`. |

---

### 2.9.6.16 update-remote-access — Modify Remote Access Settings

Modifies remote access settings and returns the updated settings.

```
POST  /api/config/update-remote-access
```

**Request Body Example**

```json
{
  "host": "serverUrl2",
  "password": "password2",
  "bridgeNetwork": "LAN1"
}
```

Request/response parameters: see Table 84.

---

## 2.10 Gateway Function Interfaces

The gateway function interfaces are used to command the gateway to perform specific functions, including the Core service function interfaces and the Gateway service function interfaces.

---

### 2.10.1 Core Service Function Interfaces

Base URL: `/api/core`.

---

#### 2.10.1.1 info — Get Core Service Information

No request parameters.

| Method | URL |
|--------|-----|
| GET | `/api/core/info` |

**Response Example**

```json
{
  "version": "1.19.4.18"
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| version | String | (Required) Version number |

---

#### 2.10.1.2 license-info — Get License Information

Retrieves license details including expiration date, license count, license type, and license status. No request parameters.

| Method | URL |
|--------|-----|
| GET | `/api/core/license-info` |

**Response Example**

```json
{
  "isValid": true,
  "license": {
    "company": "Bivrost",
    "product": "IoT Gateway",
    "machineCount": 255,
    "plcCount": 40,
    "robotCount": 60,
    "cncCount": 150,
    "laserCount": 5,
    "featureAppDNC": true,
    "licType": "Full",
    "uid": "XXXXXX-XXXXXX-XXXXXX-XXXXXX",
    "expiration": "2999-12-31T23:59:59"
  }
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| isValid | Bool | (Required) Whether the license is valid. `true` = valid, `false` = invalid. |
| license | object | (Required) License details |
| company | String | Name of the company that issued the license. Not returned in generic editions. |
| product | String | (Required) Product name for this license. |
| machineCount | Int32 | (Required) Total license count. |
| plcCount | Int32 | PLC license count. If not returned, the PLC license count equals the total license count. |
| robotCount | Int32 | Robot license count. If not returned, the robot license count equals the total license count. |
| cncCount | Int32 | CNC license count. If not returned, the CNC license count equals the total license count. |
| laserCount | Int32 | Laser machine license count. If not returned, the laser license count equals the total license count. |
| featureAppDNC | Bool | (Required) Whether the DNC File Transfer Pro feature is enabled. `true` = enabled, `false` = not enabled. |
| licType | String | (Required) License type: `Basic`, `Standard`, `Full`, `DNC`, `PLC`. |
| uid | String | (Required) Gateway UID this license is bound to. |
| expiration | String | (Required) License expiration date/time. |

---

#### 2.10.1.3 service-status — Get Service Status

Retrieves the status of services including cloud platform, MODBUS, MQTT, database, and local cache. No request parameters.

| Method | URL |
|--------|-----|
| GET | `/api/core/service-status` |

**Response Example**

```json
{
  "mqtt": 3,
  "queueSizeMqtt": 9,
  "modbus": 0,
  "queueSizeModbus": 0,
  "tbCloud": 0,
  "queueSizeTbCloud": 0,
  "localDB": 3,
  "queueSizeLocalDB": 0,
  "writeData": 2,
  "queueSizeWriteData": 0,
  "localDBLog": 0,
  "queueSizeLocalDBLog": 0,
  "hubBroadcasting": 2,
  "queueSizeHubBroadcasting": 0,
  "tbHubBroadcasting": 0,
  "queueSizeTbHubBroadcasting": 0,
  "needRestart": false
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| mqtt | Int32 | (Required) MQTT status. Refer to Table 49 — Service Running Status. |
| queueSizeMqtt | Int32 | (Required) MQTT queue length |
| modbus | Int32 | (Required) MODBUS status. Refer to Table 49 — Service Running Status. |
| queueSizeModbus | Int32 | (Required) MODBUS queue length |
| tbCloud | Int32 | (Required) Cloud platform status. Refer to Table 49 — Service Running Status. |
| queueSizeTbCloud | Int32 | (Required) Cloud platform queue length |
| localDB | Int32 | (Required) Local cache status. Refer to Table 49 — Service Running Status. |
| queueSizeLocalDB | Int32 | (Required) Local cache queue length |
| writeData | Int32 | (Required) Database status. Refer to Table 49 — Service Running Status. |
| queueSizeWriteData | Int32 | (Required) Database queue length |
| localDBLog | Int32 | (Required) Log database status. Refer to Table 49 — Service Running Status. |
| queueSizeLocalDBLog | Int32 | (Required) Log database queue length |
| hubBroadcasting | Int32 | (Required) Hub broadcasting status. Refer to Table 49 — Service Running Status. |
| queueSizeHubBroadcasting | Int32 | (Required) Hub broadcasting queue length |
| tbHubBroadcasting | Int32 | (Required) Cloud platform broadcasting status. Refer to Table 49 — Service Running Status. |
| queueSizeTbHubBroadcasting | Int32 | (Required) Cloud platform broadcasting queue length |
| needRestart | Bool | (Required) Whether a service restart is required to apply settings |

---

#### 2.10.1.4 upload-license — Upload Gateway License

Uploads a gateway license as a string stream.

| Method | URL |
|--------|-----|
| POST | `/api/core/upload-license` |

**Request Body Example**

```json
{
  "Base64": "string"
}
```

> The gateway license file should be converted to a Base64 string before uploading. The gateway reads the file content in Base64 string format.

**Response Example**

```json
{
  "errorCode": 0,
  "errorMsg": "Success"
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| errorCode | Int32 | (Required) Error code. `0` = success. |
| errorMsg | String | (Required) Error message |

---

### 2.10.2 Gateway Service Function Interfaces

Base URL: `/api/gateway`.

---

#### 2.10.2.1 alias — Get Gateway Name

No request parameters.

| Method | URL |
|--------|-----|
| GET | `/api/gateway/alias` |

**Response Example**

```json
{
  "alias": "iotgw"
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| alias | String | (Required) Gateway name |

---

#### 2.10.2.2 update-alias — Update Gateway Name

No request parameters. Note: this change takes effect after a hardware reboot.

| Method | URL |
|--------|-----|
| POST | `/api/gateway/update-alias` |

**Request Body Example** (application/json)

```json
{
  "alias": "newAlias"
}
```

| Request Parameter | Type | Description |
|-------------------|------|-------------|
| alias | String | (Required) New gateway name |

**Response Example**

```json
{
  "errorCode": 0,
  "errorMsg": "Success"
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| errorCode | Int32 | (Required) Error code. `0` = success. |
| errorMsg | String | (Required) Error message |

---

#### 2.10.2.3 reboot — Hardware Reboot

Equivalent to clicking "Power" → "Restart" on the Gateway Management page. No request parameters.

| Method | URL |
|--------|-----|
| GET | `/api/gateway/reboot` |

**Response Example**

```json
{
  "errorCode": 0,
  "errorMsg": "Success"
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| errorCode | Int32 | (Required) Error code. `0` = success. |
| errorMsg | String | (Required) Error message |

---

#### 2.10.2.4 restart — Restart All Services

Restarts both the Core service and the Gateway service. This is different from the "Restart Service" button on the gateway home page. No request parameters.

| Method | URL |
|--------|-----|
| GET | `/api/gateway/restart` |

**Response Example**

```json
{
  "errorCode": 0,
  "errorMsg": "Success"
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| errorCode | Int32 | (Required) Error code. `0` = success. |
| errorMsg | String | (Required) Error message |

---

#### 2.10.2.5 restart-service — Restart Core Service

Use this interface after modifying machine configuration, machine group configuration, task configuration, or communication configuration. Equivalent to clicking the "Restart Service" button on the gateway home page. No request parameters.

| Method | URL |
|--------|-----|
| GET | `/api/gateway/restart-service` |

**Response Example**

```json
{
  "errorCode": 0,
  "errorMsg": "Success"
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| errorCode | Int32 | (Required) Error code. `0` = success. |
| errorMsg | String | (Required) Error message |

---

#### 2.10.2.6 shut-down — Gateway Shutdown

Equivalent to clicking "Power" → "Shut Down" on the Gateway Management page. No request parameters.

| Method | URL |
|--------|-----|
| GET | `/api/gateway/shut-down` |

**Response Example**

```json
{
  "errorCode": 0,
  "errorMsg": "Success"
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| errorCode | Int32 | (Required) Error code. `0` = success. |
| errorMsg | String | (Required) Error message |

---

#### 2.10.2.7 internet-connection — Get Gateway Internet Status

Retrieves whether the gateway is connected to the internet. No request parameters.

| Method | URL |
|--------|-----|
| GET | `/api/gateway/internet-connection` |

**Response Example**

```json
{
  "isOnline": true
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| isOnline | Bool | (Required) Internet connectivity status. `true` = connected, `false` = not connected. |

---

#### 2.10.2.8 time — Get Gateway Current Time

No request parameters.

| Method | URL |
|--------|-----|
| GET | `/api/gateway/time` |

**Response Example**

```json
{
  "localTime": "2025-06-30T13:51:19.2864043+08:00"
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| localTime | String | (Required) Gateway local time (ISO 8601) |

---

#### 2.10.2.9 sync-time — Synchronize Gateway Time

| Method | URL |
|--------|-----|
| GET | `/api/gateway/sync-time` |

| Request Parameter | Type | Description |
|-------------------|------|-------------|
| timeServerAddress | String | (Required) NTP server address. Multiple addresses separated by `";"`. The gateway will first attempt to sync with the first address; if that fails, it will try the next. Example: `ntp1.aliyun.com;ntp2.aliyun.com;ntp3.aliyun.com;ntp4.aliyun.com;` |

**Response Example**

```json
{
  "errorCode": 0,
  "errorMsg": "Success"
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| errorCode | Int32 | (Required) Error code. `0` = success. |
| errorMsg | String | (Required) Error message |

---

#### 2.10.2.10 time-zone — Get Gateway Time Zone

No request parameters.

| Method | URL |
|--------|-----|
| GET | `/api/gateway/time-zone` |

**Response Example**

```json
{
  "timeZoneID": "China Standard Time"
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| timeZoneID | String | (Required) Gateway time zone (Microsoft Windows Time Zone ID) |

---

#### 2.10.2.11 time-zones — Get Available Time Zones

No request parameters.

| Method | URL |
|--------|-----|
| GET | `/api/gateway/time-zones` |

**Response Example**

```json
{
  "timeZoneIDs": [
    "Dateline Standard Time",
    "UTC-11",
    "Hawaiian Standard Time",
    "Aleutian Standard Time",
    ...
    "China Standard Time",
    ...
  ]
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| timeZoneIDs | String[] | (Required) Available time zones (Microsoft Windows Time Zone IDs) |

---

#### 2.10.2.12 update-time-zone — Update Gateway Time Zone

| Method | URL |
|--------|-----|
| POST | `/api/gateway/update-time-zone` |

**Request Body Example** (application/json)

```json
{
  "timeZoneID": "China Standard Time"
}
```

| Request Parameter | Type | Description |
|-------------------|------|-------------|
| timeZoneID | String | (Required) Gateway time zone (Microsoft Windows Time Zone ID). Available options can be obtained from section 2.10.2.11 time-zones. |

**Response Example**

```json
{
  "errorCode": 0,
  "errorMsg": "Success"
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| errorCode | Int32 | (Required) Error code. `0` = success. |
| errorMsg | String | (Required) Error message |

---

#### 2.10.2.13 network-adapters — Get Network Adapter List

No request parameters.

| Method | URL |
|--------|-----|
| GET | `/api/gateway/network-adapters` |

**Response Example**

```json
{
  "names": [
    "LAN1",
    "LAN2",
    "WLAN"
  ]
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| names | String[] | (Required) Network adapter names |

---

#### 2.10.2.14 lan — Get Wired Network Settings

| Method | URL |
|--------|-----|
| GET | `/api/gateway/lan` |

| Request Parameter | Type | Description |
|-------------------|------|-------------|
| name | String | (Required) Network adapter name. Values: `LAN1` or `LAN2`. |

**Response Example**

```json
{
  "name": "LAN1",
  "macAddress": "00:E0:71:BC:D2:53",
  "state": "Disconnected",
  "isDHCPEnabled": false,
  "ipAddress": "192.168.100.1",
  "subMask": "255.255.0.0",
  "defaultGateway": "",
  "isDNSServerDHCPEnabled": false,
  "dnsServer1": "",
  "dnsServer2": ""
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| name | String | (Required) Network adapter name. Values: `LAN1` or `LAN2`. |
| macAddress | String | (Required) Physical (MAC) address |
| state | String | (Required) State. Values: `Connected`, `Disconnected`. |
| isDHCPEnabled | Bool | (Required) Obtain IP address automatically (DHCP) |
| ipAddress | String | (Required) IP address |
| subMask | String | (Required) Subnet mask |
| defaultGateway | String | (Required) Default gateway |
| isDNSServerDHCPEnabled | Bool | (Required) Obtain DNS server address automatically |
| dnsServer1 | String | (Required) Preferred DNS server |
| dnsServer2 | String | (Required) Alternate DNS server |

---

#### 2.10.2.15 update-lan — Update Wired Network Settings

| Method | URL |
|--------|-----|
| POST | `/api/gateway/update-lan` |

**Request Body Example** (application/json)

```json
{
  "name": "LAN1",
  "isDHCPEnabled": false,
  "ipAddress": "192.168.100.1",
  "subMask": "255.255.0.0",
  "defaultGateway": "",
  "isDNSServerDHCPEnabled": false,
  "dnsServer1": "",
  "dnsServer2": ""
}
```

| Request Parameter | Type | Description |
|-------------------|------|-------------|
| name | String | (Required) Target network adapter name. Values: `LAN1` or `LAN2`. |
| isDHCPEnabled | Bool | Obtain IP address automatically (DHCP) |
| ipAddress | String | IP address |
| subMask | String | Subnet mask |
| defaultGateway | String | Default gateway |
| isDNSServerDHCPEnabled | Bool | Obtain DNS server address automatically |
| dnsServer1 | String | Preferred DNS server |
| dnsServer2 | String | Alternate DNS server |

**Response Example**

```json
{
  "name": "LAN1",
  "macAddress": "00:E0:71:BC:D2:53",
  "state": "Disconnected",
  "isDHCPEnabled": false,
  "ipAddress": "192.168.100.1",
  "subMask": "255.255.0.0",
  "defaultGateway": "",
  "isDNSServerDHCPEnabled": false,
  "dnsServer1": "",
  "dnsServer2": ""
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| name | String | (Required) Network adapter name. Values: `LAN1` or `LAN2`. |
| macAddress | String | (Required) Physical (MAC) address |
| state | String | (Required) State. Values: `Connected`, `Disconnected`. |
| isDHCPEnabled | Bool | (Required) Obtain IP address automatically (DHCP) |
| ipAddress | String | (Required) IP address |
| subMask | String | (Required) Subnet mask |
| defaultGateway | String | (Required) Default gateway |
| isDNSServerDHCPEnabled | Bool | (Required) Obtain DNS server address automatically |
| dnsServer1 | String | (Required) Preferred DNS server |
| dnsServer2 | String | (Required) Alternate DNS server |

---

#### 2.10.2.16 wifi — Get Wi-Fi Settings

No request parameters.

| Method | URL |
|--------|-----|
| GET | `/api/gateway/wifi` |

**Response Example**

```json
{
  "wifiName": "myWifi-5G",
  "signalStrength": 99,
  "macAddress": "00:A0:71:BD:E2:63",
  "state": "Connected",
  "isDHCPEnabled": true,
  "ipAddress": "192.168.1.88",
  "subMask": "255.255.255.0",
  "defaultGateway": "192.168.1.1",
  "isDNSServerDHCPEnabled": true,
  "dnsServer1": "192.168.211.1",
  "dnsServer2": "8.8.8.8"
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| wifiName | String | (Required) Wi-Fi SSID |
| signalStrength | Int32 | Range: 0–100. Higher value = stronger signal. |
| macAddress | String | (Required) Physical (MAC) address |
| state | String | (Required) State. Values: `Connected`, `Disconnected`. |
| isDHCPEnabled | Bool | (Required) Obtain IP address automatically (DHCP) |
| ipAddress | String | (Required) IP address |
| subMask | String | (Required) Subnet mask |
| defaultGateway | String | (Required) Default gateway |
| isDNSServerDHCPEnabled | Bool | (Required) Obtain DNS server address automatically |
| dnsServer1 | String | (Required) Preferred DNS server |
| dnsServer2 | String | (Required) Alternate DNS server |

---

#### 2.10.2.17 update-wifi — Update Wi-Fi Settings

| Method | URL |
|--------|-----|
| POST | `/api/gateway/update-wifi` |

**Request Body Example** (application/json)

```json
{
  "isDHCPEnabled": true,
  "ipAddress": "192.168.1.88",
  "subMask": "255.255.255.0",
  "defaultGateway": "192.168.1.1",
  "isDNSServerDHCPEnabled": true,
  "dnsServer1": "192.168.211.1",
  "dnsServer2": "8.8.8.8"
}
```

| Request Parameter | Type | Description |
|-------------------|------|-------------|
| isDHCPEnabled | Bool | Obtain IP address automatically (DHCP) |
| ipAddress | String | IP address |
| subMask | String | Subnet mask |
| defaultGateway | String | Default gateway |
| isDNSServerDHCPEnabled | Bool | Obtain DNS server address automatically |
| dnsServer1 | String | Preferred DNS server |
| dnsServer2 | String | Alternate DNS server |

**Response Example**

```json
{
  "wifiName": "myWifi-5G",
  "signalStrength": 99,
  "macAddress": "00:A0:71:BD:E2:63",
  "state": "Connected",
  "isDHCPEnabled": true,
  "ipAddress": "192.168.1.88",
  "subMask": "255.255.255.0",
  "defaultGateway": "192.168.1.1",
  "isDNSServerDHCPEnabled": true,
  "dnsServer1": "192.168.211.1",
  "dnsServer2": "8.8.8.8"
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| wifiName | String | (Required) Wi-Fi SSID |
| signalStrength | Int32 | Range: 0–100. Higher value = stronger signal. |
| macAddress | String | (Required) Physical (MAC) address |
| state | String | (Required) State. Values: `Connected`, `Disconnected`. |
| isDHCPEnabled | Bool | (Required) Obtain IP address automatically (DHCP) |
| ipAddress | String | (Required) IP address |
| subMask | String | (Required) Subnet mask |
| defaultGateway | String | (Required) Default gateway |
| isDNSServerDHCPEnabled | Bool | (Required) Obtain DNS server address automatically |
| dnsServer1 | String | (Required) Preferred DNS server |
| dnsServer2 | String | (Required) Alternate DNS server |

---

#### 2.10.2.18 search-wifi — Scan for Wi-Fi Networks

No request parameters.

| Method | URL |
|--------|-----|
| GET | `/api/gateway/search-wifi` |

**Response Example**

```json
[
  {
    "wifiName": "myWifi-5G",
    "signalStrength": 99,
    "state": "Connected"
  },
  {
    "wifiName": "myWifi-2.4G",
    "signalStrength": 99,
    "state": "Disconnected"
  }
]
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| wifiName | String | (Required) Wi-Fi SSID |
| signalStrength | Int32 | Range: 0–100. Higher value = stronger signal. |
| state | String | (Required) State. Values: `Connected`, `Disconnected`. |

---

#### 2.10.2.19 connect-wifi — Connect to Wi-Fi

| Method | URL |
|--------|-----|
| GET | `/api/gateway/connect-wifi` |

| Request Parameter | Type | Description |
|-------------------|------|-------------|
| wifiName | String | (Required) Target Wi-Fi SSID |
| wifiPassword | String | Target Wi-Fi password |

**Response Example**

```json
{
  "errorCode": 0,
  "errorMsg": "Success"
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| errorCode | Int32 | (Required) Error code. `0` = success. |
| errorMsg | String | (Required) Error message |

---

#### 2.10.2.20 disconnect-wifi — Disconnect from Wi-Fi

No request parameters.

| Method | URL |
|--------|-----|
| GET | `/api/gateway/disconnect-wifi` |

**Response Example**

```json
{
  "errorCode": 0,
  "errorMsg": "Success"
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| errorCode | Int32 | (Required) Error code. `0` = success. |
| errorMsg | String | (Required) Error message |

---

#### 2.10.2.21 static-routing — Get Static Routing Settings

No request parameters.

| Method | URL |
|--------|-----|
| GET | `/api/gateway/static-routing` |

**Response Example**

```json
{
  "staticRouting": "0.0.0.0, 0.0.0.0, 192.168.100.1;"
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| staticRouting | String | (Required) Static routing configuration string |

---

#### 2.10.2.22 update-static-routing — Update Static Routing Settings

| Method | URL |
|--------|-----|
| POST | `/api/gateway/update-static-routing` |

**Request Body Example** (application/json)

```json
{
  "staticRouting": "0.0.0.0, 0.0.0.0, 192.168.100.1;"
}
```

| Request Parameter | Type | Description |
|-------------------|------|-------------|
| staticRouting | String | (Required) Static routing configuration string |

**Response Example**

```json
{
  "staticRouting": "0.0.0.0, 0.0.0.0, 192.168.100.1;"
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| staticRouting | String | (Required) Static routing configuration string |

---

#### 2.10.2.23 connect-remote-host — Connect to Remote Server

No request parameters.

| Method | URL |
|--------|-----|
| GET | `/api/gateway/connect-remote-host` |

**Response Example**

```json
{
  "errorCode": 0,
  "errorMsg": "Success"
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| errorCode | Int32 | (Required) Error code. `0` = success. |
| errorMsg | String | (Required) Error message |

---

#### 2.10.2.24 disconnect-remote-host — Disconnect from Remote Server

No request parameters.

| Method | URL |
|--------|-----|
| GET | `/api/gateway/disconnect-remote-host` |

**Response Example**

```json
{
  "errorCode": 0,
  "errorMsg": "Success"
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| errorCode | Int32 | (Required) Error code. `0` = success. |
| errorMsg | String | (Required) Error message |

---

#### 2.10.2.25 file-server-items — Get Gateway File Server Listing

Retrieves the list of files and subdirectories in the root directory of the gateway file server. Subdirectories correspond to machines and are named after the machine's IP address. No request parameters.

| Method | URL |
|--------|-----|
| GET | `/api/gateway/file-server-items` |

**Response Example**

```json
{
  "totalSpace": "10.00 GB",
  "usedSpace": "120 B",
  "files": [],
  "subDirs": [
    {
      "name": "127.0.0.1",
      "size": "20 B",
      "machineName": "1",
      "machineID": "1",
      "ip": "127.0.0.1",
      "status": "Activated"
    },
    {
      "name": "127.0.0.2",
      "size": "100 B",
      "machineName": "2",
      "machineID": "2",
      "ip": "127.0.0.2",
      "status": "Activated"
    }
  ]
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| totalSpace | String | (Required) Total storage space |
| usedSpace | String | (Required) Used storage space |
| files | Object[] | (Required) List of files in the root directory. Typically empty. |
| subDirs | Object[] | (Required) List of subdirectories in the root directory. |
| name | String | File or directory name |
| size | String | File or directory size |
| machineName | String | Associated machine name |
| machineID | String | Associated machine identifier |
| ip | String | Associated machine IP address |
| status | String | Status. Values: `Unlinked` (not associated), `Activated` (activated), `Unactivated` (not activated). |

---

#### 2.10.2.26 delete-file-server-item — Delete Gateway File Server Item

Deletes a specified file or subdirectory from the root directory.

| Method | URL |
|--------|-----|
| GET | `/api/gateway/delete-file-server-item` |

| Request Parameter | Type | Description |
|-------------------|------|-------------|
| fileName | String | File name |
| dirName | String | Subdirectory name |

**Response Example**

```json
{
  "errorCode": 0,
  "errorMsg": "Success"
}
```

| Response Parameter | Type | Description |
|--------------------|------|-------------|
| errorCode | Int32 | (Required) Error code. `0` = success. |
| errorMsg | String | (Required) Error message |

---

## III. MODBUS Communication

Once MODBUS communication is enabled and the automatic data collection task for the target machine or machine group is activated (see the *User Manual*, section 5.3.1 Add Machine — task settings for each machine type, and section 5.4.1.2 Machine Group Task Settings), the gateway will store the collected task result data at the corresponding MODBUS addresses based on the MODBUS protocol. The MODBUS communication address is the \<gateway IP\>, and the port is 502. When using MODBUS communication, the last octet of the machine's IP address is used as the slave station ID. For example, if the machine IP is 192.168.100.2, the corresponding slave station ID is 2. When using MODBUS, the last octet of the machine IP must not be 0 (0 is reserved for the gateway), and each machine connected to the same gateway must have a unique last octet; otherwise, data identification errors will occur. Refer to *User Manual* section 5.6.2 MODBUS Configuration for instructions on configuring the MODBUS service.

**Note: The gateway MODBUS server uses 0-based addressing. If the client uses 1-based addressing, add 1 to the corresponding address values.**

---

### 3.1 Machine-Related Data

MODBUS data addresses are as follows:

| Address | Name | Data Type | Unit | Notes |
|---------|------|-----------|------|-------|
| 400010 | Connection Status | UInt16 | – | 1=Connected; 2=Disconnected; 3=Error |
| 400011 | Alarm Count | UInt16 | items | Current number of alarms |
| 400012 | CNC Running Status | Int16 | – | Current status code; see section 5.1 Machine Status |
| 400013 | Cumulative Alarm Count | UInt32 | items | |
| 400015 | Cumulative Alarm Time | UInt32 | seconds | |
| 400040–400075 | Axis Names, Axes 1–18 | String(4) | – | Converted to a 4-byte array (2 address slots) using the encoding set in MODBUS configuration. |
| 400100 | Machining Count | UInt32 | pieces | Machining count retrieved from the machine system |
| 400102 | Spindle Override | Float | % | Spindle speed override |
| 400104 | Spindle Speed | Float | Same as machine setting | |
| 400106 | Feed Override | Float | % | |
| 400108 | Feed Rate | Float | Same as machine setting | |
| 400110–400115 | Spindle 1–3 Load | Float | % | |
| 400120 | Rapid Feed Override | Float | % | |
| 400172 | Cumulative Power-On Time 1 | Int32 | minutes | Time calculation details: see section 1.2.25 ToolLife. A value of -2147483648 indicates the machine model does not support this time data. |
| 400174 | Cumulative Power-On Time 2 | Int32 | milliseconds | |
| 400176 | Current Power-On Time 1 | Int32 | minutes | |
| 400178 | Current Power-On Time 2 | Int32 | milliseconds | |
| 400180 | Cumulative Running Time 1 | Int32 | minutes | |
| 400182 | Cumulative Running Time 2 | Int32 | milliseconds | |
| 400184 | Current Running Time 1 | Int32 | minutes | |
| 400186 | Current Running Time 2 | Int32 | milliseconds | |
| 400188 | Cumulative Machining Time 1 | Int32 | minutes | |
| 400190 | Cumulative Machining Time 2 | Int32 | milliseconds | |
| 400192 | Current Machining Time 1 | Int32 | minutes | |
| 400194 | Current Machining Time 2 | Int32 | milliseconds | |
| 400196 | Last Cycle Time 1 | Int32 | minutes | |
| 400198 | Last Cycle Time 2 | Int32 | milliseconds | |
| 400200 | Current Cycle Time 1 | Int32 | minutes | |
| 400202 | Current Cycle Time 2 | Int32 | milliseconds | |
| 400204 | Current Cutting Time 1 | Int32 | minutes | |
| 400206 | Current Cutting Time 2 | Int32 | milliseconds | |
| 400208 | Remaining Cycle Time 1 | Int32 | minutes | |
| 400210 | Remaining Cycle Time 2 | Int32 | milliseconds | |
| 400220 | Current Tool Number | String(16) | – | Converted to a 16-byte array (8 address slots) using the encoding set in MODBUS configuration. |
| 400228 | Running Program Name | String(32) | – | Currently executing sub-program name |
| 400244 | Main Program Name | String(32) | – | Current main program name |
| 400260 | Running Program Block Sequence No. | String(16) | – | Sequence number of the currently executing program block |
| 400268 | Current Program Block | String(70) | – | Content of the currently running program block |
| 400498 | Current Machining Count | UInt32 | pieces | Machining count within the current monitoring period |
| 400500 | Cumulative Machining Count | UInt32 | pieces | |
| 400502 | Off Time | UInt32 | seconds | |
| 400504 | Emergency Stop Time | UInt32 | seconds | |
| 400506 | Wait Time | UInt32 | seconds | |
| 400508 | Auto Run Time | UInt32 | seconds | |
| 400510 | Setup Time | UInt32 | seconds | |
| 400512 | Machine Monitoring Availability | Float | % | |
| 400520 | Cumulative Off Time | UInt32 | seconds | |
| 400522 | Cumulative Emergency Stop Time | UInt32 | seconds | |
| 400524 | Cumulative Wait Time | UInt32 | seconds | |
| 400526 | Cumulative Auto Run Time | UInt32 | seconds | |
| 400528 | Cumulative Setup Time | UInt32 | seconds | |
| 400546 | Last Cycle Time (gateway-tracked) | UInt32 | seconds | |
| 400600 | Program Stack | String(128) | – | Converted to a 128-byte array (64 address slots) using the encoding set in MODBUS configuration. |
| 400664 | Current Tool Offset Number | String(16) | – | |
| 400900 | Preset Power | Float | % | Laser cutting machine preset power |
| 400902 | Actual Power | Float | % | Laser cutting machine actual power |
| 401100–401135 | Axis 1–18 Load | Float | % | |
| 401136–401171 | Axis 1–18 Machine Coordinate | Float | Same as machine setting | |
| 401172–401207 | Axis 1–18 Relative Coordinate | Float | Same as machine setting | |
| 401208–401243 | Axis 1–18 Remaining Distance | Float | Same as machine setting | |
| 401244–401279 | Axis 1–18 Absolute Coordinate | Float | Same as machine setting | |
| 401400–401405 | Spindle 1–3 Cumulative Overload Time | UInt32 | milliseconds | |
| 401410–401445 | Axis 1–18 Cumulative Overload Time | UInt32 | milliseconds | |
| 405000 | Alarm 1 | String(200) | – | Contains alarm content, time, and level |
| 405100 | Alarm 2 | String(200) | – | Same as above |
| 405200 | Alarm 3 | String(200) | – | Same as above |
| 405300 | Alarm 4 | String(200) | – | Same as above |
| 405400 | Alarm 5 | String(200) | – | Same as above |
| 420000–429999 | PLC Data (positions 1–10000) | UInt16 | – | PLC task data followed by external PLC task data, arranged in task order. 32-bit, 64-bit, and String type data are converted to UInt16 using the method set in MODBUS configuration. |

**Note 1:** Cumulative alarm count and cumulative machining count are totals accumulated since the gateway started collecting data from the machine. These values are stored on the gateway, bound to the machineID (the last two octets of the machine IP), and are never reset.

**Note 2:** Addresses 400502–400510 represent the machine status times within the monitoring period. Address 400512 is the machine availability within the monitoring period. See *User Manual* section 6.1.1 Machine OEE Data.

**Note 3:** String(200) indicates that the string is converted to a 200-byte array using the configured encoding (see *User Manual* section 5.6.2 MODBUS Configuration), which corresponds to 100 MODBUS address slots (UInt16).

**Note 4:** The last cycle time (address 400546) is monitored by the gateway's machine cycle time data task. If the first cycle after a gateway restart has not yet completed, this value is 0. The definition of "last cycle time" is the same as "last cycle time" from the machine, but the former is tracked by the gateway and is supported by all machines that can track production count and status. The latter is provided by the machine itself and is only supported by some machine models.

---

### 3.2 Machine Group-Related Data

Machine group-related data is stored in slave station 0. Data addresses are as follows:

| Address | Name | Data Type | Unit | Notes |
|---------|------|-----------|------|-------|
| 400100 | Machine Group 1 Cumulative Machining Count | UInt32 | pieces | |
| 400102 | Current Number of Machines in Group 1 — Off | Int16 | machines | |
| 400103 | Current Number of Machines in Group 1 — Emergency Stop | Int16 | machines | |
| 400104 | Current Number of Machines in Group 1 — Waiting | Int16 | machines | |
| 400105 | Current Number of Machines in Group 1 — Auto Running | Int16 | machines | |
| 400106 | Current Number of Machines in Group 1 — Setup | Int16 | machines | |
| 400110 | Machine Group 1 Off Time | UInt32 | seconds | |
| 400112 | Machine Group 1 Emergency Stop Time | UInt32 | seconds | |
| 400114 | Machine Group 1 Wait Time | UInt32 | seconds | |
| 400116 | Machine Group 1 Auto Run Time | UInt32 | seconds | |
| 400118 | Machine Group 1 Setup Time | UInt32 | seconds | |
| 400120 | Machine Group 1 Monitoring Availability | Float | % | |
| 400130 | Machine Group 1 Cumulative Off Time | UInt32 | seconds | |
| 400132 | Machine Group 1 Cumulative Emergency Stop Time | UInt32 | seconds | |
| 400134 | Machine Group 1 Cumulative Wait Time | UInt32 | seconds | |
| 400136 | Machine Group 1 Cumulative Auto Run Time | UInt32 | seconds | |
| 400138 | Machine Group 1 Cumulative Setup Time | UInt32 | seconds | |
| 400200–400299 | Machine Group 2 (all addresses = Group 1 address + 100) | | | |
| … | | | | |
| 401600–401699 | Machine Group 16 (all addresses = Group 1 address + 1500) | | | |

**Note 1:** Address 400100 Cumulative Machining Count for the machine group is the total accumulated since the gateway started collecting data for the group. See *User Manual* section 6.1.3 Machine Group Machining Count.

**Note 2:** Addresses 400110–400118 represent the sum of status times across all active machines in the group within the monitoring period. Address 400120 is the machine group monitoring availability within the monitoring period. See *User Manual* section 6.1.2 Machine Group OEE Data.

---

## IV. MQTT Communication

Once MQTT communication is enabled and the automatic data collection task for the target machine or machine group is activated (see the *User Manual*, section 5.3.1 Add Machine — task settings for each machine type, and section 5.4.1.2 Machine Group Task Settings), the gateway will convert the collected task result data into JSON-formatted messages based on the MQTT protocol and publish them to the specified MQTT server. The default topic for data reports is `"r"`. The gateway also supports RPC interfaces. Refer to *User Manual* section 5.6.3 MQTT Configuration for instructions on configuring the MQTT service.

---

### 4.1 Data Report Message Format

The gateway MQTT protocol supports multiple message modes, including Default, MKT, TB, TB2, Brm, IoTDA, WisIoT, etc.

The message content structure is as follows:

| Mode | Data Report Message Format |
|------|--------------------------|
| Default | `{ "type": <type>, "unixtimestamp": <time>, "data": { "<field>": <value> }, "<tag>": <value>, "<entityID>": <value> }` |
| MKT | `{ "unixtimestamp": <time>, "<entityID>_<fieldID>_<field>": <value> }` |
| TB | `{ "<alias>": [ { "ts": <time>, "values": { "<fieldID>_<field>": <value> } } ] }` |
| TB2 | `{ "<machineID>": [ { "ts": <time>, "values": { "<fieldID>_<field>": <value> } } ] }` |
| Brm | `[ { "type": <type>, "ts": <time>, "data": { "<field>": <value> }, "<tag>": <value>, "<entityID>": <value> } ]` |
| IoTDA | `{ "devices": [ { "device_id": <entityID>, "services": [ { "service_id": <type>, "properties": { "<tagField>_<field>": <value> }, "event_time": <time> } ] } ] }` |
| WisIoT | `{ "properties": [ { "key": <entityID>_<fieldID>_<field>, "name": <fieldID>_<field>, "value": <value>, "time": <time> } ] }` |

#### Key Concepts

1. **`<entityID>`** — Machine or machine group identifier: If the current data belongs to a machine, `<entityID>` is the machine identifier `machineID`; if it belongs to a machine group, `<entityID>` is the machine group identifier `groupID`. See section 1.1 for machineID and groupID.

2. **`<alias>`** — Machine or machine group name: The user-defined machine name or machine group name (see *User Manual*, sections 5.3.1 Add Machine and 5.4.1 Add Machine Group).

3. **`<type>`** class, **`<field>`** field, and **`<tag>`** tag: A **class** contains at least one **field** and any number of **tags**. A **field** is the name of a data item. When a **class** cannot be distinguished by machine or machine group alone, **tags** are added to distinguish data of that class. For example, the class `SpindleOverload` (Spindle Overload Data) contains the **field** `CumulativeTime` (Cumulative Overload Time) and the **tag** `SpindleNo` (Spindle Number).

4. **`<tagField>`** — Field form of a tag: composed of the **tag** abbreviation and **tag value**. For example, `S1` is the field form of `SpindleNo=1`.

5. **`<fieldID>`** — Field identifier: If the **class** contains no **tags**, the **field identifier** is the same as the **class**. If the **class** contains **tags**, the **field identifier** is composed of the **class** and the **field forms of all tags**, separated by underscores. The order of tags in the field form is determined by the tag's index in the descriptions below. For example, **field identifier** `SpindleOverload_S1` represents overload data for the first spindle, where `S1` is the field form of `SpindleNo=1`; **field identifier** `ToolLife_G1_I2` represents tool life data for the 2nd tool in tool group 1, where `G1_I2` is the field form of `GroupNum=1; Index=2`.

6. **`<time>`** — Timestamp: the time of task execution, in milliseconds.

7. **`<value>`** — Value: a numeric value or content string.

8. In Default and MKT modes, each message contains data from only one `<entityID>` (machine or machine group) and one data class `<type>`. In TB, TB2, IoTDA, Brm, and WisIoT modes, data from different entities `<entityID>` and different data classes `<type>` can be combined into a single message.

---

#### Message Examples

##### Example 1 (Default Mode)

```json
{
  "type": "CNCStatus",
  "unixtimestamp": 1698908463135,
  "data": {
    "cncStatus": "MANUAL",
    "alarmStatus": "NO_ALARM"
  },
  "machineID": "10"
}
```

- `"type": "CNCStatus"` — Data class. Use "CNCStatus" as the keyword to find section 1.2.4 CNCStatus: Machine Status in section 1.2 Data Description; this message contains machine status data.
- `"unixtimestamp": 1698908463135` — Timestamp of this message.
- `"data": { "cncStatus": "MANUAL", "alarmStatus": "NO_ALARM" }` — Data content. Refer to the data class declared by `<type>` for descriptions of each field.
- `"machineID": "10"` — `<entityID>` machine or machine group identifier; this line indicates the data in this message is from the machine with machineID 10.

##### Example 2 (Default Mode)

```json
{
  "type": "GroupCount",
  "unixtimestamp": 1698911434710,
  "data": {
    "cumulativeCount": 233
  },
  "groupID": 1
}
```

- `"type": "GroupCount"` — Data class. Use "GroupCount" as the keyword to find section 1.2.11 GroupCount: Machine Group Machining Count. `"cumulativeCount"` is a field under the GroupCount data class, representing the cumulative machining count for the machine group.
- `"groupID": 1` — `<entityID>` here is the group identifier `groupID`, indicating the data in this message is from machine group 1.

##### Example 3 (Default Mode)

```json
{
  "type": "ToolLife",
  "unixtimestamp": 1698908397751,
  "data": {
    "timeLimit": 1800,
    "currentTime": 1620,
    "prewarningTime": 1680
  },
  "toolNum": 9,
  "toolOffsetNum": 2,
  "machineID": "10"
}
```

- `"type": "ToolLife"` — Data class. Use "ToolLife" as the keyword to find section 1.2.27 ToolLife: Tool Life Data.
- `"data"` — `"timeLimit"` is the life limit [seconds], `"currentTime"` is the current life [seconds], and `"prewarningTime"` is the prewarning life [seconds].
- `"toolNum": 9, "toolOffsetNum": 2` — These lines indicate that the tool offset data in this message belongs to tool 9, offset 2.

##### Example 4 (MKT Mode)

```json
{
  "unixtimestamp": 1698908397751,
  "10_ToolLife_T9_02_timeLimit": 1800,
  "10_ToolLife_T9_02_currentTime": 1620,
  "10_ToolLife_T9_02_prewarningTime": 1680
}
```

- `"10_ToolLife_T9_02_timeLimit": 1800` — Format: `<entityID>_<fieldID>_<field>`: `<value>`
  - `10` is the `<entityID>` machine identifier
  - `ToolLife_T9_02` is the `<fieldID>` field identifier (ToolLife is `<type>`, T9_02 is the tag field form, T is the abbreviation for `toolNum`, O is the abbreviation for `toolOffsetNum`)
  - `timeLimit` is the `<field>` (life limit [seconds])

##### Example 5 (TB Mode)

```json
{
  "Machine 10": [
    {
      "ts": 1698908397751,
      "values": {
        "ToolLife_T9_02_timeLimit": 1800,
        "ToolLife_T9_02_currentTime": 1620,
        "ToolLife_T9_02_prewarningTime": 1680
      }
    }
  ]
}
```

- `"Machine 10"` — `<alias>` machine or machine group name. Set by the user in the Add/Edit Machine (Group) window on the gateway machine configuration page. If not set, the default alias is the same as the `entityID`.
- `"ToolLife_T9_02_timeLimit": 1800` in `"values"` — Format: `<fieldID>_<field>`: `<value>`. `ToolLife_T9_02` is `<fieldID>`, `timeLimit` is `<field>`.

##### Example 6 (IoTDA Mode)

```json
{
  "devices": [
    {
      "device_id": "10",
      "services": [
        {
          "service_id": "ToolLife",
          "properties": {
            "T9_02_timeLimit": 1800,
            "T9_02_currentTime": 1620,
            "T9_02_prewarningTime": 1680
          },
          "event_time": 1698908397751
        }
      ]
    }
  ]
}
```

- `"device_id": "10"` — Format: `"device_id": <entityID>`; here it is the machine identifier `machineID`.
- `"service_id": "ToolLife"` — Format: `"service_id": <type>`; use "ToolLife" to identify this message as tool life data.
- `"T9_02_timeLimit": 1800` — `T9_02` is the `<tagField>` (field form of the tag); T is the abbreviation for `toolNum` and O is the abbreviation for `toolOffsetNum`. `timeLimit` is the `<field>` (life limit [seconds]).
- `"event_time": 1698908397751` — Format: `"event_time": <time>`; the value 1698908397751 is the timestamp of this message.

---

### 4.2 RPC Interface

The gateway supports RPC interfaces based on the MQTT protocol. Users must configure the RPC request topic and RPC response topic in the gateway management page (see *User Manual* section 5.6.3 MQTT Configuration). After configuration, the gateway listens on the RPC request topic and publishes RPC request results to the RPC response topic. RPC interface data encoding uses the encoding set in MQTT configuration.

If you need to embed the RPC request identifier in the topic, use the wildcard `${request_id}` at the desired position.

For example:
- RPC request topic: `request/${request_id}`
- RPC response topic: `response/${request_id}`

With this configuration, when the gateway receives a request on `request/24`, it will publish the result to the topic `response/24`.

> **Note:** It is recommended to place `${request_id}` at the end of the topic. If `${request_id}` must be placed in the middle of the topic, it must be preceded by "/" as a separator.

The gateway MQTT protocol supports multiple message modes, including Default, MKT, Brm, TB, TB2, etc.

#### RPC Request Message Format

| Mode | RPC Request Message Format |
|------|--------------------------|
| Default/MKT/Brm | `{ "id": <request_id>, "method": "<method>", "params": <params> }` |
| TB/TB2 | `{ "device": "<deviceName>", "data": { "id": "<request_id>", "method": "<method>", "params": <params> } }` |
| WisIoT/IoTDA | Not supported |

#### RPC Response Message Format

| Mode | RPC Response Message Format |
|------|-----------------------------|
| Default/MKT/Brm | `{ "id": <request_id>, "data": <response> }` |
| TB/TB2 | `{ "device": "<deviceName>", "id": <request_id>, "data": <response> }` |
| WisIoT/IoTDA | Not supported |

Where `<response>` is the result of the RPC command, `<deviceName>` is the machine name, and `<request_id>` is a custom request identifier. Note that in TB mode, the `"machineID"` parameter in `<params>` is not required; the machine is specified by `<deviceName>`.

---

#### Supported RPC Commands

Except for authentication interfaces and some file management interfaces, RPC commands correspond one-to-one with the interfaces in Chapter II: HTTP Communication. Refer to the HTTP communication interface descriptions for input parameters and return values.

| RPC Command | Description |
|-------------|-------------|
| **Data Read/Write — Direct Read/Write, prefix /cnc/** | |
| readAlarm | Read alarm information |
| readCNCStatus | Read machine status |
| readCNCStatusDetails | Read machine status details |
| readCount | Read machining count |
| readCurrentToolNumber | Read current tool number |
| readEnergyConsumption | Read energy consumption data |
| readFeed | Read feed data |
| readFeedAndSpindle | Read feed and spindle data |
| readLaserPower | Read laser power |
| readLoad | Read load data |
| readLog | Read log information |
| readOffsetData | Read tool offset data |
| batchReadOffsetData | Batch read tool offset data |
| writeOffsetData | Write tool offset data |
| readPosition | Read coordinate data |
| readProgramBlock | Read current program block |
| readProgramInfo | Read current program |
| readPlcData | Read PLC data |
| writePlcData | Write PLC data |
| readTimeData | Read machine time data |
| readToolLife | Read tool life |
| batchReadToolLife | Batch read tool life |
| readToolLifeDetails | Read tool life details |
| batchReadToolLifeDetails | Batch read tool life details |
| **Data Read/Write — Cache Read, prefix /cnc/** | |
| readTaskData | Read machine task data |
| batchReadTaskData | Batch read machine task data |
| readGroupTaskData | Read machine group task data |
| batchReadGroupTaskData | Batch read machine group task data |
| batchReadErrors | Batch read machine connection status |
| readErrorSummary | Read status summary |
| **File Management Interface, prefix /cnc/** | |
| readProgramList | Read machine file list |
| receiveFile | Receive machine file |
| readCurrentProgram | Receive machine's currently running file |
| sendFile | Send file to machine |
| batchSendFile | Batch send files to machine |
| deleteFile | Delete machine file |
| lockFileByRange | Lock/unlock machine program editing |
| createDir | Create machine directory |
| deleteDir | Delete machine directory |
| selectProgram | Select program |
| readAllPrograms | Browse all files |
| searchFile | Search machine files |
| **Machine Data Analysis Interface, prefix /analysis/** | |
| oee | Machine OEE data analysis |
| alarm | Machine alarm data analysis |
| count | Machine count data analysis |
| overall | Machine overall data analysis |
| cycle | Machine cycle time data analysis |
| **Machine Group Data Analysis Interface, prefix /group-analysis/** | |
| oee | Machine group OEE data analysis |
| alarm | Machine group alarm data analysis |
| count | Machine group count data analysis |
| overall | Machine group overall data analysis |
| cycle | Machine group cycle time data analysis |
| **Historical Data Interface, prefix /db/** | |
| machine | Machine historical data |
| group-machine | Historical data for all machines in a group |
| query | Query historical data |
| **Global Configuration Interface, prefix /config/** | |
| gateway-info | Get gateway information |
| settings | Get gateway global settings |
| update-settings | Update gateway global settings |
| security | Get gateway global security settings |
| update-security | Update gateway global security settings |
| **User Configuration Interface, prefix /config/** | |
| user | Get user settings |
| users | Get all user settings |
| create-user | Create new user |
| update-user | Update user settings |
| delete-user | Delete user |
| user-security | Get user security settings |
| update-user-security | Update user security settings |
| **Machine Configuration Interface, prefix /config/** | |
| machine | Get machine configuration |
| machines | Get all machine configurations |
| create-machine | Add machine configuration |
| update-machine | Update machine configuration |
| delete-machine | Delete machine configuration |
| batch-delete-machine | Batch delete machine configurations |
| **Machine Group Configuration Interface, prefix /config/** | |
| group | Get machine group configuration |
| groups | Get all machine group configurations |
| create-group | Add machine group configuration |
| update-group | Update machine group configuration |
| delete-group | Delete machine group configuration |
| batch-delete-group | Batch delete machine group configurations |
| **Task Configuration Interface, prefix /config/** | |
| machine-task-interval-settings | Get machine task interval settings |
| update-machine-task-interval-settings | Update machine task interval settings |
| group-task-interval-settings | Get machine group task interval settings |
| update-group-task-interval-settings | Update machine group task interval settings |
| oee-monitoring-settings | Get OEE monitoring settings |
| update-oee-monitoring-settings | Update OEE monitoring settings |
| tool-life-monitoring-settings | Get tool life monitoring settings |
| update-oee-monitoring-settings | Update tool life monitoring settings |
| count-monitoring-settings | Get machining count monitoring settings |
| update-count-monitoring-settings | Update machining count monitoring settings |
| overload-monitoring-settings | Get overload monitoring settings |
| update-overload-monitoring-settings | Update overload monitoring settings |
| alarm-monitoring-settings | Get alarm monitoring settings |
| update-alarm-monitoring-settings | Update alarm monitoring settings |
| machine-status-monitoring-settings | Get machine status monitoring settings |
| update-machine-status-monitoring-settings | Update machine status monitoring settings |
| **Communication Configuration Interface, prefix /config/** | |
| cloud-settings | Get cloud platform settings |
| update-cloud-settings | Update cloud platform settings |
| modbus-settings | Get MODBUS settings |
| update-modbus-settings | Update MODBUS settings |
| mqtt-settings | Get MQTT settings |
| update-mqtt-settings | Update MQTT settings |
| database-settings | Get database settings |
| update-database-settings | Update database settings |
| gateway-file-server-settings | Get gateway file server settings |
| update-gateway-file-server-settings | Update gateway file server settings |
| http-settings | Get HTTP settings |
| update-http-settings | Update HTTP settings |
| hub-settings | Get Hub settings |
| update-hub-settings | Update Hub settings |
| remote-access | Get remote access settings |
| update-remote-access | Update remote access settings |
| **Core Service Function Interface, prefix /core/** | |
| info | Get Core service information |
| license-info | Get license information |
| service-status | Get service status |
| upload-license | Upload gateway license |
| **Gateway Service Function Interface, prefix /gateway/** | |
| alias | Get gateway name |
| update-alias | Update gateway name |
| reboot | Reboot gateway hardware |
| restart | Restart all services |
| restart-service | Restart Core service |
| shut-down | Shut down gateway |
| internet-connection | Get gateway network status |
| time | Get gateway current time |
| sync-time | Synchronize gateway time |
| time-zone | Get gateway time zone |
| time-zones | Get time zone options |
| update-time-zone | Update gateway time zone |
| network-adapters | Get gateway network adapter list |
| lan | Get wired network settings |
| update-lan | Update gateway wired network settings |
| wifi | Get wireless network settings |
| update-wifi | Update wireless network settings |
| search-wifi | Search for wireless networks |
| connect-wifi | Connect to wireless network |
| disconnect-wifi | Disconnect from wireless network |
| static-routing | Get static routing settings |
| update-static-routing | Update static routing settings |
| connect-remote-host | Connect to remote server |
| disconnect-remote-host | Disconnect from remote server |
| file-server-items | Get gateway file server list |
| delete-file-server-item | Delete gateway file server item |

---

#### RPC Examples

##### Example 1 (Default Mode — sendFile: Send File to Machine)

In Default mode, to send a file with ASCII-encoded content "fileContent" to the machine with machineID 1010, saving it as "2222" in the directory `Dir/Prog`, use the request topic `"request/1"` where 1 is a custom request identifier.

Request message:

```json
{
  "method": "sendFile",
  "params": {
    "machineID": "1010",
    "fileName": "2222",
    "dirAtCNC": "Dir/Prog",
    "data": {
      "content": "fileContent",
      "encoding": "us-ascii"
    }
  }
}
```

Response topic `"response/1"`, response message:

```json
{
  "errorCode": 0,
  "errorMsg": "Success"
}
```

`machineID`, `fileName`, and `dirAtCNC` are request parameters from the URL of HTTP interface section 2.6.6 sendFile, embedded directly in the `"params"` field. The POST request body should be embedded in the `"data"` field inside `"params"`.

##### Example 2 (Default Mode — writeOffsetData: Write Tool Offset Data)

In Default mode, to write tool offset data for offset number 1, use the request topic `"request/2"` where 2 is a custom request identifier.

Request message:

```json
{
  "method": "writeOffsetData",
  "params": {
    "machineID": "1010",
    "offsetNum": 1,
    "data": {
      "toolNose": 3,
      "lengthWear": 0.0001,
      "radiusWear": 0.03,
      "lengthGeom": 0.0,
      "radiusGeom": 0.002
    }
  }
}
```

Response topic `"response/2"`, response message:

```json
{
  "errorCode": 0,
  "errorMsg": "Success"
}
```

`machineID` and `offsetNum` are parameters from the URL of HTTP interface section 2.5.1.14 writeOffsetData, embedded directly in the `"params"` field. The POST request body should be embedded in the `"data"` field inside `"params"`.

---

## V. Database Communication

Once database communication is enabled and the automatic data collection task for the target machine or machine group is activated (see the *User Manual*, section 5.3.1 Add Machine — task settings for each machine type, and section 5.4.1.2 Machine Group Task Settings), the gateway will automatically write the collected task results into the specified database. Supported database types currently include: InfluxDB v2.x, MySQL, SQL Server, PostgreSQL, and others. Refer to *User Manual* section 5.6.4 Database Configuration for instructions on configuring the database service.

Database table names follow the format **[table prefix][data class]**, where the table prefix is configured on the gateway communication configuration page (see *User Manual*, section 5.6.4 Database Configuration). The table names are the same as the `type` data class names used in MQTT communication (see section 1.2 Data Description). The following shows example table names when no table prefix is set and the save mode is log mode:

| Table Name |
|------------|
| alarmhistory |
| alarmlog |
| cncstatus |
| count |
| currenttoolnumber |
| cycle |
| energyconsum |
| feedandspindle |
| groupcount |
| groupcumulative... |
| groupoee |
| load |
| loghistory |
| machine |
| oee |
| offset |
| plc |
| position |
| programblock |
| programinfo |
| timedata |
| toollife |

The fields in each database table correspond to the data tags (`tag`) and data fields (`field`) of the matching data class `type` (see section 1.2 Data Description). Using the `cncStatus` table as an example, its columns include:

| Field Name | Data Type |
|------------|-----------|
| id | BIGINT (auto-increment) |
| cncStatus | TEXT |
| adjustedStatus | TEXT |
| alarmStatus | TEXT |
| alarmLevel | TEXT |
| offTime | BIGINT |
| waitTime | BIGINT |
| emergencyTime | BIGINT |
| autoRunTime | BIGINT |
| manualTime | BIGINT |
| channel | VARCHAR(128) |
| machineID | VARCHAR(128) |
| time | DATETIME |
| uid | VARCHAR(128) |

---

## VI. Simulated Machine Test

If you need to quickly test the communication protocol without an actual machine connection, you can add a simulated machine in the **Machine Configuration** page of the gateway management interface. Set the local IP to 127.0.0.X; the machine ID and slave station ID default to X, where X can be set to 1–255 (see the *User Manual*, section 5.3 Machine Configuration). Activate the machine and enable its automatic data collection option. Restart the service on the home page to test the HTTP protocol. To test additional communication protocols, enable the corresponding protocol and configure its parameters in the **Communication Configuration** page of the gateway management interface, then restart the service on the home page. When putting the gateway into actual use, delete the simulated machine to avoid slave station ID conflicts.

---

## VII. Frequently Asked Questions

### 7.1 HTTP communication returns "This site can't be reached (ERR_CONNECTION_REFUSED)"

Check whether the computer you are using can access the gateway management page. If it cannot, verify that the gateway is powered on and that the network connection between your computer and the gateway is functioning properly.

---

### 7.2 HTTP communication returns `"errorCode": 3`

Use the **Interface Test** function on the gateway management page to check the communication between the gateway and the machine (see the *User Manual*, section 5.8 Interface Test). If the target device cannot be found in the "Select Machine" dropdown on the **Interface Test** page, the device has not been added or activated. Refer to *User Manual* section 5.3 Machine Configuration to add and activate the machine. After completing the configuration, you must click **Restart Service** on the **Home** page.

If the target device is found on the **Interface Test** page and clicking **Read Device** returns "Read Failed," follow the troubleshooting instructions shown below the "Read Failed" message.

---

### 7.3 No data received when using MODBUS or MQTT communication

Check the machine's automatic data collection settings (see the *User Manual*, section 5.3 Machine Configuration). After completing the configuration, you must click **Restart Service** on the **Home** page.

Check the task configuration (see the *User Manual*, section 5.5 Task Configuration). After completing the configuration, you must click **Restart Service** on the **Home** page.

If no data is still received, follow the steps described in section 6.2.

---

### 7.4 Unable to obtain valid data at a given address when using MODBUS communication

A common cause is a MODBUS client configuration issue. The gateway's MODBUS server uses 0-based addressing. If your client uses 1-based addressing, add 1 to all address values. For testing, it is recommended to use Modbus Poll software to read address data — when setting the address range, **do not check "(Base 1)"**, so that 0-based addressing is used.

Some CNC machines with older system software versions do not support certain data collection items; the corresponding address values remain 0.

---

### 7.5 Machine data is received but no machine group data is received with any communication protocol

Check that the machine group is correctly activated and that the machine group task has been enabled (see the *User Manual*, section 5.4 Machine Group Configuration). After completing the configuration, you must click **Restart Service** on the **Home** page.

Check the task configuration (see the *User Manual*, section 5.5 Task Configuration). After completing the configuration, you must click **Restart Service** on the **Home** page.

---

### 7.6 Failure when listing files or sending/receiving/deleting files via API, while the gateway program transfer page works normally

The path or filename contains special characters or spaces (unsafe characters) that must be URL-encoded. For example:

- Path `TNC:\nc_prog` must be encoded as `TNC%3A%5Cnc_prog`
- `Sinumerik/FileSystem/Part Program` must be encoded as `Sinumerik%2FFileSystem%2FPart%20Program`

In most cases, browsers and testing tools URL-encode values automatically. However, manual encoding may be required when calling the interface from certain software.

---

## Version Change History

| Version | Change Date | Change Description | Release Date |
|---------|-------------|-------------------|--------------|
| 1.3.5 | 20211227 | 1. All alarm time results changed from second-precision to millisecond-precision.<br>2. Removed `decPoint` from HTTP interface `ReadPosition`.<br>3. Modified HTTP interface `ReadProgramList` to add return values `dirAtCNC` and `subDirs` while keeping the original `programs` structure unchanged, maintaining backward compatibility.<br>4. Added MODBUS protocol output address 40260 — running program block sequence number.<br>5. Added MODBUS protocol output address 40500 — cumulative production count. | 20211227 |
| 1.4.1 | 20220215 | 1. Added MODBUS protocol and MQTT protocol outputs for GroupCount, GroupOEE, OEE, and related quantities.<br>2. MODBUS protocol outputs split into machine-related data and machine group-related data.<br>3. Supplemented MQTT protocol description.<br>4. Corrected erroneous information in the AxisData section of the MQTT protocol.<br>5. Added Chapter V: Virtual Machine Test. | 20220215 |
| 1.4.2 | 20220315 | 1. Corrected some output data types in MODBUS and MQTT protocols.<br>2. Corrected the descriptions of CNC status, CNC running status, and alarm status.<br>3. Added a new chapter: Frequently Asked Questions.<br>4. Corrected some descriptions in the common errors section. | 20220219 |
| 1.4.3 | 20220328 | 1. Revised some text content. | 20220328 |
| 1.5.0 | 20220420 | 1. Changed tool offset-related interfaces in the HTTP protocol.<br>2. Changed the MQTT protocol message content structure.<br>3. MQTT protocol data type AxisData split into FeedAndSpindle, Load, and Position.<br>4. MQTT protocol AlarmHistory changed to Alarm History.<br>5. MQTT protocol CurrentToolNumber keyword changed.<br>6. Added new file transfer error codes.<br>7. Revised some text content. | 20220420 |
| 1.5.1 | 20220426 | 1. Updated the description of OEE monitoring settings. | 20220426 |
| 1.5.2 | 20220509 | 1. Load data `axialLoad` and `spindleLoad` types changed from Int32 to Float.<br>2. Added HTTP interface `/readPlcData`; added MODBUS and MQTT PLC data output.<br>3. Added HTTP interface `api/analysis/oee`.<br>4. MQTT communication: added content referencing the gateway name and custom machine group name.<br>5. Removed multi-channel related content. | 20220509 |
| 1.5.3 | 20220531 | 1. Changed the input parameters of HTTP interface `/readPlcData`.<br>2. Added CNC status "Setup: Dry Run". | 20220531 |
| 1.5.4 | 20220617 | 1. The following HTTP interface names were changed (addresses unchanged): 1.5 CNC System Time Data renamed to Machine Time Data; 1.6 CNC Status renamed to Machine Status; 1.14 CNC Local Program List renamed to Machine Local Program List; 1.15 Receive CNC File renamed to Receive Machine File; 1.16 Send File to CNC renamed to Send File to Machine; 1.17 Delete CNC Local File renamed to Delete Machine Local File; 1.18 Lock/Unlock CNC Local Program Editing renamed to Lock/Unlock Machine Local Program Editing.<br>2. Revised the descriptions for Machine OEE and Machine Group OEE. | 20220617 |
| 1.5.5 | 20220619 | 1. Updated *User Manual* references due to manual revisions.<br>2. Revised the description of file transfer-related interfaces in Chapter I: HTTP Communication.<br>3. Added MQTT communication RPC interface content: section 3.3 RPC Interface. | 20220624 |
| 1.5.6 | 20220713 | 1. Updated *User Manual* references due to manual revisions.<br>2. Added description of file server type for program transfer. Updated the default root directory path for Fanuc [0i-D, 0i-F, 30i, 31i, 32i, PMi].<br>3. Updated the description of HTTP interface `/readPlcData`. | 20220727 |
| 1.5.7 | 20220803 | 1. Added String type data support description for HTTP interface `/readPlcData`.<br>2. Added RPC interface `/readCurrentProgram`.<br>3. Added database communication content.<br>4. Fixed incorrect axis name in MODBUS output. | 20220808 |
| 1.5.8 | 20220817 | 1. Added HTTP interface `/readProgramBlock` with corresponding MODBUS, MQTT, and database communication content.<br>2. Added HTTP interface `/api/analysis/alarm`. | 20220915 |
| 1.5.9 | 20220921 | 1. Added cumulative alarm count to MODBUS, MQTT, and database communication. | 20220921 |
| 1.6.0 | 20221031 | 1. Modified the return result of HTTP interface `/readPlcData`. Previously all data types returned a UInt16 array; now each data type returns its corresponding data format.<br>2. Removed support for data type Char in HTTP interface `/readPlcData`. Users can retrieve Byte type data and convert manually if Char data is needed.<br>3. Modified String type support in HTTP interface `/readPlcData`. When type is String, Count represents the maximum data length to read (in bytes).<br>4. Integrated support for reading machine macro variables (local variables, public variables, etc.) in HTTP interface `/readPlcData`.<br>5. Added machine cumulative status time and machine group cumulative status time to MODBUS, MQTT, and database communication.<br>6. Adjusted all MODBUS communication mapping address lengths to expand capacity. PLC data mapping address changed from 4000 to 20000; length changed from 1000 to 10000.<br>7. Added support for 64-bit format data in MODBUS communication.<br>8. Adjusted PLC data tags and content in MQTT communication.<br>9. Adjusted the time format for RPC requests and responses.<br>10. Added RPC interfaces `/analysisOEE` and `/analysisAlarm`.<br>11. Added machine status MANUAL_RAPID. | 20221031 |
| 1.6.1 | 20221111 | 1. Modified HTTP interfaces `/readOffsetData` and `/writeOffsetData` to add optional input `ToolNum` for Siemens machine tool offset read/write support.<br>2. Revised the RPC interface description. | 20221111 |
| 1.6.2 | 20221209 | 1. Added HTTP interface `/writePlcData`.<br>2. Added RPC interfaces `/readPlcData` and `/writePlcData`.<br>3. Added current machining count `CurrentCount` and spindle overload time `OverLoadS<i>` to MODBUS, MQTT, and database communication upload data.<br>4. Added support for task-defined tag names for PLC data in MQTT communication. | 20221209 |
| 1.7.0 | 20221212 | 1. Modified the request body structure of HTTP interfaces `/writePlcData`, `/writeOffsetData`, and others.<br>2. Modified the response structure of HTTP interface `/readOffsetData`.<br>3. Modified the request message structure of RPC interfaces `/writePlcData`, `/writeOffsetData`, `/sendFile`, and others. | 20221212 |
| 1.7.5 | 20230310 | 1. Modified HTTP and RPC interface `/readAlarm` to add alarm level `alarmLevel` to output.<br>2. Added alarm level variable to MODBUS, MQTT, and database data for Alarm.<br>3. Added alarm level variable to AlarmHistory in MQTT and database.<br>4. Added machine cumulative alarm time to MODBUS, MQTT, and database; requires the machine alarm information task to be activated.<br>5. Added machine cycle time data to MODBUS, MQTT, and database; requires the machine cycle time data task to be activated.<br>6. Modified HTTP and RPC interfaces `/readPlcData` and `/writePlcData` to support reading and writing by variable name on certain machine models.<br>7. Added HTTP interface `/api/analysis/count`.<br>8. Added more RPC interface support; all HTTP interfaces now have corresponding RPC interfaces. | 20230310 |
| 1.8.0 | 20230512 | 1. Corrected the default CNC root directory path for Mitsubishi systems.<br>2. Added HTTP and RPC interfaces `/readToolLife` and `/readToolLifeDetails`; tool life-related variables from `/readToolOffset` moved to the new interfaces.<br>3. Fixed the keyword `content` to `Content` in `/sendFile` and `/receiveFile`.<br>4. Added interfaces `group-analysis/oee`, `group-analysis/alarm`, `group-analysis/count`, `group-analysis/overall`, and `analysis/overall`.<br>5. Added `programStack` variable to interface `/readProgramInfo`.<br>6. Reorganized HTTP interface ordering; categorized into Status Read/Write, File Transfer, and Data Analysis. | 20230512 |
| 1.8.1 | 20230619 | 1. Removed `alarmTime` from the `/readAlarm` interface. Removed `alarmTime` from `alarmLog` in MODBUS, database, and MQTT.<br>2. To obtain machine alarm start times, use the HTTP or RPC interface `analysis/alarm`, or calculate timing from alarm activation/deactivation records in `alarmHistory`. | 20230619 |
| 1.8.2 | 20230620 | 1. Removed `alarmTime` from `alarmHistory` in MODBUS, database, and MQTT. | 20230620 |
| 1.9.0 | 20230621 | 1. Modified MQTT communication data report message format; still compatible with all data types except `OverLoadS` and `Plc` from older versions.<br>2. Added data class `AxialOverLoad` to MQTT communication protocol.<br>3. Modified data class `OverLoadS` to `SpindleOverLoad` in MQTT communication protocol. Not backward compatible with the old `OverLoadS` data class.<br>4. Added MODBUS addresses for rapid feed override and cumulative overload time for axes 1–18.<br>5. Adjusted MODBUS addresses for spindle load and spindle cumulative overload time. | 20230621 |
| 1.9.1 | 20230625 | 1. Modified data class `Plc` to `PLC` in MQTT communication protocol. Not backward compatible with the old `Plc` data class. | 20230625 |
| 1.9.2 | 20230628 | 1. Added current tool offset support to HTTP, MODBUS, MQTT, and database communication. | 20230628 |
| 1.9.3 | 20230710 | 1. Removed per-machine database write content. The old per-machine write mode will now run in log mode in the new version. (User Manual)<br>2. Added `ToolLife` and `ToolLifeDetails` data classes under MQTT communication.<br>3. Added interfaces `/createDir` and `/deleteDir`.<br>4. Added machine status `MANUAL_SINGLE_BLOCK` (Setup: Single Block Running). | 20230710 |
| 1.10.0 | 20230822 | 1. Added HTTP and RPC interface `/readFeed`, applicable to CNC and laser cutting machines, for feed data.<br>2. Added HTTP and RPC interface `/readEnergyConsumption`, applicable to CNC machines, for energy consumption data.<br>3. Added HTTP and RPC interface `/readLaserPower`, applicable to laser cutting machines, for preset and actual laser power data.<br>4. Added laser power data support to MODBUS, MQTT, and database communication.<br>5. Corrected MODBUS machine group data address error. Each group's data address difference is 100, not 1000.<br>6. Added multi-channel system support to some HTTP and RPC interfaces.<br>7. Modified MODBUS communication: addresses previously at 3000+ adjusted to 1000+. | 20230822 |
| 1.11.0 | 20230906 | 1. Adjusted some RPC data analysis interfaces to align with the corresponding HTTP interfaces.<br>2. Added binary file support to `/receiveFile` and `/sendFile` interfaces. | 20230906 |
| 1.12.0 | 20230926 | 1. Added HTTP and RPC interface `/readTaskData` to retrieve the most recent data for a given task from the gateway cache.<br>2. Added grouping interval support to data analysis interfaces. All analysis interface outputs now include `StartTime` and `EndTime` variables. | 20230926 |
| 1.13.0 | 20231023 | 1. Added HTTP and RPC interfaces `/batchReadOffsetData`, `/batchReadToolLife`, `/batchReadToolLifeDetails`. | 20231023 |
| 1.14.0 | 20231101 | 1. Added HTTP and RPC interfaces `/readTaskData`, `/batchReadTaskData`, `/readGroupTaskData`.<br>2. Corrected an erroneous description in `/readTimeData` regarding data available from GSK machines. Added descriptions for newly supported device models.<br>3. Modified the `area` format in requests for `/readPlcData` and `/writePlcData`.<br>4. Modified the interface description format in Chapter I: HTTP Communication.<br>5. Modified content in section 3.1 Data Report Message Format. | 20231101 |
| 1.15.0 | 20231128 | 1. Added HTTP and RPC interface `/batchReadGroupTaskData`.<br>2. Added description of S7 tag support for Siemens [Universal] in the `/readPlcData` interface.<br>3. Added return parameters `remainingCycleTimeMin` and `remainingCycleTimeMs` to the `/readTimeData` interface.<br>4. Added descriptions for Kede machine tools.<br>5. Added request parameter `channel` support to `/readProgramInfo` and `/readProgramBlock` interfaces.<br>6. Corrected a spelling error for `Position` in the data report message `type`.<br>7. Fixed capitalization of keywords in file transfer interfaces. All interface keywords now use lowercase first letters.<br>8. Changed axis name address length in MODBUS communication to 2, to support axis names up to 4 characters.<br>9. Added external PLC task data content to MODBUS and MQTT communication. | 20231128 |
| 1.15.1 | 20231206 | 1. Revised some description content. | 20240202 |
| 1.15.2 | 20231218 | 1. Added HTTP interfaces `/sendFileStream` and `/receiveFileStream` to support large file transfers. | 20240204 |
| 1.15.3 | 20231226 | 1. Added `subDir` parameter support to all file transfer interfaces.<br>2. Changed types of `rawRemainingCount` and `rawPrewarningRemainingCount` in the `/ToolLife` HTTP and RPC interfaces from Double to Int32. | 20240204 |
| 1.15.5 | 20240122 | 1. Updated file transfer interface supported CNC model tables. | 20240204 |
| 1.15.7 | 20240120 | 1. Changed the default root directory path for Fanuc [0i-D, 0i-F, 30i, 31i, 32i, 35i, PMi] to `//CNC_MEM/`. | 20240204 |
| 1.16.0 | 20240130 | 1. Replaced machine group number `groupNum` with machine group identifier `groupID` in HTTP interfaces, RPC interfaces, MQTT, and database. | 20240205 |
| 1.16.1 | 20240221 | 1. Restructured document content; added Chapter I: Important Notes and moved common descriptions from other chapters into it. Other chapter numbers adjusted accordingly.<br>2. Added data classes AxialLoad (servo axis load), LaserPower (laser power), Offset (tool offset data), and SpindleLoad (spindle load).<br>3. Added new tag `channel` (channel number) to some data classes. | 20240221 |
| 1.16.2 | 20240304 | 1. Added new interface category to HTTP and RPC interfaces: Historical Data Interface, including machine historical data and group-machine (all machines in a group) historical data.<br>2. Added `time` (data acquisition time) return parameter to `readTaskData`, `batchReadTaskData`, `readGroupTaskData`, and `batchReadGroupTaskData`.<br>3. Added MQTT mode IoTDA related description to MQTT communication.<br>4. Updated `readPlcData` and `writePlcData` interface content; added support descriptions for additional CNC systems. | 20240304 |
| 1.16.3 | 20240308 | 1. Added interface `backupFiles` (backup machine files) to the file transfer interface category in HTTP and RPC interfaces. | 20240308 |
| 1.16.4 | 20240308 | 1. Added interface `batchSendFile` (batch send files to machine) to the file transfer interface category in HTTP and RPC interfaces. | 20240308 |
| 1.16.5 | 20240308 | 1. Added interface `batchDeleteFile` (batch delete machine files) to the file transfer interface category in HTTP and RPC interfaces. | 20240308 |
| 1.17.0 | 20240315 | 1. Modified the response body of batch task interfaces `batchReadOffsetData`, `batchReadToolLife`, and `batchReadToolLifeDetails`. When a request in the batch fails, the corresponding position in the response array now contains error information. | 20240315 |
| 1.17.1 | 20240319 | 1. Added HTTP and RPC interface: `batchReadErrors` — batch read machine connection status. | 20240319 |
| 1.17.2 | 20240319 | 1. Added HTTP and RPC interface: `selectProgram` — select program. | 20240319 |
| 1.17.3 | 20240329 | 1. Removed unused field `runningPrgName` from Cycle (Cycle Time Data).<br>2. For `readPlcData`, if a retrieved Double value is `double.NaN`, it was previously converted to `double.Min` before output. Direct output of `double.NaN` is now supported. | 20240329 |
| 1.17.5 | 20240401 | 1. Removed unused field `runningPrgName` from Cycle (Cycle Time Data).<br>2. Added field `adjustedStatus` to CNCStatus (Machine Status Data). | 20240401 |
| 1.17.6 | 20240416 | 1. Added HTTP and RPC interface `readAllPrograms` — browse all files. This interface retrieves all program names and their paths under a specified directory, including those in sub-folders (if the machine supports directory switching).<br>2. Added tool offset and tool life descriptions for MAZAK machine tools. | 20240416 |
| 1.18.0 | 20240429 | 1. Adjusted some document content. | 20240429 |
| 1.18.1 | 20240614 | 1. Added gateway function interfaces and configuration interfaces.<br>2. Added ID Database Identifier description.<br>3. Corrected content for interface `batchDeleteFile`. | 20240614 |
| 1.18.8 | 20241108 | 1. Added numerous fields to the machine configuration interface.<br>2. Fixed the spelling error of `taskEnergy` in the machine configuration interface.<br>3. Added some fields to the machine status monitoring settings interface. | 20241108 |
| 1.19.1 | 20250514 | 1. Fanuc model PMi renamed to Power Motion i-A.<br>2. Fixed broken hyperlinks.<br>3. Updated tool life data tag combination table.<br>4. Added the following interfaces: `/core/restart`, `/config/settings`, `/config/update-settings`, `/config/update-security`, `/config/remote-access`, `/config/update-remote-access`, `/gateway/alias`, `/gateway/update-alias`, `/gateway/time`, `/gateway/sync-time`, `/gateway/time-zone`, `/gateway/update-time-zone`, `/gateway/system-locale`, `/gateway/update-system-locale`, `/gateway/lan`, `/gateway/update-lan`, `/gateway/wifi`, `/gateway/update-wifi`, `/gateway/search-wifi`, `/gateway/connect-wifi`, `/gateway/disconnect-wifi`, `/gateway/static-routing`, `/gateway/update-static-routing`, `/gateway/connect-remote-host`, `/gateway/disconnect-remote-host`, `/gateway/list-file-server-items`, `/gateway/delete-file-server-item`, `/gateway/network-adapters`, `/api/cnc/readLog`.<br>5. Adjusted variable names and ordering in some machine configuration interfaces. | 20250514 |
| 1.19.2 | 20250603 | 1. Added the following interfaces: `/config/batch-delete-machines`, `/config/batch-delete-groups`, `/analysis/cycle`, `/group-analysis/cycle`.<br>2. Original machine task `alarm` (Alarm Information) split into `alarm` (Current Alarm) and `alarmhistory` (Alarm History).<br>3. Adjusted variable names and ordering in some machine configuration interfaces.<br>4. Removed variable `monitorOverloadInterval` from overload monitoring settings; replaced by `readOverloadInterval` in machine task interval settings. | 20250603 |
| 1.19.3 | 20251222 | 1. Corrected an erroneous description: in the `readCount` (read machining count) interface response, the type of `count` is corrected to Int32.<br>2. Removed the no-longer-used data classes AxialLoad (servo axis load) and SpindleLoad (spindle load). Use the Load data class for related data.<br>3. Merged data classes ToolLife and ToolLifeDetails into a single class.<br>4. Added authentication method and authentication interface descriptions.<br>5. Revised interface categories; File Transfer Interface renamed to File Management Interface.<br>6. Added interfaces: `readErrorSummary` (read status summary) and `searchFile` (search machine files).<br>7. Added data type LogHistory (Log History) and its corresponding machine task.<br>8. Removed deprecated parameters `UseGatewayAlias` and `KeepAliveInterval` from MQTT configuration.<br>9. Added machine configuration parameters: `numberOfTasks` (number of enabled tasks), custom status parameters, custom alarm parameters, and custom machining count parameters.<br>10. Updated tool offset data tag combination table.<br>11. Updated tool life data tag combination table.<br>12. Added interfaces `remote-access` (get remote access settings) and `update-remote-access` (update remote access settings).<br>13. Added request parameter `Channel` (channel number) support to `ReadPlcData` and `WritePlcData` interfaces.<br>14. Modified the following interfaces: `/api/gateway/wifi`, `/api/gateway/update-wifi`, `/api/gateway/search-wifi`, `/api/config/gateway-info`, `/api/config/cloud-settings`, `/api/config/update-cloud-settings`.<br>15. Added interface `/core/license-info`. | 20251222 |
| 1.19.4 | 20260211 | 1. Authentication method updated: the original API Key method has been replaced with the Secret Key method.<br>2. Original machine task Cumulative Status Time merged into the Machine Status task; cumulative time is now tracked automatically when machine status is collected.<br>3. Added variable `LastTotalTime` (last cycle total time) to Cycle (Cycle Time Data).<br>4. Added output variable `StartTime` (cycle start time) to `/api/analysis/cycle` and `/api/group-analysis/cycle` interfaces.<br>5. Machine group number range expanded from 1–8 to 1–16.<br>6. Updated the supported RPC interfaces table. | 20260211 |

---
